<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Pointwise Spending Function — sfPoints • gsDesign</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Pointwise Spending Function — sfPoints" />
<meta property="og:description" content="The function sfPoints implements a spending function with values
specified for an arbitrary set of specified points. It is now recommended to
use sfLinear rather than sfPoints. Normally sfPoints will be passed
to gsDesign in the parameter sfu for the upper bound or
sfl for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence,
just the points they wish to specify. If using sfPoints() in a
design, it is recommended to specify how to interpolate between the
specified points (e.g,, linear interpolation); also consider fitting smooth
spending functions; see Spending_Function_Overview." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gsDesign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.1.0.9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pointwise Spending Function</h1>
    
    <div class="hidden name"><code>sfPoints.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function <code>sfPoints</code> implements a spending function with values
specified for an arbitrary set of specified points. It is now recommended to
use sfLinear rather than sfPoints. Normally <code>sfPoints</code> will be passed
to <code>gsDesign</code> in the parameter <code>sfu</code> for the upper bound or
<code>sfl</code> for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence,
just the points they wish to specify. If using <code>sfPoints()</code> in a
design, it is recommended to specify how to interpolate between the
specified points (e.g,, linear interpolation); also consider fitting smooth
spending functions; see <a href='Spending_Function_Overview.html'>Spending_Function_Overview</a>.</p>
    </div>

    <pre class="usage"><span class='fu'>sfPoints</span>(<span class='no'>alpha</span>, <span class='no'>t</span>, <span class='no'>param</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>alpha</th>
      <td><p>Real value \(&gt; 0\) and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size/information.</p></td>
    </tr>
    <tr>
      <th>t</th>
      <td><p>A vector of points with increasing values from &gt;0 and &lt;=1.  Values
of the proportion of sample size/information for which the spending function
will be computed.</p></td>
    </tr>
    <tr>
      <th>param</th>
      <td><p>A vector of the same length as <code>t</code> specifying the
cumulative proportion of spending to corresponding to each point in
<code>t</code>; must be &gt;=0 and &lt;=1.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of type <code>spendfn</code>. See spending functions for further
details.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The manual is not linked to this help file, but is available in
library/gsdesign/doc/gsDesignManual.pdf in the directory where R is
installed.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='Spending_Function_Overview.html'>Spending_Function_Overview</a>, <code><a href='gsDesign.html'>gsDesign</a></code>,
<a href='gsDesign-package-overview.html'>gsDesign package overview</a>, <a href='sfDistribution.html'>sfLogistic</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>ggplot2</span>)
<span class='co'># example to specify spending on a pointwise basis</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>6</span>, <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfPoints</span>, <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>.01</span>, <span class='fl'>.05</span>, <span class='fl'>.1</span>, <span class='fl'>.25</span>, <span class='fl'>.5</span>, <span class='fl'>1</span>),
  <span class='kw'>test.type</span> <span class='kw'>=</span> <span class='fl'>2</span>
)
<span class='no'>x</span></div><div class='output co'>#&gt; Symmetric two-sided group sequential design with
#&gt; 90 % power and 2.5 % Type I Error.
#&gt; Spending computations assume trial stops
#&gt; if a bound is crossed.
#&gt; 
#&gt;            Sample
#&gt;             Size 
#&gt;   Analysis Ratio*  Z   Nominal p  Spend
#&gt;          1  0.171 3.48    0.0002 0.0002
#&gt;          2  0.342 3.07    0.0011 0.0010
#&gt;          3  0.512 2.94    0.0017 0.0013
#&gt;          4  0.683 2.58    0.0050 0.0038
#&gt;          5  0.854 2.33    0.0099 0.0062
#&gt;          6  1.025 2.03    0.0211 0.0125
#&gt;      Total                       0.0250 
#&gt; 
#&gt; ++ alpha spending:
#&gt;  User-specified spending function with Points = 0.01 0.05 0.1 0.25 0.5 1.
#&gt; * Sample size ratio compared to fixed design with no interim
#&gt; 
#&gt; Boundary crossing probabilities and expected sample size
#&gt; assume any cross stops the trial
#&gt; 
#&gt; Upper boundary (power or Type I Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3      4      5      6 Total   E{N}
#&gt;   0.0000 0.0002 0.0010 0.0013 0.0038 0.0063 0.0125 0.025 1.0171
#&gt;   3.2415 0.0161 0.1072 0.1626 0.2666 0.2066 0.1409 0.900 0.7282
#&gt; 
#&gt; Lower boundary (futility or Type II Error)
#&gt;           Analysis
#&gt;    Theta     1     2      3      4      5      6 Total
#&gt;   0.0000 2e-04 0.001 0.0013 0.0038 0.0063 0.0125 0.025
#&gt;   3.2415 0e+00 0.000 0.0000 0.0000 0.0000 0.0000 0.000</div><div class='input'>
<span class='co'># get proportion of upper spending under null hypothesis</span>
<span class='co'># at each analysis</span>
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='no'>x</span>$<span class='no'>upper</span>$<span class='no'>prob</span>[, <span class='fl'>1</span>] / <span class='fl'>.025</span>

<span class='co'># change to cumulative proportion of spending</span>
<span class='kw'>for</span> (<span class='no'>i</span> <span class='kw'>in</span> <span class='fl'>2</span>:<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>y</span>))
  <span class='no'>y</span>[<span class='no'>i</span>] <span class='kw'>&lt;-</span> <span class='no'>y</span>[<span class='no'>i</span> - <span class='fl'>1</span>] + <span class='no'>y</span>[<span class='no'>i</span>]

<span class='co'># this should correspond to input sfupar</span>
<span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span>(<span class='no'>y</span>, <span class='fl'>6</span>)</div><div class='output co'>#&gt; [1] 0.01 0.05 0.10 0.25 0.50 1.00</div><div class='input'>
<span class='co'># plot these cumulative spending points</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='fl'>1</span>:<span class='fl'>6</span> / <span class='fl'>6</span>, <span class='no'>y</span>,
  <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Pointwise spending function example"</span>,
  <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"Proportion of final sample size"</span>,
  <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>"Cumulative proportion of spending"</span>,
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"p"</span>
)</div><div class='input'>
<span class='co'># approximate this with a t-distribution spending function</span>
<span class='co'># by fitting 3 points</span>
<span class='no'>tx</span> <span class='kw'>&lt;-</span> <span class='fl'>0</span>:<span class='fl'>100</span> / <span class='fl'>100</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span>(<span class='no'>tx</span>, <span class='fu'><a href='sfTDist.html'>sfTDist</a></span>(<span class='fl'>1</span>, <span class='no'>tx</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>5</span>) / <span class='fl'>6</span>, <span class='fl'>.01</span>, <span class='fl'>.1</span>, <span class='fl'>.5</span>))$<span class='no'>spend</span>)</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/text.html'>text</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>.6</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>.9</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='st'>"Pointwise Spending Approximated by"</span>)</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/text.html'>text</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>.6</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>.83</span>, <span class='st'>"t-Distribution Spending with 3-point interpolation"</span>)</div><div class='img'><img src='sfPoints-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># example without lower spending at initial interim or</span>
<span class='co'># upper spending at last interim</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfPoints</span>, <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>.25</span>, <span class='fl'>.25</span>),
  <span class='kw'>sfl</span> <span class='kw'>=</span> <span class='no'>sfPoints</span>, <span class='kw'>sflpar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>.25</span>)
)
<span class='no'>x</span></div><div class='output co'>#&gt; Asymmetric two-sided group sequential design with
#&gt; 90 % power and 2.5 % Type I Error.
#&gt; Upper bound spending computations assume
#&gt; trial continues if lower bound is crossed.
#&gt; 
#&gt;            Sample
#&gt;             Size    ----Lower bounds----  ----Upper bounds-----
#&gt;   Analysis Ratio*    Z   Nominal p Spend+   Z   Nominal p Spend++
#&gt;          1  0.351 -20.00    0.0000  0.000  2.50    0.0063  0.0062
#&gt;          2  0.703   0.76    0.7758  0.025 20.00    0.0000  0.0000
#&gt;          3  1.054   2.04    0.9793  0.075  2.04    0.0207  0.0188
#&gt;      Total                        0.1000                 0.0250 
#&gt; + lower bound beta spending (under H1):
#&gt;  User-specified spending function with Points = 0 0.25 1.
#&gt; ++ alpha spending:
#&gt;  User-specified spending function with Points = 0.25 0.25 1.
#&gt; * Sample size ratio compared to fixed design with no interim
#&gt; 
#&gt; Boundary crossing probabilities and expected sample size
#&gt; assume any cross stops the trial
#&gt; 
#&gt; Upper boundary (power or Type I Error)
#&gt;           Analysis
#&gt;    Theta      1 2      3  Total   E{N}
#&gt;   0.0000 0.0063 0 0.0182 0.0245 0.7773
#&gt;   3.2415 0.2822 0 0.6178 0.9000 0.8470
#&gt; 
#&gt; Lower boundary (futility or Type II Error)
#&gt;           Analysis
#&gt;    Theta 1      2      3  Total
#&gt;   0.0000 0 0.7755 0.2001 0.9755
#&gt;   3.2415 0 0.0250 0.0750 0.1000</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


