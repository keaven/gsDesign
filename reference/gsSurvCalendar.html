<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Time-to-event endpoint design with calendar timing of analyses — gsSurvCalendar • gsDesign</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Time-to-event endpoint design with calendar timing of analyses — gsSurvCalendar"><meta name="description" content="Time-to-event endpoint design with calendar timing of analyses"><meta property="og:description" content="Time-to-event endpoint design with calendar timing of analyses"><meta property="og:image" content="https://keaven.github.io/gsDesign/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Time-to-event endpoint design with calendar timing of analyses</h1>
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/v3.8.0/R/gsSurvCalendar.R" class="external-link"><code>R/gsSurvCalendar.R</code></a></small>
      <div class="d-none name"><code>gsSurvCalendar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Time-to-event endpoint design with calendar timing of analyses</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gsSurvCalendar</span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>  sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  astar <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  sfu <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfHSD.html">sfHSD</a></span>,</span>
<span>  sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>,</span>
<span>  sfl <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfHSD.html">sfHSD</a></span>,</span>
<span>  sflpar <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span>  calendarTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span><span class="op">)</span>,</span>
<span>  spending <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"information"</span>, <span class="st">"calendar"</span><span class="op">)</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fl">6</span>,</span>
<span>  hr <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>  hr0 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  eta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  etaE <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gamma <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  S <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  minfup <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">1e-06</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-test-type">test.type<a class="anchor" aria-label="anchor" href="#arg-test-type"></a></dt>
<dd><p>Test type. See <code><a href="nSurv.html">gsSurv</a></code>.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Type I error rate. Default is 0.025 since 1-sided
testing is default.</p></dd>


<dt id="arg-sided">sided<a class="anchor" aria-label="anchor" href="#arg-sided"></a></dt>
<dd><p><code>1</code> for 1-sided testing, <code>2</code> for 2-sided testing.</p></dd>


<dt id="arg-beta">beta<a class="anchor" aria-label="anchor" href="#arg-beta"></a></dt>
<dd><p>Type II error rate. Default is 0.10
(90% power); <code>NULL</code> if power is to be computed based on
other input values.</p></dd>


<dt id="arg-astar">astar<a class="anchor" aria-label="anchor" href="#arg-astar"></a></dt>
<dd><p>Normally not specified. If <code>test.type = 5</code>
or <code>6</code>, <code>astar</code> specifies the total probability
of crossing a lower bound at all analyses combined. This
will be changed to <code>1 - alpha</code> when default value of
<code>0</code> is used. Since this is the expected usage,
normally <code>astar</code> is not specified by the user.</p></dd>


<dt id="arg-sfu">sfu<a class="anchor" aria-label="anchor" href="#arg-sfu"></a></dt>
<dd><p>A spending function or a character string
indicating a boundary type (that is, <code>"WT"</code> for
Wang-Tsiatis bounds, <code>"OF"</code> for O'Brien-Fleming bounds and
<code>"Pocock"</code> for Pocock bounds). For one-sided and symmetric
two-sided testing is used to completely specify spending
(<code>test.type = 1</code>, <code>2</code>), <code>sfu</code>. The default value is
<code>sfHSD</code> which is a Hwang-Shih-DeCani spending function.</p></dd>


<dt id="arg-sfupar">sfupar<a class="anchor" aria-label="anchor" href="#arg-sfupar"></a></dt>
<dd><p>Real value, default is <code>-4</code> which is an
O'Brien-Fleming-like conservative bound when used with the
default Hwang-Shih-DeCani spending function. This is a
real-vector for many spending functions. The parameter
<code>sfupar</code> specifies any parameters needed for the spending
function specified by <code>sfu</code>; this will be ignored for
spending functions (<code>sfLDOF</code>, <code>sfLDPocock</code>)
or bound types (<code>"OF"</code>, <code>"Pocock"</code>)
that do not require parameters.</p></dd>


<dt id="arg-sfl">sfl<a class="anchor" aria-label="anchor" href="#arg-sfl"></a></dt>
<dd><p>Specifies the spending function for lower
boundary crossing probabilities when asymmetric,
two-sided testing is performed
(<code>test.type = 3</code>, <code>4</code>, <code>5</code>, or <code>6</code>).
Unlike the upper bound,
only spending functions are used to specify the lower bound.
The default value is <code>sfHSD</code> which is a
Hwang-Shih-DeCani spending function. The parameter
<code>sfl</code> is ignored for one-sided testing
(<code>test.type = 1</code>) or symmetric 2-sided testing
(<code>test.type = 2</code>).</p></dd>


<dt id="arg-sflpar">sflpar<a class="anchor" aria-label="anchor" href="#arg-sflpar"></a></dt>
<dd><p>Real value, default is <code>-2</code>, which, with the
default Hwang-Shih-DeCani spending function, specifies a
less conservative spending rate than the default for the
upper bound.</p></dd>


<dt id="arg-calendartime">calendarTime<a class="anchor" aria-label="anchor" href="#arg-calendartime"></a></dt>
<dd><p>Vector of increasing positive numbers
with calendar times of analyses. Time 0 is start of
randomization.</p></dd>


<dt id="arg-spending">spending<a class="anchor" aria-label="anchor" href="#arg-spending"></a></dt>
<dd><p>Select between calendar-based spending and
information-based spending.</p></dd>


<dt id="arg-lambdac">lambdaC<a class="anchor" aria-label="anchor" href="#arg-lambdac"></a></dt>
<dd><p>Scalar, vector or matrix of event hazard
rates for the control group; rows represent time periods while
columns represent strata; a vector implies a single stratum.</p></dd>


<dt id="arg-hr">hr<a class="anchor" aria-label="anchor" href="#arg-hr"></a></dt>
<dd><p>Hazard ratio (experimental/control) under the
alternate hypothesis (scalar).</p></dd>


<dt id="arg-hr-">hr0<a class="anchor" aria-label="anchor" href="#arg-hr-"></a></dt>
<dd><p>Hazard ratio (experimental/control) under the null
hypothesis (scalar).</p></dd>


<dt id="arg-eta">eta<a class="anchor" aria-label="anchor" href="#arg-eta"></a></dt>
<dd><p>Scalar, vector or matrix of dropout hazard rates
for the control group; rows represent time periods while
columns represent strata; if entered as a scalar, rate is
constant across strata and time periods; if entered as a
vector, rates are constant across strata.</p></dd>


<dt id="arg-etae">etaE<a class="anchor" aria-label="anchor" href="#arg-etae"></a></dt>
<dd><p>Matrix dropout hazard rates for the experimental
group specified in like form as <code>eta</code>; if <code>NULL</code>,
this is set equal to <code>eta</code>.</p></dd>


<dt id="arg-gamma">gamma<a class="anchor" aria-label="anchor" href="#arg-gamma"></a></dt>
<dd><p>A scalar, vector or matrix of rates of entry by
time period (rows) and strata (columns); if entered as a
scalar, rate is constant across strata and time periods;
if entered as a vector, rates are constant across strata.</p></dd>


<dt id="arg-r">R<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>A scalar or vector of durations of time periods for
recruitment rates specified in rows of <code>gamma</code>. Length is the
same as number of rows in <code>gamma</code>. Note that when variable
enrollment duration is specified (input <code>T = NULL</code>), the final
enrollment period is extended as long as needed.</p></dd>


<dt id="arg-s">S<a class="anchor" aria-label="anchor" href="#arg-s"></a></dt>
<dd><p>A scalar or vector of durations of piecewise constant
event rates specified in rows of <code>lambda</code>, <code>eta</code> and <code>etaE</code>;
this is <code>NULL</code> if there is a single event rate per stratum
(exponential failure) or length of the number of rows in <code>lambda</code>
minus 1, otherwise.</p></dd>


<dt id="arg-minfup">minfup<a class="anchor" aria-label="anchor" href="#arg-minfup"></a></dt>
<dd><p>A non-negative scalar less than the maximum value
in <code>calendarTime</code>. Enrollment will be cut off at the
difference between the maximum value in <code>calendarTime</code>
and <code>minfup</code>.</p></dd>


<dt id="arg-ratio">ratio<a class="anchor" aria-label="anchor" href="#arg-ratio"></a></dt>
<dd><p>Randomization ratio of experimental treatment
divided by control; normally a scalar, but may be a vector with
length equal to number of strata.</p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>Integer value (&gt;= 1 and &lt;= 80) controlling the number of numerical
integration grid points. Default is 18, as recommended by Jennison and
Turnbull (2000). Grid points are spread out in the tails for accurate
probability calculations. Larger values provide more grid points and greater
accuracy but slow down computation. Jennison and Turnbull (p. 350) note an
accuracy of \(10^{-6}\) with <code>r = 16</code>. This parameter is normally
not changed by users.</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>Tolerance for error passed to the <code><a href="gsDesign.html">gsDesign</a></code> function.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First example: while timing is calendar-based, spending is event-based</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">gsSurvCalendar</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="toInteger.html">toInteger</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 29%                  Z   3.0856  -0.4349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 130        p (1-sided)   0.0010   0.6682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 50       ~HR at bound   0.4178   1.1309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 12   P(Cross) if HR=1   0.0010   0.3318</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.6   0.1018   0.0122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 79%                  Z   2.3279   1.3991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 194        p (1-sided)   0.0100   0.0809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 137       ~HR at bound   0.6718   0.7874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 24   P(Cross) if HR=1   0.0106   0.9213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.6   0.7505   0.0606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   2.0154   2.0154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 194        p (1-sided)   0.0219   0.0219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 173       ~HR at bound   0.7361   0.7361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 36   P(Cross) if HR=1   0.0228   0.9772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.6   0.9001   0.0999</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Second example: both timing and spending are calendar-based</span></span></span>
<span class="r-in"><span><span class="co"># This results in less spending at interims and leaves more for final analysis</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">gsSurvCalendar</span><span class="op">(</span>spending <span class="op">=</span> <span class="st">"calendar"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="toInteger.html">toInteger</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 29%                  Z   3.0107  -0.3784</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 126        p (1-sided)   0.0013   0.6474</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 49       ~HR at bound   0.4231   1.1142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 12   P(Cross) if HR=1   0.0013   0.3526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.6   0.1123   0.0148</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 79%                  Z   2.5581   1.1380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 188        p (1-sided)   0.0053   0.1276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 133       ~HR at bound   0.6417   0.8209</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 24   P(Cross) if HR=1   0.0062   0.8785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.6   0.6593   0.0437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   1.9854   1.9854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 188        p (1-sided)   0.0235   0.0235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 168       ~HR at bound   0.7361   0.7361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 36   P(Cross) if HR=1   0.0237   0.9763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.6   0.9006   0.0994</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that calendar timing for spending relates to planned timing for y</span></span></span>
<span class="r-in"><span><span class="co"># rather than timing in y after toInteger() conversion</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Values plugged into spending function for calendar time</span></span></span>
<span class="r-in"><span><span class="va">y</span><span class="op">$</span><span class="va">usTime</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3333333 0.6666667 1.0000000</span>
<span class="r-in"><span><span class="co"># Actual calendar fraction from design after toInteger() conversion</span></span></span>
<span class="r-in"><span><span class="va">y</span><span class="op">$</span><span class="cn">T</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3317245 0.6637292 1.0000000</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

