<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The functions sfLogistic(), sfNormal(),
sfExtremeValue(), sfExtremeValue2(), sfCauchy(), and
sfBetaDist() are all 2-parameter spending function families. These
provide increased flexibility in some situations where the flexibility of a
one-parameter spending function family is not sufficient. These functions
all allow fitting of two points on a cumulative spending function curve; in
this case, four parameters are specified indicating an x and a y coordinate
for each of 2 points. Normally each of these functions will be passed to
gsDesign() in the parameter sfu for the upper bound or
sfl for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated in the examples; note, however, that an
automatic \(\alpha\)- and \(\beta\)-spending function plot
is also available.
sfBetaDist(alpha,t,param) is simply alpha times the incomplete
beta cumulative distribution function with parameters \(a\) and \(b\)
passed in param evaluated at values passed in t.
The other spending functions take the form $$f(t;\alpha,a,b)=\alpha
F(a+bF^{-1}(t))$$ where \(F()\) is a
cumulative distribution function with values \(&amp;gt; 0\) on the real line
(logistic for sfLogistic(), normal for sfNormal(), extreme
value for sfExtremeValue() and Cauchy for sfCauchy()) and
\(F^{-1}()\) is its inverse.
For the logistic spending function this simplifies to
$$f(t;\alpha,a,b)=\alpha (1-(1+e^a(t/(1-t))^b)^{-1}).$$
For the extreme value distribution with $$F(x)=\exp(-\exp(-x))$$ this
simplifies to $$f(t;\alpha,a,b)=\alpha \exp(-e^a (-\ln t)^b).$$ Since the
extreme value distribution is not symmetric, there is also a version where
the standard distribution is flipped about 0. This is reflected in
sfExtremeValue2() where $$F(x)=1-\exp(-\exp(x)).$$"><title>Two-parameter Spending Function Families — sfLogistic • gsDesign</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Two-parameter Spending Function Families — sfLogistic"><meta property="og:description" content="The functions sfLogistic(), sfNormal(),
sfExtremeValue(), sfExtremeValue2(), sfCauchy(), and
sfBetaDist() are all 2-parameter spending function families. These
provide increased flexibility in some situations where the flexibility of a
one-parameter spending function family is not sufficient. These functions
all allow fitting of two points on a cumulative spending function curve; in
this case, four parameters are specified indicating an x and a y coordinate
for each of 2 points. Normally each of these functions will be passed to
gsDesign() in the parameter sfu for the upper bound or
sfl for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated in the examples; note, however, that an
automatic \(\alpha\)- and \(\beta\)-spending function plot
is also available.
sfBetaDist(alpha,t,param) is simply alpha times the incomplete
beta cumulative distribution function with parameters \(a\) and \(b\)
passed in param evaluated at values passed in t.
The other spending functions take the form $$f(t;\alpha,a,b)=\alpha
F(a+bF^{-1}(t))$$ where \(F()\) is a
cumulative distribution function with values \(&amp;gt; 0\) on the real line
(logistic for sfLogistic(), normal for sfNormal(), extreme
value for sfExtremeValue() and Cauchy for sfCauchy()) and
\(F^{-1}()\) is its inverse.
For the logistic spending function this simplifies to
$$f(t;\alpha,a,b)=\alpha (1-(1+e^a(t/(1-t))^b)^{-1}).$$
For the extreme value distribution with $$F(x)=\exp(-\exp(-x))$$ this
simplifies to $$f(t;\alpha,a,b)=\alpha \exp(-e^a (-\ln t)^b).$$ Since the
extreme value distribution is not symmetric, there is also a version where
the standard distribution is flipped about 0. This is reflected in
sfExtremeValue2() where $$F(x)=1-\exp(-\exp(x)).$$"><meta property="og:image" content="https://keaven.github.io/gsDesign/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.6.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Two-parameter Spending Function Families</h1>
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/HEAD/R/gsSpending.R" class="external-link"><code>R/gsSpending.R</code></a></small>
      <div class="d-none name"><code>sfDistribution.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The functions <code>sfLogistic()</code>, <code>sfNormal()</code>,
<code>sfExtremeValue()</code>, <code>sfExtremeValue2()</code>, <code>sfCauchy()</code>, and
<code>sfBetaDist()</code> are all 2-parameter spending function families. These
provide increased flexibility in some situations where the flexibility of a
one-parameter spending function family is not sufficient. These functions
all allow fitting of two points on a cumulative spending function curve; in
this case, four parameters are specified indicating an x and a y coordinate
for each of 2 points. Normally each of these functions will be passed to
<code><a href="gsDesign.html">gsDesign()</a></code> in the parameter <code>sfu</code> for the upper bound or
<code>sfl</code> for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated in the examples; note, however, that an
automatic \(\alpha\)- and \(\beta\)-spending function plot
is also available.</p>
<p><code>sfBetaDist(alpha,t,param)</code> is simply <code>alpha</code> times the incomplete
beta cumulative distribution function with parameters \(a\) and \(b\)
passed in <code>param</code> evaluated at values passed in <code>t</code>.</p>
<p>The other spending functions take the form $$f(t;\alpha,a,b)=\alpha
F(a+bF^{-1}(t))$$ where \(F()\) is a
cumulative distribution function with values \(&gt; 0\) on the real line
(logistic for <code>sfLogistic()</code>, normal for <code>sfNormal()</code>, extreme
value for <code>sfExtremeValue()</code> and Cauchy for <code>sfCauchy()</code>) and
\(F^{-1}()\) is its inverse.</p>
<p>For the logistic spending function this simplifies to
$$f(t;\alpha,a,b)=\alpha (1-(1+e^a(t/(1-t))^b)^{-1}).$$</p>
<p>For the extreme value distribution with $$F(x)=\exp(-\exp(-x))$$ this
simplifies to $$f(t;\alpha,a,b)=\alpha \exp(-e^a (-\ln t)^b).$$ Since the
extreme value distribution is not symmetric, there is also a version where
the standard distribution is flipped about 0. This is reflected in
<code>sfExtremeValue2()</code> where $$F(x)=1-\exp(-\exp(x)).$$</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sfLogistic</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sfBetaDist</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sfCauchy</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sfExtremeValue</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sfExtremeValue2</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sfNormal</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>alpha</dt>
<dd><p>Real value \(&gt; 0\) and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size or information.</p></dd>


<dt>t</dt>
<dd><p>A vector of points with increasing values from 0 to 1, inclusive.
Values of the proportion of sample size or information for which the
spending function will be computed.</p></dd>


<dt>param</dt>
<dd><p>In the two-parameter specification, <code>sfBetaDist()</code>
requires 2 positive values, while <code>sfLogistic()</code>, <code>sfNormal()</code>,
<code>sfExtremeValue()</code>,</p>
<p><code>sfExtremeValue2()</code> and <code>sfCauchy()</code> require the first parameter
to be any real value and the second to be a positive value.  The four
parameter specification is <code>c(t1,t2,u1,u2)</code> where the objective is that
<code>sf(t1)=alpha*u1</code> and <code>sf(t2)=alpha*u2</code>.  In this
parameterization, all four values must be between 0 and 1 and <code>t1 &lt;
t2</code>, <code>u1 &lt; u2</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of type <code>spendfn</code>. 
See <code><a href="../articles/SpendingFunctionOverview.html">vignette("SpendingFunctionOverview")</a></code> for further details.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The gsDesign technical manual is available at
  <a href="https://keaven.github.io/gsd-tech-manual/" class="external-link">https://keaven.github.io/gsd-tech-manual/</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="gsDesign.html">gsDesign</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># design a 4-analysis trial using a Kim-DeMets spending function</span></span></span>
<span class="r-in"><span><span class="co"># for both lower and upper bounds</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="gsDesign.html">gsDesign</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">4</span>, sfu <span class="op">=</span> <span class="va">sfPower</span>, sfupar <span class="op">=</span> <span class="fl">3</span>, sfl <span class="op">=</span> <span class="va">sfPower</span>, sflpar <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print the design</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Asymmetric two-sided group sequential design with</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90 % power and 2.5 % Type I Error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper bound spending computations assume</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trial continues if lower bound is crossed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Sample</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Size    ----Lower bounds----  ----Upper bounds-----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Analysis Ratio*   Z   Nominal p Spend+  Z   Nominal p Spend++</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          1  0.282 -0.52    0.3015 0.0125 3.36    0.0004  0.0004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          2  0.564  0.53    0.7028 0.0229 2.76    0.0029  0.0027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          3  0.846  1.32    0.9072 0.0296 2.36    0.0092  0.0074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          4  1.128  2.03    0.9788 0.0350 2.03    0.0212  0.0145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Total                        0.1000                 0.0250 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + lower bound beta spending (under H1):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Kim-DeMets (power) spending function with rho = 1.5.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ++ alpha spending:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Kim-DeMets (power) spending function with rho = 3.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Sample size ratio compared to fixed design with no interim</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Boundary crossing probabilities and expected sample size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> assume any cross stops the trial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper boundary (power or Type I Error)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Theta      1      2      3      4  Total  E{N}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.0000 0.0004 0.0027 0.0073 0.0116 0.0221 0.579</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.2415 0.0507 0.3248 0.3619 0.1626 0.9000 0.768</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower boundary (futility or Type II Error)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Theta      1      2      3      4  Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.0000 0.3015 0.4138 0.2008 0.0619 0.9779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.2415 0.0125 0.0229 0.0296 0.0350 0.1000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot the alpha- and beta-spending functions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, plottype <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sfDistribution-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># start by showing how to fit two points with sfLogistic</span></span></span>
<span class="r-in"><span><span class="co"># plot the spending function using many points to obtain a smooth curve</span></span></span>
<span class="r-in"><span><span class="co"># note that curve fits the points x=.1,  y=.01 and x=.4,  y=.1</span></span></span>
<span class="r-in"><span><span class="co"># specified in the 3rd parameter of sfLogistic</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span> <span class="op">/</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfLogistic</span><span class="op">(</span><span class="fl">1</span>, <span class="va">t</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.1</span>, <span class="fl">.4</span>, <span class="fl">.01</span>, <span class="fl">.1</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"Proportion of final sample size"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"Cumulative Type I error spending"</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"Logistic Spending Function Examples"</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"l"</span>, cex.main <span class="op">=</span> <span class="fl">.9</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfLogistic</span><span class="op">(</span><span class="fl">1</span>, <span class="va">t</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.01</span>, <span class="fl">.1</span>, <span class="fl">.1</span>, <span class="fl">.4</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now just give a=0 and b=1 as 3rd parameters for sfLogistic</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfLogistic</span><span class="op">(</span><span class="fl">1</span>, <span class="va">t</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># try a couple with unconventional shapes again using</span></span></span>
<span class="r-in"><span><span class="co"># the xy form in the 3rd parameter</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfLogistic</span><span class="op">(</span><span class="fl">1</span>, <span class="va">t</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.4</span>, <span class="fl">.6</span>, <span class="fl">.1</span>, <span class="fl">.7</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfLogistic</span><span class="op">(</span><span class="fl">1</span>, <span class="va">t</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.1</span>, <span class="fl">.7</span>, <span class="fl">.4</span>, <span class="fl">.6</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.0</span>, <span class="fl">.475</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.76</span>, <span class="fl">1.03</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span></span>
<span class="r-in"><span>  legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Fit (.1, 01) and (.4, .1)"</span>, <span class="st">"Fit (.01, .1) and (.1, .4)"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"a=0,  b=1"</span>, <span class="st">"Fit (.4, .1) and (.6, .7)"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Fit (.1, .4) and (.7, .6)"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sfDistribution-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set up a function to plot comparsons of all</span></span></span>
<span class="r-in"><span><span class="co"># 2-parameter spending functions</span></span></span>
<span class="r-in"><span><span class="va">plotsf</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfCauchy</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>,</span></span>
<span class="r-in"><span>    xlab <span class="op">=</span> <span class="st">"Proportion of enrollment"</span>,</span></span>
<span class="r-in"><span>    ylab <span class="op">=</span> <span class="st">"Cumulative spending"</span>, type <span class="op">=</span> <span class="st">"l"</span>, lty <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExtremeValue</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfLogistic</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfNormal</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExtremeValue2</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">6</span>, col <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfBetaDist</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">7</span>, col <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.475</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">.025</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.55</span>, <span class="fl">.9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"Logistic"</span>, <span class="st">"Cauchy"</span>, <span class="st">"Normal"</span>, <span class="st">"Extreme value"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Extreme value 2"</span>, <span class="st">"Beta distribution"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># do comparison for a design with conservative early spending</span></span></span>
<span class="r-in"><span><span class="co"># note that Cauchy spending function is quite different</span></span></span>
<span class="r-in"><span><span class="co"># from the others</span></span></span>
<span class="r-in"><span><span class="va">param</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.5</span>, <span class="fl">.05</span>, <span class="fl">.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotsf</span><span class="op">(</span><span class="fl">.025</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sfDistribution-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

