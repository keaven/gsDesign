<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Truncated, trimmed and gapped spending functions — sfTruncated • gsDesign</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Truncated, trimmed and gapped spending functions — sfTruncated" />
<meta property="og:description" content="The functions sfTruncated() and sfTrimmed apply any other
spending function over a restricted range. This allows eliminating spending
for early interim analyses when you desire not to stop for the bound being
specified; this is usually applied to eliminate early tests for a positive
efficacy finding. The truncation can come late in the trial if you desire to
stop a trial any time after, say, 90 percent of information is available and
an analysis is performed. This allows full Type I error spending if the
final analysis occurs early. Both functions set cumulative spending to 0
below a 'spending interval' in the interval [0,1], and set cumulative
spending to 1 above this range. sfTrimmed() otherwise does not change
an input spending function that is specified; probably the preferred and
more intuitive method in most cases. sfTruncated() resets the time
scale on which the input spending function is computed to the 'spending
interval.'
sfGapped() allows elimination of analyses after some time point in
the trial; see details and examples.
sfTrimmed simply computes the value of the input spending function
and parameters in the sub-range of [0,1], sets spending to 0 below this
range and sets spending to 1 above this range.
sfGapped spends outside of the range provided in trange. Below
trange, the input spending function is used. Above trange, full spending is
used; i.e., the first analysis performed above the interval in trange is the
final analysis. As long as the input spending function is strictly
increasing, this means that the first interim in the interval trange is the
final interim analysis for the bound being specified.
sfTruncated compresses spending into a sub-range of [0,1]. The
parameter param$trange specifies the range over which spending is to
occur. Within this range, spending is spent according to the spending
function specified in param$sf along with the corresponding spending
function parameter(s) in param$param. See example using
sfLinear that spends uniformly over specified range." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gsDesign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.1.0.9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Truncated, trimmed and gapped spending functions</h1>
    
    <div class="hidden name"><code>sfSpecial.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The functions <code>sfTruncated()</code> and <code>sfTrimmed</code> apply any other
spending function over a restricted range. This allows eliminating spending
for early interim analyses when you desire not to stop for the bound being
specified; this is usually applied to eliminate early tests for a positive
efficacy finding. The truncation can come late in the trial if you desire to
stop a trial any time after, say, 90 percent of information is available and
an analysis is performed. This allows full Type I error spending if the
final analysis occurs early. Both functions set cumulative spending to 0
below a 'spending interval' in the interval [0,1], and set cumulative
spending to 1 above this range. <code>sfTrimmed()</code> otherwise does not change
an input spending function that is specified; probably the preferred and
more intuitive method in most cases. <code>sfTruncated()</code> resets the time
scale on which the input spending function is computed to the 'spending
interval.'</p>
<p><code>sfGapped()</code> allows elimination of analyses after some time point in
the trial; see details and examples.</p>
<p><code>sfTrimmed</code> simply computes the value of the input spending function
and parameters in the sub-range of [0,1], sets spending to 0 below this
range and sets spending to 1 above this range.</p>
<p><code>sfGapped</code> spends outside of the range provided in trange. Below
trange, the input spending function is used. Above trange, full spending is
used; i.e., the first analysis performed above the interval in trange is the
final analysis. As long as the input spending function is strictly
increasing, this means that the first interim in the interval trange is the
final interim analysis for the bound being specified.</p>
<p><code>sfTruncated</code> compresses spending into a sub-range of [0,1]. The
parameter <code>param$trange</code> specifies the range over which spending is to
occur. Within this range, spending is spent according to the spending
function specified in <code>param$sf</code> along with the corresponding spending
function parameter(s) in <code>param$param</code>. See example using
<code>sfLinear</code> that spends uniformly over specified range.</p>
    </div>

    <pre class="usage"><span class='fu'>sfTruncated</span>(<span class='no'>alpha</span>, <span class='no'>t</span>, <span class='no'>param</span>)

<span class='fu'>sfTrimmed</span>(<span class='no'>alpha</span>, <span class='no'>t</span>, <span class='no'>param</span>)

<span class='fu'>sfGapped</span>(<span class='no'>alpha</span>, <span class='no'>t</span>, <span class='no'>param</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>alpha</th>
      <td><p>Real value \(&gt; 0\) and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size or information.</p></td>
    </tr>
    <tr>
      <th>t</th>
      <td><p>A vector of points with increasing values from 0 to 1, inclusive.
Values of the proportion of sample size or information for which the
spending function will be computed.</p></td>
    </tr>
    <tr>
      <th>param</th>
      <td><p>a list containing the elements sf (a spendfn object such as
sfHSD), trange (the range over which the spending function increases from 0
to 1; 0 &lt;= trange[1]&lt;trange[2] &lt;=1; for sfGapped, trange[1] must be &gt; 0),
and param (null for a spending function with no parameters or a scalar or
vector of parameters needed to fully specify the spending function in sf).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of type <code>spendfn</code>. See <code><a href='Spending_Function_Overview.html'>Spending_Function_Overview</a></code> 
for further details.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The manual is not linked to this help file, but is available in
library/gsdesign/doc/gsDesignManual.pdf in the directory where R is
installed.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='Spending_Function_Overview.html'>Spending_Function_Overview</a>, <code><a href='gsDesign.html'>gsDesign</a></code>,
<a href='gsDesign-package-overview.html'>gsDesign package overview</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

<span class='co'># Eliminate efficacy spending forany interim at or before 20 percent of information.</span>
<span class='co'># Complete spending at first interim at or after 80 percent of information.</span>
<span class='no'>tx</span> <span class='kw'>&lt;-</span> (<span class='fl'>0</span>:<span class='fl'>100</span>) / <span class='fl'>100</span>
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='sfHSD.html'>sfHSD</a></span>(<span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.05</span>, <span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>spend</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>Spending</span> <span class='kw'>=</span> <span class='no'>s</span>, <span class='kw'>sf</span> <span class='kw'>=</span> <span class='st'>"Original spending"</span>)
<span class='no'>param</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>trange</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>.2</span>, <span class='fl'>.8</span>), <span class='kw'>sf</span> <span class='kw'>=</span> <span class='no'>sfHSD</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'>sfTruncated</span>(<span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.05</span>, <span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='no'>param</span>)$<span class='no'>spend</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span>(<span class='no'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>Spending</span> <span class='kw'>=</span> <span class='no'>s</span>, <span class='kw'>sf</span> <span class='kw'>=</span> <span class='st'>"Truncated"</span>))
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'>sfTrimmed</span>(<span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.05</span>, <span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='no'>param</span>)$<span class='no'>spend</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span>(<span class='no'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>Spending</span> <span class='kw'>=</span> <span class='no'>s</span>, <span class='kw'>sf</span> <span class='kw'>=</span> <span class='st'>"Trimmed"</span>))
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'>sfGapped</span>(<span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.05</span>, <span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='no'>param</span>)$<span class='no'>spend</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span>(<span class='no'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>tx</span>, <span class='kw'>Spending</span> <span class='kw'>=</span> <span class='no'>s</span>, <span class='kw'>sf</span> <span class='kw'>=</span> <span class='st'>"Gapped"</span>))
<span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>x</span>, <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>t</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>Spending</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='no'>sf</span>)) +
<span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span>()</div><div class='img'><img src='sfSpecial-1.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='co'># now apply the sfTrimmed version in gsDesign</span>
<span class='co'># initially, eliminate the early efficacy analysis</span>
<span class='co'># note: final spend must occur at &gt; next to last interim</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>n.fix</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfTrimmed</span>,
  <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>sf</span> <span class='kw'>=</span> <span class='no'>sfHSD</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>trange</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>.3</span>, <span class='fl'>.9</span>))
)

<span class='co'># first upper bound=20 means no testing there</span>
<span class='fu'><a href='gsBoundSummary.html'>gsBoundSummary</a></span>(<span class='no'>x</span>)</div><div class='output co'>#&gt;   Analysis               Value Efficacy Futility
#&gt;  IA 1: 25%                   Z  20.0000  -0.5316
#&gt;      N: 31         p (1-sided)   0.0000   0.7025
#&gt;                ~delta at bound  11.1795  -0.2972
#&gt;            P(Cross) if delta=0   0.0000   0.2975
#&gt;            P(Cross) if delta=1   0.0000   0.0102
#&gt;  IA 2: 50%                   Z   2.1555   0.4956
#&gt;      N: 61         p (1-sided)   0.0156   0.3101
#&gt;                ~delta at bound   0.8520   0.1959
#&gt;            P(Cross) if delta=0   0.0155   0.7033
#&gt;            P(Cross) if delta=1   0.6458   0.0269
#&gt;  IA 3: 75%                   Z   2.3061   1.3812
#&gt;      N: 92         p (1-sided)   0.0106   0.0836
#&gt;                ~delta at bound   0.7442   0.4457
#&gt;            P(Cross) if delta=0   0.0208   0.9208
#&gt;            P(Cross) if delta=1   0.8136   0.0545
#&gt;      Final                   Z   2.3352   2.3352
#&gt;     N: 122         p (1-sided)   0.0098   0.0098
#&gt;                ~delta at bound   0.6527   0.6527
#&gt;            P(Cross) if delta=0   0.0242   0.9758
#&gt;            P(Cross) if delta=1   0.9000   0.1000</div><div class='input'>
<span class='co'># now, do not eliminate early efficacy analysis</span>
<span class='no'>param</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>sf</span> <span class='kw'>=</span> <span class='no'>sfHSD</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>trange</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>.9</span>))
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(<span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>n.fix</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfTrimmed</span>, <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='no'>param</span>)

<span class='co'># The above means if final analysis is done a little early, all spending can occur</span>
<span class='co'># Suppose we set calendar date for final analysis based on</span>
<span class='co'># estimated full information, but come up with only 97 pct of plan</span>
<span class='no'>xA</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>k</span>, <span class='kw'>n.fix</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>n.I</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>x</span>$<span class='no'>n.I</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>.97</span> * <span class='no'>x</span>$<span class='no'>n.I</span>[<span class='fl'>4</span>]),
  <span class='kw'>test.type</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>test.type</span>,
  <span class='kw'>maxn.IPlan</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>n.I</span>[<span class='no'>x</span>$<span class='no'>k</span>],
  <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfTrimmed</span>, <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='no'>param</span>
)
<span class='co'># now accelerate without the trimmed spending function</span>
<span class='no'>xNT</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>k</span>, <span class='kw'>n.fix</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>n.I</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>x</span>$<span class='no'>n.I</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>.97</span> * <span class='no'>x</span>$<span class='no'>n.I</span>[<span class='fl'>4</span>]),
  <span class='kw'>test.type</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>test.type</span>,
  <span class='kw'>maxn.IPlan</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>n.I</span>[<span class='no'>x</span>$<span class='no'>k</span>],
  <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfHSD</span>, <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='fl'>1</span>
)
<span class='co'># Check last bound if analysis done at early time</span>
<span class='no'>x</span>$<span class='no'>upper</span>$<span class='no'>bound</span>[<span class='fl'>4</span>]</div><div class='output co'>#&gt; [1] 2.357469</div><div class='input'><span class='co'># Now look at last bound if done at early time with trimmed spending function</span>
<span class='co'># that allows capture of full alpha</span>
<span class='no'>xA</span>$<span class='no'>upper</span>$<span class='no'>bound</span>[<span class='fl'>4</span>]</div><div class='output co'>#&gt; [1] 2.343624</div><div class='input'><span class='co'># With original spending function, we don't get full alpha and therefore have</span>
<span class='co'># unnecessarily stringent bound at final analysis</span>
<span class='no'>xNT</span>$<span class='no'>upper</span>$<span class='no'>bound</span>[<span class='fl'>4</span>]</div><div class='output co'>#&gt; [1] 2.37218</div><div class='input'>
<span class='co'># note that if the last analysis is LATE, all 3 approaches should give the same</span>
<span class='co'># final bound that has a little larger z-value</span>
<span class='no'>xlate</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>k</span>, <span class='kw'>n.fix</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>n.I</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>x</span>$<span class='no'>n.I</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>1.25</span> * <span class='no'>x</span>$<span class='no'>n.I</span>[<span class='fl'>4</span>]),
  <span class='kw'>test.type</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>test.type</span>,
  <span class='kw'>maxn.IPlan</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>n.I</span>[<span class='no'>x</span>$<span class='no'>k</span>],
  <span class='kw'>sfu</span> <span class='kw'>=</span> <span class='no'>sfHSD</span>, <span class='kw'>sfupar</span> <span class='kw'>=</span> <span class='fl'>1</span>
)
<span class='no'>xlate</span>$<span class='no'>upper</span>$<span class='no'>bound</span>[<span class='fl'>4</span>]</div><div class='output co'>#&gt; [1] 2.435171</div><div class='input'>
<span class='co'># eliminate futility after the first interim analysis</span>
<span class='co'># note that by setting trange[1] to .2, the spend at t=.2 is used for the first</span>
<span class='co'># interim at or after 20 percent of information</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gsDesign.html'>gsDesign</a></span>(<span class='kw'>n.fix</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>sfl</span> <span class='kw'>=</span> <span class='no'>sfGapped</span>, <span class='kw'>sflpar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>trange</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>.2</span>, <span class='fl'>.9</span>), <span class='kw'>sf</span> <span class='kw'>=</span> <span class='no'>sfHSD</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='fl'>1</span>))</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


