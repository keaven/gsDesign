<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Advanced time-to-event sample size calculation — tEventsIA • gsDesign</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Advanced time-to-event sample size calculation — tEventsIA"><meta name="description" content="nSurv() is used to calculate the sample size for a two-arm clinical trial
with a time-to-event endpoint under the assumption of proportional hazards.
The default method assumes a fixed enrollment duration and fixed trial duration;
in this case the required sample size is achieved by increasing enrollment rates.
nSurv() implements the Lachin and Foulkes (1986) method as default.
Schoenfeld (1981), Freedman (1982), and Bernstein and Lagakos (1989) methods
are also supported; see Details.
gsSurv() combines nSurv() with gsDesign() to derive a
group sequential design for a study with a time-to-event endpoint."><meta property="og:description" content="nSurv() is used to calculate the sample size for a two-arm clinical trial
with a time-to-event endpoint under the assumption of proportional hazards.
The default method assumes a fixed enrollment duration and fixed trial duration;
in this case the required sample size is achieved by increasing enrollment rates.
nSurv() implements the Lachin and Foulkes (1986) method as default.
Schoenfeld (1981), Freedman (1982), and Bernstein and Lagakos (1989) methods
are also supported; see Details.
gsSurv() combines nSurv() with gsDesign() to derive a
group sequential design for a study with a time-to-event endpoint."><meta property="og:image" content="https://keaven.github.io/gsDesign/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.10.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Advanced time-to-event sample size calculation</h1>
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/master/R/gsSurv-interim.R" class="external-link"><code>R/gsSurv-interim.R</code></a>, <a href="https://github.com/keaven/gsDesign/blob/master/R/gsSurv-nSurv.R" class="external-link"><code>R/gsSurv-nSurv.R</code></a>, <a href="https://github.com/keaven/gsDesign/blob/master/R/gsSurv-xtable.R" class="external-link"><code>R/gsSurv-xtable.R</code></a>, and 1 more</small>
      <div class="d-none name"><code>nSurv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>nSurv()</code> is used to calculate the sample size for a two-arm clinical trial
with a time-to-event endpoint under the assumption of proportional hazards.
The default method assumes a fixed enrollment duration and fixed trial duration;
in this case the required sample size is achieved by increasing enrollment rates.
<code>nSurv()</code> implements the <code>Lachin and Foulkes (1986)</code> method as default.
Schoenfeld (1981), Freedman (1982), and Bernstein and Lagakos (1989) methods
are also supported; see Details.
<code>gsSurv()</code> combines <code>nSurv()</code> with <code><a href="gsDesign.html">gsDesign()</a></code> to derive a
group sequential design for a study with a time-to-event endpoint.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tEventsIA</span><span class="op">(</span><span class="va">x</span>, timing <span class="op">=</span> <span class="fl">0.25</span>, tol <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">^</span><span class="fl">0.25</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">nEventsIA</span><span class="op">(</span>tIA <span class="op">=</span> <span class="fl">5</span>, x <span class="op">=</span> <span class="cn">NULL</span>, target <span class="op">=</span> <span class="fl">0</span>, simple <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">nSurv</span><span class="op">(</span></span>
<span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fl">6</span>,</span>
<span>  hr <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>  hr0 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  eta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  etaE <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gamma <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  S <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  T <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  minfup <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  tol <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">^</span><span class="fl">0.25</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LachinFoulkes"</span>, <span class="st">"Schoenfeld"</span>, <span class="st">"Freedman"</span>, <span class="st">"BernsteinLagakos"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'nSurv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">3</span>, show_strata <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'gsSurv'</span></span>
<span><span class="fu"><a href="xtable.html">xtable</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  caption <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  align <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  digits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  display <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  auto <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  footnote <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fnwid <span class="op">=</span> <span class="st">"9cm"</span>,</span>
<span>  timename <span class="op">=</span> <span class="st">"months"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gsSurv</span><span class="op">(</span></span>
<span>  k <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  test.type <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>  sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  astar <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  timing <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">sfHSD</span>,</span>
<span>  sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">sfHSD</span>,</span>
<span>  sflpar <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span>  sfharm <span class="op">=</span> <span class="va">sfHSD</span>,</span>
<span>  sfharmparam <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fl">6</span>,</span>
<span>  hr <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>  hr0 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  eta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  etaE <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gamma <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  S <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  T <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  minfup <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  tol <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">^</span><span class="fl">0.25</span>,</span>
<span>  usTime <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lsTime <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LachinFoulkes"</span>, <span class="st">"Schoenfeld"</span>, <span class="st">"Freedman"</span>, <span class="st">"BernsteinLagakos"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'gsSurv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">3</span>, show_gsDesign <span class="op">=</span> <span class="cn">FALSE</span>, show_strata <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code>nSurv</code> or <code>gsSurv</code>.
<code>print.nSurv()</code> is used for an object of class <code>nSurv</code> which will
generally be output from <code>nSurv()</code>. For <code>print.gsSurv()</code> is used
for an object of class <code>gsSurv</code> which will generally be output from
<code>gsSurv()</code>. <code>nEventsIA</code> and <code>tEventsIA</code> operate on both the
<code>nSurv</code> and <code>gsSurv</code> class.</p></dd>


<dt id="arg-timing">timing<a class="anchor" aria-label="anchor" href="#arg-timing"></a></dt>
<dd><p>Sets relative timing of interim analyses in <code>gsSurv</code>.
Default of 1 produces equally spaced analyses.  Otherwise, this is a vector
of length <code>k</code> or <code>k-1</code>.  The values should satisfy <code>0 &lt;
timing[1] &lt; timing[2] &lt; ... &lt; timing[k-1] &lt; timing[k]=1</code>. For
<code>tEventsIA</code>, this is a scalar strictly between 0 and 1 that indicates
the targeted proportion of final planned events available at an interim
analysis.</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>For cases when <code>T</code> or <code>minfup</code> values are derived
through root finding (<code>T</code> or <code>minfup</code> input as <code>NULL</code>),
<code>tol</code> provides the level of error input to the <code><a href="https://rdrr.io/r/stats/uniroot.html" class="external-link">uniroot()</a></code>
root-finding function. The default is the same as for <code><a href="https://rdrr.io/r/stats/uniroot.html" class="external-link">uniroot</a></code>.</p></dd>


<dt id="arg-tia">tIA<a class="anchor" aria-label="anchor" href="#arg-tia"></a></dt>
<dd><p>Timing of an interim analysis; should be between 0 and
<code>y$T</code>.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>The targeted proportion of events at an interim analysis. This
is used for root-finding will be 0 for normal use.</p></dd>


<dt id="arg-simple">simple<a class="anchor" aria-label="anchor" href="#arg-simple"></a></dt>
<dd><p>See output specification for <code>nEventsIA()</code>.</p></dd>


<dt id="arg-lambdac">lambdaC<a class="anchor" aria-label="anchor" href="#arg-lambdac"></a></dt>
<dd><p>Scalar, vector or matrix of event hazard rates for the
control group; rows represent time periods while columns represent strata; a
vector implies a single stratum.
Note that rates corresponding the final time period are extended indefinitely.</p></dd>


<dt id="arg-hr">hr<a class="anchor" aria-label="anchor" href="#arg-hr"></a></dt>
<dd><p>Hazard ratio (experimental/control) under the alternate hypothesis
(scalar, &gt; 0, must differ from <code>hr0</code>). Both <code>hr &lt; hr0</code>
(experimental is beneficial when lower hazard is better) and <code>hr &gt; hr0</code>
(e.g., time-to-response or safety designs) are supported.</p></dd>


<dt id="arg-hr-">hr0<a class="anchor" aria-label="anchor" href="#arg-hr-"></a></dt>
<dd><p>Hazard ratio (experimental/control) under the null hypothesis
(scalar, &gt; 0, must differ from <code>hr</code>).</p></dd>


<dt id="arg-eta">eta<a class="anchor" aria-label="anchor" href="#arg-eta"></a></dt>
<dd><p>Scalar, vector or matrix of dropout hazard rates for the control
group; rows represent time periods while columns represent strata; if
entered as a scalar, rate is constant across strata and time periods; if
entered as a vector, rates are constant across strata.</p></dd>


<dt id="arg-etae">etaE<a class="anchor" aria-label="anchor" href="#arg-etae"></a></dt>
<dd><p>Matrix dropout hazard rates for the experimental group specified
in like form as <code>eta</code>; if <code>NULL</code>, this is set equal to <code>eta</code>.</p></dd>


<dt id="arg-gamma">gamma<a class="anchor" aria-label="anchor" href="#arg-gamma"></a></dt>
<dd><p>A scalar, vector or matrix of rates of entry by time period
(rows) and strata (columns); if entered as a scalar, rate is constant
across strata and time periods; if entered as a vector, rates are constant
across strata.</p></dd>


<dt id="arg-r">R<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>A scalar or vector of durations of time periods for recruitment
rates specified in rows of <code>gamma</code>. Length is the same as number of
rows in <code>gamma</code>. Note that when variable enrollment duration is
specified (input <code>T=NULL</code>), the final enrollment period is extended as
long as needed; otherwise enrollment after <code>sum(R)</code> is 0.</p></dd>


<dt id="arg-s">S<a class="anchor" aria-label="anchor" href="#arg-s"></a></dt>
<dd><p>A scalar or vector of durations of piecewise constant event rates
specified in rows of <code>lambda</code>, <code>eta</code> and <code>etaE</code>; this is <code>NULL</code>
if there is a single event rate per stratum (exponential failure) or length
of the number of rows in <code>lambda</code> minus 1, otherwise.
The final time period is extended indefinitely for each stratum.</p></dd>


<dt id="arg-t">T<a class="anchor" aria-label="anchor" href="#arg-t"></a></dt>
<dd><p>Study duration; if <code>T</code> is input as <code>NULL</code>, this will be
computed on output; see details.</p></dd>


<dt id="arg-minfup">minfup<a class="anchor" aria-label="anchor" href="#arg-minfup"></a></dt>
<dd><p>Follow-up of last patient enrolled; if <code>minfup</code> is input
as <code>NULL</code>, this will be computed on output; see details.</p></dd>


<dt id="arg-ratio">ratio<a class="anchor" aria-label="anchor" href="#arg-ratio"></a></dt>
<dd><p>Randomization ratio of experimental treatment divided by
control; normally a scalar, but may be a vector with length equal to number
of strata.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Type I error rate. Default is 0.025 since 1-sided testing is
default.</p></dd>


<dt id="arg-beta">beta<a class="anchor" aria-label="anchor" href="#arg-beta"></a></dt>
<dd><p>Type II error rate. Default is 0.10 (90% power); <code>NULL</code> if power
is to be computed based on other input values.</p></dd>


<dt id="arg-sided">sided<a class="anchor" aria-label="anchor" href="#arg-sided"></a></dt>
<dd><p><code>1</code> for 1-sided testing, <code>2</code> for 2-sided testing.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>One of <code>"LachinFoulkes"</code> (default), <code>"Schoenfeld"</code>,
<code>"Freedman"</code>, or <code>"BernsteinLagakos"</code>.
Note: <code>"Schoenfeld"</code> and <code>"Freedman"</code> methods only support
superiority testing (<code>hr0 = 1</code>). <code>"Freedman"</code> does not support
stratified populations.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>Number of digits past the decimal place to print
(<code>print.gsSurv.</code>); also a pass through to generic <code><a href="xtable.html">xtable()</a></code> from
<code>xtable.gsSurv()</code>.</p></dd>


<dt id="arg-show-strata">show_strata<a class="anchor" aria-label="anchor" href="#arg-show-strata"></a></dt>
<dd><p>Logical; for <code>print.gsSurv()</code>, include strata summaries.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments that may be passed to generic functions
underlying the methods here.</p></dd>


<dt id="arg-caption">caption<a class="anchor" aria-label="anchor" href="#arg-caption"></a></dt>
<dd><p>Passed through to generic <code><a href="xtable.html">xtable()</a></code>.</p></dd>


<dt id="arg-label">label<a class="anchor" aria-label="anchor" href="#arg-label"></a></dt>
<dd><p>Passed through to generic <code><a href="xtable.html">xtable()</a></code>.</p></dd>


<dt id="arg-align">align<a class="anchor" aria-label="anchor" href="#arg-align"></a></dt>
<dd><p>Passed through to generic <code><a href="xtable.html">xtable()</a></code>.</p></dd>


<dt id="arg-display">display<a class="anchor" aria-label="anchor" href="#arg-display"></a></dt>
<dd><p>Passed through to generic <code><a href="xtable.html">xtable()</a></code>.</p></dd>


<dt id="arg-auto">auto<a class="anchor" aria-label="anchor" href="#arg-auto"></a></dt>
<dd><p>Passed through to generic <code><a href="xtable.html">xtable()</a></code>.</p></dd>


<dt id="arg-footnote">footnote<a class="anchor" aria-label="anchor" href="#arg-footnote"></a></dt>
<dd><p>Footnote for xtable output; may be useful for describing
some of the design parameters.</p></dd>


<dt id="arg-fnwid">fnwid<a class="anchor" aria-label="anchor" href="#arg-fnwid"></a></dt>
<dd><p>A text string controlling the width of footnote text at the
bottom of the xtable output.</p></dd>


<dt id="arg-timename">timename<a class="anchor" aria-label="anchor" href="#arg-timename"></a></dt>
<dd><p>Character string with plural of time units (e.g., "months")</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>Number of analyses planned, including interim and final.</p></dd>


<dt id="arg-test-type">test.type<a class="anchor" aria-label="anchor" href="#arg-test-type"></a></dt>
<dd><p><code>1=</code>one-sided <br><code>2=</code>two-sided symmetric <br><code>3=</code>two-sided, asymmetric, beta-spending with binding lower bound <br><code>4=</code>two-sided, asymmetric, beta-spending with non-binding lower bound
<br><code>5=</code>two-sided, asymmetric, lower bound spending under the null
hypothesis with binding lower bound <br><code>6=</code>two-sided, asymmetric,
lower bound spending under the null hypothesis with non-binding lower bound
<br><code>7=</code>two-sided, asymmetric, with binding futility and binding harm bounds
<br><code>8=</code>two-sided, asymmetric, with non-binding futility and non-binding harm bounds.
<br> See details, examples and manual.</p></dd>


<dt id="arg-astar">astar<a class="anchor" aria-label="anchor" href="#arg-astar"></a></dt>
<dd><p>Total spending for the lower (test.type 5 or 6) or harm
(test.type 7 or 8) bound under the null hypothesis. Default is 0.
For <code>test.type</code> 5 or 6, <code>astar</code> specifies the total probability
of crossing a lower bound at all analyses combined.
For <code>test.type</code> 7 or 8, <code>astar</code> specifies the total probability
of crossing the harm bound at all analyses combined under the null hypothesis.
If <code>astar = 0</code>, it will be changed to \(1 - \)<code>alpha</code>.</p></dd>


<dt id="arg-sfu">sfu<a class="anchor" aria-label="anchor" href="#arg-sfu"></a></dt>
<dd><p>A spending function or a character string indicating a boundary
type (that is, “WT” for Wang-Tsiatis bounds, “OF” for
O'Brien-Fleming bounds and “Pocock” for Pocock bounds).  For
one-sided and symmetric two-sided testing is used to completely specify
spending (<code>test.type=1, 2</code>), <code>sfu</code>.  The default value is
<code>sfHSD</code> which is a Hwang-Shih-DeCani spending function.  See details,
<code><a href="../articles/SpendingFunctionOverview.html">vignette("SpendingFunctionOverview")</a></code>, manual and examples.</p></dd>


<dt id="arg-sfupar">sfupar<a class="anchor" aria-label="anchor" href="#arg-sfupar"></a></dt>
<dd><p>Real value, default is \(-4\) which is an
O'Brien-Fleming-like conservative bound when used with the default
Hwang-Shih-DeCani spending function. This is a real-vector for many spending
functions.  The parameter <code>sfupar</code> specifies any parameters needed for
the spending function specified by <code>sfu</code>; this is not needed for
spending functions (<code>sfLDOF</code>, <code>sfLDPocock</code>) or bound types
(“OF”, “Pocock”) that do not require parameters.
Note that <code>sfupar</code> can be specified as a positive scalar for
<code>sfLDOF</code> for a generalized O'Brien-Fleming spending function.</p></dd>


<dt id="arg-sfl">sfl<a class="anchor" aria-label="anchor" href="#arg-sfl"></a></dt>
<dd><p>Specifies the spending function for lower boundary crossing
probabilities when asymmetric, two-sided testing is performed
(<code>test.type = 3</code>, <code>4</code>, <code>5</code>, or <code>6</code>).  Unlike the upper
bound, only spending functions are used to specify the lower bound.  The
default value is <code>sfHSD</code> which is a Hwang-Shih-DeCani spending
function.  The parameter <code>sfl</code> is ignored for one-sided testing
(<code>test.type=1</code>) or symmetric 2-sided testing (<code>test.type=2</code>).  See
details, spending functions, manual and examples.</p></dd>


<dt id="arg-sflpar">sflpar<a class="anchor" aria-label="anchor" href="#arg-sflpar"></a></dt>
<dd><p>Real value, default is \(-2\), which, with the default
Hwang-Shih-DeCani spending function, specifies a less conservative spending
rate than the default for the upper bound.</p></dd>


<dt id="arg-sfharm">sfharm<a class="anchor" aria-label="anchor" href="#arg-sfharm"></a></dt>
<dd><p>A spending function for the harm bound, used with
<code>test.type = 7</code> or <code>test.type = 8</code>.
Default is <code>sfHSD</code>. See <code><a href="spendingFunction.html">spendingFunction</a></code> for details.</p></dd>


<dt id="arg-sfharmparam">sfharmparam<a class="anchor" aria-label="anchor" href="#arg-sfharmparam"></a></dt>
<dd><p>Real value, default is \(-2\). Parameter for the harm
bound spending function <code>sfharm</code>.</p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>Integer value (&gt;= 1 and &lt;= 80) controlling the number of numerical
integration grid points. Default is 18, as recommended by Jennison and
Turnbull (2000). Grid points are spread out in the tails for accurate
probability calculations. Larger values provide more grid points and greater
accuracy but slow down computation. Jennison and Turnbull (p. 350) note an
accuracy of \(10^{-6}\) with <code>r = 16</code>. This parameter is normally
not changed by users.</p></dd>


<dt id="arg-ustime">usTime<a class="anchor" aria-label="anchor" href="#arg-ustime"></a></dt>
<dd><p>Default is NULL in which case upper bound spending time is
determined by <code>timing</code>. Otherwise, this should be a vector of length
<code>k</code> with the spending time at each analysis
(see Details section of <code><a href="gsDesign.html">gsDesign</a></code>).</p></dd>


<dt id="arg-lstime">lsTime<a class="anchor" aria-label="anchor" href="#arg-lstime"></a></dt>
<dd><p>Default is NULL in which case lower bound spending time is
determined by <code>timing</code>. Otherwise, this should be a vector of length
<code>k</code> with the spending time at each analysis
(see Details section of <code><a href="gsDesign.html">gsDesign</a></code>).</p></dd>


<dt id="arg-show-gsdesign">show_gsDesign<a class="anchor" aria-label="anchor" href="#arg-show-gsdesign"></a></dt>
<dd><p>Logical; for <code>print.gsSurv()</code>, include gsDesign details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>nSurv()</code> returns an object of type <code>nSurv</code> with the
  following components:</p>
<dl><dt>alpha</dt>
<dd><p>As input.</p></dd>

  <dt>sided</dt>
<dd><p>As input.</p></dd>

  <dt>beta</dt>
<dd><p>Type II error; if missing, this is computed.</p></dd>

  <dt>power</dt>
<dd><p>Power corresponding to input <code>beta</code> or computed if
  output <code>beta</code> is computed.</p></dd>

  <dt>lambdaC</dt>
<dd><p>As input.</p></dd>

  <dt>etaC</dt>
<dd><p>As input.</p></dd>

  <dt>etaE</dt>
<dd><p>As input.</p></dd>

  <dt>gamma</dt>
<dd><p>As input unless none of the following are <code>NULL</code>:
  <code>T</code>, <code>minfup</code>, <code>beta</code>; otherwise, this is a constant times
  the input value required to power the trial given the other input
  variables.</p></dd>

  <dt>ratio</dt>
<dd><p>As input.</p></dd>

  <dt>R</dt>
<dd><p>As input unless <code>T</code> was <code>NULL</code> on input.</p></dd>

  <dt>S</dt>
<dd><p>As input.</p></dd>

  <dt>T</dt>
<dd><p>As input.</p></dd>

  <dt>minfup</dt>
<dd><p>As input.</p></dd>

  <dt>hr</dt>
<dd><p>As input.</p></dd>

  <dt>hr0</dt>
<dd><p>As input.</p></dd>

  <dt>n</dt>
<dd><p>Total expected sample size corresponding to output accrual rates
  and durations.</p></dd>

  <dt>d</dt>
<dd><p>Total expected number of events under the alternate
  hypothesis.</p></dd>

  <dt>tol</dt>
<dd><p>As input, except when not used in computations in
  which case this is returned as <code>NULL</code>. This and the remaining output
  below are not printed by the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> extension for the <code>nSurv</code>
  class.</p></dd>

  <dt>eDC</dt>
<dd><p>A vector of expected number of events by stratum in the
  control group under the alternate hypothesis.</p></dd>

  <dt>eDE</dt>
<dd><p>A vector of expected number of events by stratum in the
  experimental group under the alternate hypothesis.</p></dd>

  <dt>eDC0</dt>
<dd><p>A vector of expected number of events by stratum in the
  control group under the null hypothesis.</p></dd>

  <dt>eDE0</dt>
<dd><p>A vector of expected number of events by stratum in the
  experimental group under the null hypothesis.</p></dd>

  <dt>eNC</dt>
<dd><p>A vector of the expected accrual in each stratum in the
  control group.</p></dd>

  <dt>eNE</dt>
<dd><p>A vector of the expected accrual in each stratum in the
  experimental group.</p></dd>

  <dt>variable</dt>
<dd><p>A text string equal to "Accrual rate" if a design was
  derived by varying the accrual rate, "Accrual duration" if a design was
  derived by varying the accrual duration, "Follow-up duration" if a design
  was derived by varying follow-up duration, or "Power" if accrual rates and
  duration as well as follow-up duration was specified and
  <code>beta=NULL</code> was input.</p></dd>


  </dl><p><code>gsSurv()</code> returns much of the above plus an object of class
  <code>gsDesign</code> in a variable named <code>gs</code>; see <code><a href="gsDesign.html">gsDesign</a></code>
  for general documentation on what is returned in <code>gs</code>.  The value of
  <code>gs$n.I</code> represents the number of endpoints required at each analysis
  to adequately power the trial. Other items returned by <code>gsSurv()</code> are:</p>
<dl><dt>gs</dt>
<dd><p>A group sequential design (<code>gsDesign</code>) object.</p></dd>

  <dt>lambdaC</dt>
<dd><p>As input.</p></dd>

  <dt>etaC</dt>
<dd><p>As input.</p></dd>

  <dt>etaE</dt>
<dd><p>As input.</p></dd>

  <dt>gamma</dt>
<dd><p>As input unless none of the following are <code>NULL</code>:
  <code>T</code>, <code>minfup</code>, <code>beta</code>; otherwise, this is a constant times
  the input value required to power the trial given the other input
  variables.</p></dd>

  <dt>ratio</dt>
<dd><p>As input.</p></dd>

  <dt>R</dt>
<dd><p>As input unless <code>T</code> was <code>NULL</code> on input.</p></dd>

  <dt>S</dt>
<dd><p>As input.</p></dd>

  <dt>T</dt>
<dd><p>As input.</p></dd>

  <dt>minfup</dt>
<dd><p>As input.</p></dd>

  <dt>hr</dt>
<dd><p>As input.</p></dd>

  <dt>hr0</dt>
<dd><p>As input.</p></dd>

  <dt>eNC</dt>
<dd><p>Total expected sample size corresponding to output accrual rates
  and durations.</p></dd>

  <dt>eNE</dt>
<dd><p>Total expected sample size corresponding to output accrual rates
  and durations.</p></dd>

  <dt>eDC</dt>
<dd><p>Total expected number of events under the alternate hypothesis.</p></dd>

  <dt>eDE</dt>
<dd><p>Total expected number of events under the alternate hypothesis.</p></dd>

  <dt>tol</dt>
<dd><p>As input, except when not used in computations in which case
  this is returned as <code>NULL</code>. This and the remaining output below are
  not printed by the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> extension for the <code>nSurv</code> class.</p></dd>

  <dt>eDC</dt>
<dd><p>A vector of expected number of events by stratum in the
  control group under the alternate hypothesis.</p></dd>

  <dt>eDE</dt>
<dd><p>A vector of expected number of events by stratum in the
  experimental group under the alternate hypothesis.</p></dd>

  <dt>eDC0</dt>
<dd><p>A vector of expected number of events by stratum in the
  control group under the null hypothesis.</p></dd>

  <dt>eDE0</dt>
<dd><p>A vector of expected number of events by stratum in the
  experimental group under the null hypothesis.</p></dd>

  <dt>eNC</dt>
<dd><p>A vector of the expected accrual in each stratum in the
  control group.</p></dd>

  <dt>eNE</dt>
<dd><p>A vector of the expected accrual in each stratum in the
  experimental group.</p></dd>

  <dt>variable</dt>
<dd><p>A text string equal to "Accrual rate" if a design was
  derived by varying the accrual rate, "Accrual duration" if a design was
  derived by varying the accrual duration, "Follow-up duration" if a design
  was derived by varying follow-up duration, or "Power" if accrual rates and
  duration as well as follow-up duration was specified and <code>beta=NULL</code>
  was input.</p></dd>


  </dl><p><code>nEventsIA()</code> returns the expected proportion of the final planned
  events observed at the input analysis time minus <code>target</code> when
  <code>simple=TRUE</code>. When <code>simple=FALSE</code>, <code>nEventsIA</code> returns a
  list with following components:</p>
<dl><dt>T</dt>
<dd><p>The input value <code>tIA</code>.</p></dd>

  <dt>eDC</dt>
<dd><p>The expected number of events in the control group at time the
  output time <code>T</code>.</p></dd>

  <dt>eDE</dt>
<dd><p>The expected number of events in the experimental group at the
  output time <code>T</code>.</p></dd>

  <dt>eNC</dt>
<dd><p>The expected enrollment in the control group at the
  output time <code>T</code>.</p></dd>

  <dt>eNE</dt>
<dd><p>The expected enrollment in the experimental group at the
  output time <code>T</code>.</p></dd>


  </dl><p><code>tEventsIA()</code> returns the same structure as <code>nEventsIA(..., simple=TRUE)</code> when</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The Lachin and Foulkes method uses both null and alternate hypothesis
variances to derive sample size and is extended here to support
non-inferiority, super-superiority, and stratified designs.
As an alternative, the Kim and Tsiatis (1990) method can be used with fixed
enrollment rates and either fixed enrollment duration or fixed minimum
follow-up.
The Schoenfeld approach uses the asymptotic distribution of the log-rank
statistic under the assumption of proportional hazards and local alternatives
(i.e., \(\log(HR)\) is small). The Freedman approach uses the same
asymptotic distribution and, like the Schoenfeld approach, uses just the
null hypothesis variance to derive sample size.
The Bernstein and Lagakos (1989) approach was derived to compute sample size
for a stratified model with a common proportional hazards assumption across
strata. Like the Lachin and Foulkes (1986) method, it uses both null and
alternate hypothesis variances to compute sample size; however, the null
hypothesis variance is computed differently. The Bernstein and Lagakos (1989)
approach uses the alternate hypothesis failure rate assumptions for both the
control and experimental groups, while the Lachin and Foulkes method uses
null hypothesis rates that average the alternate hypothesis failure rates to
get similar numbers of expected events under the null and alternate
hypotheses. Since the Lachin and Foulkes method has fewer events under the
null hypothesis (less statistical information), it calculates less power
than the Bernstein and Lagakos method.
Piecewise exponential survival is supported as well as piecewise constant
enrollment and dropout rates. The methods are for a 2-arm trial with
treatment groups referred to as experimental and control. A stratified
population is allowed as in Lachin and Foulkes (1986); this method has been
extended to derive non-inferiority as well as superiority trials.
Stratification also allows power calculation for meta-analyses.</p>
<p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code><a href="xtable.html">xtable()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> methods are provided to
operate on the returned value from <code>gsSurv()</code>, an object of class
<code>gsSurv</code>. <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> is also extended to <code>nSurv</code> objects. The
functions <code><a href="gsBoundSummary.html">gsBoundSummary</a></code> (data frame for tabular output),
<code><a href="gsBoundSummary.html">xprint</a></code> (application of <code>xtable</code> for tabular output) and
<code>summary.gsSurv</code> (textual summary of <code>gsDesign</code> or <code>gsSurv</code>
object) may be preferred summary functions; see example in vignettes. See
also <a href="gsBoundSummary.html">gsBoundSummary</a> for output
of tabular summaries of bounds for designs produced by <code>gsSurv()</code>.</p>
<p>Both <code>nEventsIA</code> and <code>tEventsIA</code> require a group sequential design
for a time-to-event endpoint of class <code>gsSurv</code> as input.
<code>nEventsIA</code> calculates the expected number of events under the
alternate hypothesis at a given interim time. <code>tEventsIA</code> calculates
the time that the expected number of events under the alternate hypothesis
is a given proportion of the total events planned for the final analysis.</p>
<p><code>nSurv()</code> produces an object of class <code>nSurv</code> with the number of
subjects and events for a set of pre-specified trial parameters, such as
accrual duration and follow-up period. The underlying power calculation is
based on Lachin and Foulkes (1986) method for proportional hazards assuming
a fixed underlying hazard ratio between 2 treatment groups. The method has
been extended here to enable designs to test non-inferiority. Piecewise
constant enrollment and failure rates are assumed and a stratified
population is allowed. See also <code><a href="nSurvival.html">nSurvival</a></code> for other Lachin and
Foulkes (1986) methods assuming a constant hazard difference or exponential
enrollment rate.</p>
<p>When study duration (<code>T</code>) and follow-up duration (<code>minfup</code>) are
fixed, <code>nSurv</code> applies exactly the Lachin and Foulkes (1986) method of
computing sample size under the proportional hazards assumption when For
this computation, enrollment rates are altered proportionately to those
input in <code>gamma</code> to achieve the power of interest.</p>
<p>Given the specified enrollment rate(s) input in <code>gamma</code>, <code>nSurv</code>
may also be used to derive enrollment duration required for a trial to have
defined power if <code>T</code> is input as <code>NULL</code>; in this case, both
<code>R</code> (enrollment duration for each specified enrollment rate) and
<code>T</code> (study duration) will be computed on output.</p>
<p>Alternatively and also using the fixed enrollment rate(s) in <code>gamma</code>,
if minimum follow-up <code>minfup</code> is specified as <code>NULL</code>, then the
enrollment duration(s) specified in <code>R</code> are considered fixed and
<code>minfup</code> and <code>T</code> are computed to derive the desired power. This
method will fail if the specified enrollment rates and durations either
over-powers the trial with no additional follow-up or underpowers the trial
with infinite follow-up. This method produces a corresponding error message
in such cases.</p>
<p>The input to <code>gsSurv</code> is a combination of the input to <code>nSurv()</code>
and <code><a href="gsDesign.html">gsDesign()</a></code>.</p>
<p><code>nEventsIA()</code> is provided to compute the expected number of events at a
given point in time given enrollment, event and censoring rates. The routine
is used with a root finding routine to approximate the approximate timing of
an interim analysis. It is also used to extend enrollment or follow-up of a
fixed design to obtain a sufficient number of events to power a group
sequential design.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kim KM and Tsiatis AA (1990), Study duration for clinical trials
with survival response and early stopping rule. <em>Biometrics</em>, 46, 81-92</p>
<p>Lachin JM and Foulkes MA (1986), Evaluation of Sample Size and Power for
Analyses of Survival with Allowance for Nonuniform Patient Entry, Losses to
Follow-Up, Noncompliance, and Stratification. <em>Biometrics</em>, 42,
507-519.</p>
<p>Schoenfeld D (1981), The Asymptotic Properties of Nonparametric Tests for
Comparing Survival Distributions. <em>Biometrika</em>, 68, 316-319.</p>
<p>Freedman LS (1982), Tables of the Number of Patients Required in Clinical
Trials Using the Logrank Test. <em>Statistics in Medicine</em>, 1, 121-129.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/uniroot.html" class="external-link">uniroot</a></code></p>
<p><code><a href="gsBoundSummary.html">gsBoundSummary</a></code>, <code><a href="gsBoundSummary.html">xprint</a></code>,
  <code><a href="gsSurvCalendar.html">gsSurvCalendar</a></code>, <a href="gsDesign-package.html">gsDesign-package</a>,
  <a href="plot.gsDesign.html">plot.gsDesign</a>, <code><a href="gsDesign.html">gsDesign</a></code>, <code><a href="gsBoundSummary.html">gsHR</a></code>,
  <code><a href="nSurvival.html">nSurvival</a></code></p>
<p><code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">Normal</a></code>
 <code><a href="https://rdrr.io/pkg/xtable/man/xtable.html" class="external-link">xtable</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Vary accrual rate gamma to obtain power</span></span></span>
<span class="r-in"><span><span class="co"># T, minfup and R all specified, although R will be adjusted on output</span></span></span>
<span class="r-in"><span><span class="co"># gamma as input will be multiplied in output to achieve desired power</span></span></span>
<span class="r-in"><span><span class="co"># Default method is Lachin and Foulkes</span></span></span>
<span class="r-in"><span><span class="va">x_nsurv</span> <span class="op">&lt;-</span> <span class="fu">nSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, R <span class="op">=</span> <span class="fl">10</span>, hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">0.02</span>, beta <span class="op">=</span> <span class="fl">.15</span>, T <span class="op">=</span> <span class="fl">36</span>, minfup <span class="op">=</span> <span class="fl">12</span>, method <span class="op">=</span> <span class="st">"LachinFoulkes"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Demonstrate print method</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x_nsurv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nSurv fixed-design summary (method=LachinFoulkes; target=Accrual rate)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HR=0.500 vs HR0=1.000 | alpha=0.020 (sided=1) | power=85.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=95.7 subjects | D=78.1 events | T=36.0 study duration | accrual=24.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 3.986     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R    24    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S  NULL     S</span>
<span class="r-in"><span><span class="co"># Same assumptions for group sequential design</span></span></span>
<span class="r-in"><span><span class="va">x_gs</span> <span class="op">&lt;-</span> <span class="fu">gsSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  k <span class="op">=</span> <span class="fl">4</span>, sfl <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfPower.html">sfPower</a></span>, sflpar <span class="op">=</span> <span class="fl">.5</span>, lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, hr <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">1</span>, T <span class="op">=</span> <span class="fl">36</span>, minfup <span class="op">=</span> <span class="fl">12</span>, method <span class="op">=</span> <span class="st">"LachinFoulkes"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x_gs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Group sequential design (method=LachinFoulkes; k=4 analyses; Two-sided asymmetric with non-binding futility)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=140.7 subjects | D=114.8 events | T=36.0 study duration | accrual=24.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spending functions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Efficacy bounds derived using a Hwang-Shih-DeCani spending function with gamma = -4.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Futility bounds derived using a Kim-DeMets (power) spending function with rho = 0.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis summary:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method: LachinFoulkes </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 25%                  Z   3.1554   0.2264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        N: 76        p (1-sided)   0.0008   0.4105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 29       ~HR at bound   0.3079   0.9190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 13   P(Cross) if HR=1   0.0008   0.5895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.0995   0.0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 50%                  Z   2.8183   0.8619</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 116        p (1-sided)   0.0024   0.1944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 58       ~HR at bound   0.4752   0.7965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 20   P(Cross) if HR=1   0.0030   0.8366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.4388   0.0707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 3: 75%                  Z   2.4390   1.4589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 142        p (1-sided)   0.0074   0.0723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 87       ~HR at bound   0.5912   0.7302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 26   P(Cross) if HR=1   0.0085   0.9445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.7776   0.0866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   2.0136   2.0136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 142        p (1-sided)   0.0220   0.0220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 115       ~HR at bound   0.6867   0.6867</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 36   P(Cross) if HR=1   0.0187   0.9813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.9000   0.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 5.863     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R    24    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S  NULL     S</span>
<span class="r-in"><span><span class="co"># Demonstrate xtable method for gsSurv</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">xtable</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/xtable/man/xtable.html" class="external-link">xtable</a></span><span class="op">(</span><span class="va">x_gs</span>,</span></span>
<span class="r-in"><span>  footnote <span class="op">=</span> <span class="st">"This is a footnote; note that it can be wide."</span>,</span></span>
<span class="r-in"><span>  caption <span class="op">=</span> <span class="st">"Caption example for xtable output."</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> % latex table generated in R 4.5.2 by xtable 1.8-8 package</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> % Sun Mar  1 17:16:16 2026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \begin{table}[ht]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \centering</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \begin{tabular}{rllll}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   \hline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  &amp; Analysis &amp; Value &amp; Futility &amp; Efficacy \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   \hline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 &amp; IA 1: 25$\backslash$\% &amp; Z-value &amp; 0.23 &amp; 3.16 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2 &amp; N: 76 &amp; HR &amp; 0.92 &amp; 0.31 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3 &amp; Events: 29 &amp; p (1-sided) &amp; 0.4105 &amp; 8e-04 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4 &amp; 12.8 months &amp; P$\backslash$\{Cross$\backslash$\} if HR=1 &amp; 0.5895 &amp; 8e-04 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5 &amp;   &amp; P$\backslash$\{Cross$\backslash$\} if HR=0.5 &amp; 0.05 &amp; 0.0995 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6 &amp; $\backslash$hline IA 2: 50$\backslash$\% &amp; Z-value &amp; 0.86 &amp; 2.82 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   7 &amp; N: 116 &amp; HR &amp; 0.8 &amp; 0.48 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   8 &amp; Events: 58 &amp; p (1-sided) &amp; 0.1944 &amp; 0.0024 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   9 &amp; 19.6 months &amp; P$\backslash$\{Cross$\backslash$\} if HR=1 &amp; 0.8366 &amp; 0.003 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   10 &amp;   &amp; P$\backslash$\{Cross$\backslash$\} if HR=0.5 &amp; 0.0707 &amp; 0.4388 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   11 &amp; $\backslash$hline IA 3: 75$\backslash$\% &amp; Z-value &amp; 1.46 &amp; 2.44 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   12 &amp; N: 142 &amp; HR &amp; 0.73 &amp; 0.59 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13 &amp; Events: 87 &amp; p (1-sided) &amp; 0.0723 &amp; 0.0074 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   14 &amp; 25.7 months &amp; P$\backslash$\{Cross$\backslash$\} if HR=1 &amp; 0.9445 &amp; 0.0085 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   15 &amp;   &amp; P$\backslash$\{Cross$\backslash$\} if HR=0.5 &amp; 0.0866 &amp; 0.7776 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   16 &amp; $\backslash$hline Final analysis &amp; Z-value &amp; 2.01 &amp; 2.01 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   17 &amp; N: 142 &amp; HR &amp; 0.69 &amp; 0.69 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   18 &amp; Events: 115 &amp; p (1-sided) &amp; 0.022 &amp; 0.022 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   19 &amp; 36 months &amp; P$\backslash$\{Cross$\backslash$\} if HR=1 &amp; 0.9813 &amp; 0.0187 \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   20 &amp;   &amp; P$\backslash$\{Cross$\backslash$\} if HR=0.5 &amp; 0.1 &amp; 0.9 $\backslash$$\backslash$ $\backslash$hline $\backslash$multicolumn\{4\}\{p\{ 9cm \}\}\{$\backslash$footnotesize This is a footnote; note that it can be wide. \} \\ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    \hline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \end{tabular}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \caption{Caption example for xtable output.} </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \end{table}</span>
<span class="r-in"><span><span class="co"># Demonstrate nEventsIA method</span></span></span>
<span class="r-in"><span><span class="co"># find expected number of events at time 12 in the above trial</span></span></span>
<span class="r-in"><span><span class="fu">nEventsIA</span><span class="op">(</span>x <span class="op">=</span> <span class="va">x_gs</span>, tIA <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 18.92635</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find time at which 1/4 of events are expected</span></span></span>
<span class="r-in"><span><span class="fu">tEventsIA</span><span class="op">(</span>x <span class="op">=</span> <span class="va">x_gs</span>, timing <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 12.76571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eDC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 17.79583</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eDE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10.90882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 37.42481</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $eNE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 37.42481</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adjust accrual duration R to achieve desired power</span></span></span>
<span class="r-in"><span><span class="co"># Trial duration T input as NULL and will be computed based on</span></span></span>
<span class="r-in"><span><span class="co"># accrual duration R and minimum follow-up duration minfup</span></span></span>
<span class="r-in"><span><span class="co"># Minimum follow-up duration minfup is specified</span></span></span>
<span class="r-in"><span><span class="co"># We use the Schoenfeld method to compute accrual duration R</span></span></span>
<span class="r-in"><span><span class="co"># Control median survival time is 6</span></span></span>
<span class="r-in"><span><span class="fu">nSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">.1</span>, minfup <span class="op">=</span> <span class="fl">12</span>, T <span class="op">=</span> <span class="cn">NULL</span>, method <span class="op">=</span> <span class="st">"Schoenfeld"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nSurv fixed-design summary (method=Schoenfeld; target=Accrual duration)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HR=0.500 vs HR0=1.000 | alpha=0.025 (sided=1) | power=90.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=109.5 subjects | D=86.2 events | T=30.2 study duration | accrual=18.2 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item  value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma      6     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R 18.243    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC  0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta  0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE  0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S   NULL     S</span>
<span class="r-in"><span><span class="co"># Same assumptions for group sequential design</span></span></span>
<span class="r-in"><span><span class="fu">gsSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  k <span class="op">=</span> <span class="fl">4</span>, sfu <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfHSD.html">sfHSD</a></span>, sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>, sfl <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfPower.html">sfPower</a></span>, sflpar <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>  T <span class="op">=</span> <span class="fl">36</span>, minfup <span class="op">=</span> <span class="fl">12</span>, method <span class="op">=</span> <span class="st">"Schoenfeld"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Group sequential design (method=Schoenfeld; k=4 analyses; Two-sided asymmetric with non-binding futility)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=142.9 subjects | D=116.6 events | T=36.0 study duration | accrual=24.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spending functions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Efficacy bounds derived using a Hwang-Shih-DeCani spending function with gamma = -4.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Futility bounds derived using a Kim-DeMets (power) spending function with rho = 0.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis summary:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method: Schoenfeld </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 25%                  Z   3.1554   0.2264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        N: 78        p (1-sided)   0.0008   0.4105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 30       ~HR at bound   0.3107   0.9196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 13   P(Cross) if HR=1   0.0008   0.5895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.0995   0.0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 50%                  Z   2.8183   0.8619</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 118        p (1-sided)   0.0024   0.1944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 59       ~HR at bound   0.4780   0.7979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 20   P(Cross) if HR=1   0.0030   0.8366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.4388   0.0707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 3: 75%                  Z   2.4390   1.4589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 144        p (1-sided)   0.0074   0.0723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 88       ~HR at bound   0.5936   0.7320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 26   P(Cross) if HR=1   0.0085   0.9445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.7776   0.0866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   2.0136   2.0136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 144        p (1-sided)   0.0220   0.0220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 117       ~HR at bound   0.6887   0.6887</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 36   P(Cross) if HR=1   0.0187   0.9813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.9000   0.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 5.955     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R    24    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S  NULL     S</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Vary minimum follow-up duration minfup to obtain power</span></span></span>
<span class="r-in"><span><span class="co"># Accrual duration R rate gamma are fixed and will not change on output.</span></span></span>
<span class="r-in"><span><span class="co"># Trial duration T and minimum follow-up minfup are input as NULL</span></span></span>
<span class="r-in"><span><span class="co"># and will be computed on output.</span></span></span>
<span class="r-in"><span><span class="co"># We will use the Freedman method to compute sample size</span></span></span>
<span class="r-in"><span><span class="co"># Control median survival time is 6</span></span></span>
<span class="r-in"><span><span class="co"># Often this method will fail as the accrual duration and rate provide too</span></span></span>
<span class="r-in"><span><span class="co"># little or too much sample size.</span></span></span>
<span class="r-in"><span><span class="fu">nSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">6</span>, R <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">.1</span>, minfup <span class="op">=</span> <span class="cn">NULL</span>, T <span class="op">=</span> <span class="cn">NULL</span>, method <span class="op">=</span> <span class="st">"Freedman"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nSurv fixed-design summary (method=Freedman; target=Follow-up duration)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HR=0.500 vs HR0=1.000 | alpha=0.025 (sided=1) | power=90.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=150.0 subjects | D=86.8 events | T=25.3 study duration | accrual=25.0 Accrual duration | minfup=0.3 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma     6     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R    25    25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S  NULL     S</span>
<span class="r-in"><span><span class="co"># Same assumptions for group sequential design</span></span></span>
<span class="r-in"><span><span class="fu">gsSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  k <span class="op">=</span> <span class="fl">4</span>, sfu <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfHSD.html">sfHSD</a></span>, sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>, sfl <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfPower.html">sfPower</a></span>, sflpar <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>  T <span class="op">=</span> <span class="fl">36</span>, minfup <span class="op">=</span> <span class="fl">12</span>, method <span class="op">=</span> <span class="st">"Freedman"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Group sequential design (method=Freedman; k=4 analyses; Two-sided asymmetric with non-binding futility)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=154.5 subjects | D=126.1 events | T=36.0 study duration | accrual=24.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spending functions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Efficacy bounds derived using a Hwang-Shih-DeCani spending function with gamma = -4.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Futility bounds derived using a Kim-DeMets (power) spending function with rho = 0.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis summary:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method: Freedman </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 25%                  Z   3.1554   0.2264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        N: 84        p (1-sided)   0.0008   0.4105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 32       ~HR at bound   0.3249   0.9225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 13   P(Cross) if HR=1   0.0008   0.5895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.0995   0.0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 50%                  Z   2.8183   0.8619</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 128        p (1-sided)   0.0024   0.1944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 64       ~HR at bound   0.4916   0.8048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 20   P(Cross) if HR=1   0.0030   0.8366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.4388   0.0707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 3: 75%                  Z   2.4390   1.4589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 156        p (1-sided)   0.0074   0.0723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 95       ~HR at bound   0.6055   0.7407</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 26   P(Cross) if HR=1   0.0085   0.9445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.7776   0.0866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   2.0136   2.0136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 156        p (1-sided)   0.0220   0.0220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 127       ~HR at bound   0.6986   0.6986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 36   P(Cross) if HR=1   0.0187   0.9813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.9000   0.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 6.437     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R    24    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S  NULL     S</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># piecewise constant enrollment rates (vary accrual rate to achieve power)</span></span></span>
<span class="r-in"><span><span class="co"># also piecewise constant failure rates</span></span></span>
<span class="r-in"><span><span class="co"># will specify annualized enrollment and failure rates</span></span></span>
<span class="r-in"><span><span class="fu">nSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.95</span>, <span class="fl">.97</span>, <span class="fl">.98</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 5%, 3% and 2% annual failure rates</span></span></span>
<span class="r-in"><span>  S <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># 1 year duration for first 2 failure rates, 3rd continues indefinitely</span></span></span>
<span class="r-in"><span>  R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.25</span>, <span class="fl">1.5</span><span class="op">)</span>, <span class="co"># 2-year enrollment with ramp-up over first 1/2 year</span></span></span>
<span class="r-in"><span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span>, <span class="co"># 1, 3 and 6 annualized enrollment rates will be</span></span></span>
<span class="r-in"><span>  <span class="co"># multiplied by ratio to achieve desired power</span></span></span>
<span class="r-in"><span>  hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fl">.01</span><span class="op">)</span>, <span class="co"># 1% annual censoring rate</span></span></span>
<span class="r-in"><span>  minfup <span class="op">=</span> <span class="fl">3</span>, T <span class="op">=</span> <span class="fl">5</span>, <span class="co"># 5-year trial duration with 3-year minimum follow-up</span></span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">.1</span>, method <span class="op">=</span> <span class="st">"LachinFoulkes"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nSurv fixed-design summary (method=LachinFoulkes; target=Accrual rate)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HR=0.500 vs HR0=1.000 | alpha=0.025 (sided=1) | power=90.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=1088.8 subjects | D=91.1 events | T=5.0 study duration | accrual=2.0 Accrual duration | minfup=3.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item                     value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 108.876, 326.629, 653.258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R           0.25, 0.25, 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC         0.051, 0.03, 0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta          0.01, 0.01, 0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE          0.01, 0.01, 0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S                      1, 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1, 3, 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.25, 0.25, 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.051, 0.03, 0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               1, 1</span>
<span class="r-in"><span><span class="co"># Same assumptions for group sequential design</span></span></span>
<span class="r-in"><span><span class="fu">gsSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  k <span class="op">=</span> <span class="fl">4</span>, sfu <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfHSD.html">sfHSD</a></span>, sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>, sfl <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfPower.html">sfPower</a></span>, sflpar <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.95</span>, <span class="fl">.97</span>, <span class="fl">.98</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 5%, 3% and 2% annual failure rates</span></span></span>
<span class="r-in"><span>  S <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># 1 year duration for first 2 failure rates, 3rd continues indefinitely</span></span></span>
<span class="r-in"><span>  R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.25</span>, <span class="fl">1.5</span><span class="op">)</span>, <span class="co"># 2-year enrollment with ramp-up over first 1/2 year</span></span></span>
<span class="r-in"><span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span>, <span class="co"># 1, 3 and 6 annualized enrollment rates will be</span></span></span>
<span class="r-in"><span>  <span class="co"># multiplied by ratio to achieve desired power</span></span></span>
<span class="r-in"><span>  hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fl">.01</span><span class="op">)</span>, <span class="co"># 1% annual censoring rate</span></span></span>
<span class="r-in"><span>  minfup <span class="op">=</span> <span class="fl">3</span>, T <span class="op">=</span> <span class="fl">5</span>, <span class="co"># 5-year trial duration with 3-year minimum follow-up</span></span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">.1</span>, method <span class="op">=</span> <span class="st">"LachinFoulkes"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Group sequential design (method=LachinFoulkes; k=4 analyses; Two-sided asymmetric with non-binding futility)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=1451.2 subjects | D=121.4 events | T=5.0 study duration | accrual=2.0 Accrual duration | minfup=3.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spending functions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Efficacy bounds derived using a Hwang-Shih-DeCani spending function with gamma = -4.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Futility bounds derived using a Kim-DeMets (power) spending function with rho = 0.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis summary:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method: LachinFoulkes </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 25%                  Z   3.1554   0.2264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N: 1198        p (1-sided)   0.0008   0.4105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 31       ~HR at bound   0.3181   0.9211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Month: 2   P(Cross) if HR=1   0.0008   0.5895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.0995   0.0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 50%                  Z   2.8183   0.8619</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N: 1452        p (1-sided)   0.0024   0.1944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 61       ~HR at bound   0.4851   0.8015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Month: 2   P(Cross) if HR=1   0.0030   0.8366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.4388   0.0707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 3: 75%                  Z   2.4390   1.4589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N: 1452        p (1-sided)   0.0074   0.0723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 92       ~HR at bound   0.5998   0.7366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Month: 3   P(Cross) if HR=1   0.0085   0.9445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.7776   0.0866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   2.0136   2.0136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N: 1452        p (1-sided)   0.0220   0.0220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 122       ~HR at bound   0.6939   0.6939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Month: 5   P(Cross) if HR=1   0.0187   0.9813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.9000   0.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item                     value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 145.125, 435.375, 870.749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R           0.25, 0.25, 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC         0.051, 0.03, 0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta          0.01, 0.01, 0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE          0.01, 0.01, 0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S                      1, 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1, 3, 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.25, 0.25, 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.051, 0.03, 0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               1, 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># combine it all: 2 strata, 2 failure rate periods</span></span></span>
<span class="r-in"><span><span class="co"># Note that method = "LachinFoulkes" may be preferred here</span></span></span>
<span class="r-in"><span><span class="fu">nSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">18</span>, <span class="fl">24</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, hr <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  eta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">45</span>, <span class="fl">55</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, S <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>, minfup <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">.1</span>, method <span class="op">=</span> <span class="st">"BernsteinLagakos"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nSurv fixed-design summary (method=BernsteinLagakos; target=Accrual rate)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HR=0.500 vs HR0=1.000 | alpha=0.025 (sided=1) | power=90.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=226.8 subjects | D=78.7 events | T=18.0 study duration | accrual=6.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Expected events by stratum (H1):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   control experimental  total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  26.517       16.431 42.949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  22.980       12.761 35.741</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item                           value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma  12.84, 25.68, 21.4 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R                            5, 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116, 0.058, 0.039 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.017, 0.014, 0.015 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.017, 0.014, 0.015 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S                               3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              3, 6, 5 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            5, 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.116, 0.058, 0.039 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.017, 0.014, 0.015 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                3</span>
<span class="r-in"><span><span class="co"># Same assumptions for group sequential design</span></span></span>
<span class="r-in"><span><span class="fu">gsSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  k <span class="op">=</span> <span class="fl">4</span>, sfu <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfHSD.html">sfHSD</a></span>, sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>, sfl <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="sfPower.html">sfPower</a></span>, sflpar <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">18</span>, <span class="fl">24</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, hr <span class="op">=</span> <span class="fl">.5</span>,</span></span>
<span class="r-in"><span>  eta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">45</span>, <span class="fl">55</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, S <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>, minfup <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">.1</span>, method <span class="op">=</span> <span class="st">"BernsteinLagakos"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Group sequential design (method=BernsteinLagakos; k=4 analyses; Two-sided asymmetric with non-binding futility)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=302.4 subjects | D=104.9 events | T=18.0 study duration | accrual=6.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spending functions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Efficacy bounds derived using a Hwang-Shih-DeCani spending function with gamma = -4.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Futility bounds derived using a Kim-DeMets (power) spending function with rho = 0.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis summary:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method: BernsteinLagakos </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Analysis              Value Efficacy Futility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 1: 25%                  Z   3.1554   0.2264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 250        p (1-sided)   0.0008   0.4105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 27       ~HR at bound   0.2916   0.9154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Month: 5   P(Cross) if HR=1   0.0008   0.5895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.0995   0.0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 2: 50%                  Z   2.8183   0.8619</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 304        p (1-sided)   0.0024   0.1944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 53       ~HR at bound   0.4592   0.7882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Month: 8   P(Cross) if HR=1   0.0030   0.8366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.4388   0.0707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IA 3: 75%                  Z   2.4390   1.4589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 304        p (1-sided)   0.0074   0.0723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Events: 79       ~HR at bound   0.5770   0.7197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 12   P(Cross) if HR=1   0.0085   0.9445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.7776   0.0866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Final                  Z   2.0136   2.0136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N: 304        p (1-sided)   0.0220   0.0220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Events: 105       ~HR at bound   0.6749   0.6749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Month: 18   P(Cross) if HR=1   0.0187   0.9813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              P(Cross) if HR=0.5   0.9000   0.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item                             value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma 17.115, 28.525, 34.23 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R                              5, 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC   0.116, 0.039, 0.058 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta   0.017, 0.015, 0.014 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE   0.017, 0.015, 0.014 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S                                 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              3, 5, 6 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            5, 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.116, 0.039, 0.058 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.017, 0.015, 0.014 ... (len=4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Expected events by stratum (H1) at final analysis:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum control experimental  total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Stratum 1  35.346       21.902 57.248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Stratum 2  30.631       17.010 47.641</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example to compute power for a fixed design.</span></span></span>
<span class="r-in"><span><span class="co"># Trial duration T, minimum follow-up minfup and accrual duration R are all</span></span></span>
<span class="r-in"><span><span class="co"># specified and will not change on output.</span></span></span>
<span class="r-in"><span><span class="co"># beta=NULL will compute power and output will be the same as if beta were specified.</span></span></span>
<span class="r-in"><span><span class="co"># This option is not available for group sequential designs.</span></span></span>
<span class="r-in"><span><span class="fu">nSurv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span>, hr <span class="op">=</span> <span class="fl">.5</span>, eta <span class="op">=</span> <span class="fl">.001</span>, gamma <span class="op">=</span> <span class="fl">6</span>, R <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="cn">NULL</span>, minfup <span class="op">=</span> <span class="fl">12</span>, T <span class="op">=</span> <span class="fl">36</span>, method <span class="op">=</span> <span class="st">"LachinFoulkes"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nSurv fixed-design summary (method=LachinFoulkes; target=Power)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HR=0.500 vs HR0=1.000 | alpha=0.025 (sided=1) | power=96.5%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> N=144.0 subjects | D=117.5 events | T=36.0 study duration | accrual=24.0 Accrual duration | minfup=12.0 minimum follow-up | ratio=1 randomization ratio (experimental/control)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key inputs (names preserved):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                desc    item value input</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Accrual rate(s)   gamma     6     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Accrual rate duration(s)       R    24    25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Control hazard rate(s) lambdaC 0.116 0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Control dropout rate(s)     eta 0.001 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Experimental dropout rate(s)    etaE 0.001  etaE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Event and dropout rate duration(s)       S  NULL     S</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

