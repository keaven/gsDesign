<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hwang-Shih-DeCani Spending Function — sfHSD • gsDesign</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet"><script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Hwang-Shih-DeCani Spending Function — sfHSD"><meta name="description" content="The function sfHSD implements a Hwang-Shih-DeCani spending function.
This is the default spending function for gsDesign(). Normally it
will be passed to gsDesign in the parameter sfu for the upper
bound or sfl for the lower bound to specify a spending function
family for a design. In this case, the user does not need to know the
calling sequence. The calling sequence is useful, however, when the user
wishes to plot a spending function as demonstrated below in examples.
A Hwang-Shih-DeCani spending function takes the form $$f(t;\alpha,
\gamma)=\alpha(1-e^{-\gamma t})/(1-e^{-\gamma})$$ where \(\gamma\) is the
value passed in param. A value of \(\gamma=-4\) is used
to approximate an O'Brien-Fleming design (see sfExponential
for a better fit), while a value of \(\gamma=1\) approximates a
Pocock design well."><meta property="og:description" content="The function sfHSD implements a Hwang-Shih-DeCani spending function.
This is the default spending function for gsDesign(). Normally it
will be passed to gsDesign in the parameter sfu for the upper
bound or sfl for the lower bound to specify a spending function
family for a design. In this case, the user does not need to know the
calling sequence. The calling sequence is useful, however, when the user
wishes to plot a spending function as demonstrated below in examples.
A Hwang-Shih-DeCani spending function takes the form $$f(t;\alpha,
\gamma)=\alpha(1-e^{-\gamma t})/(1-e^{-\gamma})$$ where \(\gamma\) is the
value passed in param. A value of \(\gamma=-4\) is used
to approximate an O'Brien-Fleming design (see sfExponential
for a better fit), while a value of \(\gamma=1\) approximates a
Pocock design well."><meta property="og:image" content="https://keaven.github.io/gsDesign/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.6.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Hwang-Shih-DeCani Spending Function</h1>
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/master/R/gsSpending.R" class="external-link"><code>R/gsSpending.R</code></a></small>
      <div class="d-none name"><code>sfHSD.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function <code>sfHSD</code> implements a Hwang-Shih-DeCani spending function.
This is the default spending function for <code><a href="gsDesign.html">gsDesign()</a></code>. Normally it
will be passed to <code>gsDesign</code> in the parameter <code>sfu</code> for the upper
bound or <code>sfl</code> for the lower bound to specify a spending function
family for a design. In this case, the user does not need to know the
calling sequence. The calling sequence is useful, however, when the user
wishes to plot a spending function as demonstrated below in examples.</p>
<p>A Hwang-Shih-DeCani spending function takes the form $$f(t;\alpha,
\gamma)=\alpha(1-e^{-\gamma t})/(1-e^{-\gamma})$$ where \(\gamma\) is the
value passed in <code>param</code>. A value of \(\gamma=-4\) is used
to approximate an O'Brien-Fleming design (see <code><a href="sfExponential.html">sfExponential</a></code>
for a better fit), while a value of \(\gamma=1\) approximates a
Pocock design well.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sfHSD</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Real value \(&gt; 0\) and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size/information.</p></dd>


<dt id="arg-t">t<a class="anchor" aria-label="anchor" href="#arg-t"></a></dt>
<dd><p>A vector of points with increasing values from 0 to 1, inclusive.
Values of the proportion of sample size/information for which the spending
function will be computed.</p></dd>


<dt id="arg-param">param<a class="anchor" aria-label="anchor" href="#arg-param"></a></dt>
<dd><p>A single real value specifying the gamma parameter for which
Hwang-Shih-DeCani spending is to be computed; allowable range is [-40, 40]</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of type <code>spendfn</code>. See <code><a href="../articles/SpendingFunctionOverview.html">vignette("SpendingFunctionOverview")</a></code> for further details.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The gsDesign technical manual is available at
  <a href="https://keaven.github.io/gsd-tech-manual/" class="external-link">https://keaven.github.io/gsd-tech-manual/</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="../articles/SpendingFunctionOverview.html">vignette("SpendingFunctionOverview")</a></code>, <code><a href="gsDesign.html">gsDesign</a></code>,
<code><a href="../articles/gsDesignPackageOverview.html">vignette("gsDesignPackageOverview")</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># design a 4-analysis trial using a Hwang-Shih-DeCani spending function</span></span></span>
<span class="r-in"><span><span class="co"># for both lower and upper bounds</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="gsDesign.html">gsDesign</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">4</span>, sfu <span class="op">=</span> <span class="va">sfHSD</span>, sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>, sfl <span class="op">=</span> <span class="va">sfHSD</span>, sflpar <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print the design</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Asymmetric two-sided group sequential design with</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90 % power and 2.5 % Type I Error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper bound spending computations assume</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trial continues if lower bound is crossed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Sample</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Size   ----Lower bounds----  ----Upper bounds-----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Analysis Ratio*  Z   Nominal p Spend+  Z   Nominal p Spend++</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          1  0.324 0.03    0.5136 0.0350 2.80    0.0025  0.0025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          2  0.649 0.88    0.8096 0.0273 2.58    0.0049  0.0042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          3  0.973 1.51    0.9349 0.0212 2.34    0.0096  0.0069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          4  1.297 2.09    0.9817 0.0165 2.09    0.0183  0.0114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Total                       0.1000                 0.0250 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + lower bound beta spending (under H1):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Hwang-Shih-DeCani spending function with gamma = 1.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ++ alpha spending:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Hwang-Shih-DeCani spending function with gamma = -2.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Sample size ratio compared to fixed design with no interim</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Boundary crossing probabilities and expected sample size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> assume any cross stops the trial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper boundary (power or Type I Error)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Theta      1      2      3      4  Total   E{N}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.0000 0.0025 0.0042 0.0065 0.0072 0.0203 0.5477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.2415 0.1695 0.3553 0.2774 0.0978 0.9000 0.7533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower boundary (futility or Type II Error)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Theta      1      2      3      4  Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.0000 0.5136 0.3156 0.1169 0.0336 0.9797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.2415 0.0350 0.0273 0.0212 0.0165 0.1000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># since sfHSD is the default for both sfu and sfl,</span></span></span>
<span class="r-in"><span><span class="co"># this could have been written as</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="gsDesign.html">gsDesign</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">4</span>, sfupar <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>, sflpar <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print again</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Asymmetric two-sided group sequential design with</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90 % power and 2.5 % Type I Error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper bound spending computations assume</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trial continues if lower bound is crossed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Sample</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Size   ----Lower bounds----  ----Upper bounds-----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Analysis Ratio*  Z   Nominal p Spend+  Z   Nominal p Spend++</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          1  0.324 0.03    0.5136 0.0350 2.80    0.0025  0.0025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          2  0.649 0.88    0.8096 0.0273 2.58    0.0049  0.0042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          3  0.973 1.51    0.9349 0.0212 2.34    0.0096  0.0069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          4  1.297 2.09    0.9817 0.0165 2.09    0.0183  0.0114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Total                       0.1000                 0.0250 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + lower bound beta spending (under H1):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Hwang-Shih-DeCani spending function with gamma = 1.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ++ alpha spending:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Hwang-Shih-DeCani spending function with gamma = -2.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Sample size ratio compared to fixed design with no interim</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Boundary crossing probabilities and expected sample size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> assume any cross stops the trial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper boundary (power or Type I Error)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Theta      1      2      3      4  Total   E{N}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.0000 0.0025 0.0042 0.0065 0.0072 0.0203 0.5477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.2415 0.1695 0.3553 0.2774 0.0978 0.9000 0.7533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower boundary (futility or Type II Error)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Theta      1      2      3      4  Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.0000 0.5136 0.3156 0.1169 0.0336 0.9797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.2415 0.0350 0.0273 0.0212 0.0165 0.1000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot the spending function using many points to obtain a smooth curve</span></span></span>
<span class="r-in"><span><span class="co"># show default values of gamma to see how the spending function changes</span></span></span>
<span class="r-in"><span><span class="co"># also show gamma=1 which is supposed to approximate a Pocock design</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span> <span class="op">/</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfHSD</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"Proportion of final sample size"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"Cumulative Type I error spending"</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"Hwang-Shih-DeCani Spending Function Example"</span>, type <span class="op">=</span> <span class="st">"l"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfHSD</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfHSD</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="fl">1</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.0</span>, <span class="fl">.375</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">.025</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.8</span>, <span class="fl">1</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>  legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gamma= -4"</span>, <span class="st">"gamma= -2"</span>, <span class="st">"gamma= 1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sfHSD-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

