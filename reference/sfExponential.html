<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Exponential Spending Function — sfExponential • gsDesign</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet"><script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Exponential Spending Function — sfExponential"><meta name="description" content="The function sfExponential implements the exponential spending
function (Anderson and Clark, 2009). Normally sfExponential will be
passed to gsDesign in the parameter sfu for the upper bound or
sfl for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated below in examples.
An exponential spending function is defined for any positive nu and
\(0\le t\le 1\) as
$$f(t;\alpha,\nu)=\alpha(t)=\alpha^{t^{-\nu}}.$$
A value of nu=0.8 approximates an O'Brien-Fleming spending function
well.
The general class of spending functions this family is derived from requires
a continuously increasing cumulative distribution function defined for
\(x&amp;gt;0\) and is defined as $$f(t;\alpha,
\nu)=1-F\left(F^{-1}(1-\alpha)/ t^\nu\right).$$ The exponential spending function can be
derived by letting \(F(x)=1-\exp(-x)\), the exponential cumulative
distribution function. This function was derived as a generalization of the
Lan-DeMets (1983) spending function used to approximate an O'Brien-Fleming
spending function (sfLDOF()), $$f(t; \alpha)=2-2\Phi \left(
\Phi^{-1}(1-\alpha/2)/ t^{1/2} \right).$$"><meta property="og:description" content="The function sfExponential implements the exponential spending
function (Anderson and Clark, 2009). Normally sfExponential will be
passed to gsDesign in the parameter sfu for the upper bound or
sfl for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated below in examples.
An exponential spending function is defined for any positive nu and
\(0\le t\le 1\) as
$$f(t;\alpha,\nu)=\alpha(t)=\alpha^{t^{-\nu}}.$$
A value of nu=0.8 approximates an O'Brien-Fleming spending function
well.
The general class of spending functions this family is derived from requires
a continuously increasing cumulative distribution function defined for
\(x&amp;gt;0\) and is defined as $$f(t;\alpha,
\nu)=1-F\left(F^{-1}(1-\alpha)/ t^\nu\right).$$ The exponential spending function can be
derived by letting \(F(x)=1-\exp(-x)\), the exponential cumulative
distribution function. This function was derived as a generalization of the
Lan-DeMets (1983) spending function used to approximate an O'Brien-Fleming
spending function (sfLDOF()), $$f(t; \alpha)=2-2\Phi \left(
\Phi^{-1}(1-\alpha/2)/ t^{1/2} \right).$$"><meta property="og:image" content="https://keaven.github.io/gsDesign/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.6.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Exponential Spending Function</h1>
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/master/R/gsSpending.R" class="external-link"><code>R/gsSpending.R</code></a></small>
      <div class="d-none name"><code>sfExponential.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function <code>sfExponential</code> implements the exponential spending
function (Anderson and Clark, 2009). Normally <code>sfExponential</code> will be
passed to <code>gsDesign</code> in the parameter <code>sfu</code> for the upper bound or
<code>sfl</code> for the lower bound to specify a spending function family for a
design. In this case, the user does not need to know the calling sequence.
The calling sequence is useful, however, when the user wishes to plot a
spending function as demonstrated below in examples.</p>
<p>An exponential spending function is defined for any positive <code>nu</code> and
\(0\le t\le 1\) as
$$f(t;\alpha,\nu)=\alpha(t)=\alpha^{t^{-\nu}}.$$
A value of <code>nu=0.8</code> approximates an O'Brien-Fleming spending function
well.</p>
<p>The general class of spending functions this family is derived from requires
a continuously increasing cumulative distribution function defined for
\(x&gt;0\) and is defined as $$f(t;\alpha,
\nu)=1-F\left(F^{-1}(1-\alpha)/ t^\nu\right).$$ The exponential spending function can be
derived by letting \(F(x)=1-\exp(-x)\), the exponential cumulative
distribution function. This function was derived as a generalization of the
Lan-DeMets (1983) spending function used to approximate an O'Brien-Fleming
spending function (<code><a href="sfLDOF.html">sfLDOF()</a></code>), $$f(t; \alpha)=2-2\Phi \left(
\Phi^{-1}(1-\alpha/2)/ t^{1/2} \right).$$</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sfExponential</span><span class="op">(</span><span class="va">alpha</span>, <span class="va">t</span>, <span class="va">param</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Real value \(&gt; 0\) and no more than 1. Normally,
<code>alpha=0.025</code> for one-sided Type I error specification or
<code>alpha=0.1</code> for Type II error specification. However, this could be set
to 1 if for descriptive purposes you wish to see the proportion of spending
as a function of the proportion of sample size/information.</p></dd>


<dt id="arg-t">t<a class="anchor" aria-label="anchor" href="#arg-t"></a></dt>
<dd><p>A vector of points with increasing values from 0 to 1, inclusive.
Values of the proportion of sample size/information for which the spending
function will be computed.</p></dd>


<dt id="arg-param">param<a class="anchor" aria-label="anchor" href="#arg-param"></a></dt>
<dd><p>A single positive value specifying the nu parameter for which
the exponential spending is to be computed; allowable range is (0, 1.5].</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of type <code>spendfn</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The gsDesign technical manual shows how to use <code>sfExponential()</code>
  to closely approximate an O'Brien-Fleming design. An example is given below.
  The manual is available at &lt;https://keaven.github.io/gsd-tech-manual/&gt;.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Anderson KM and Clark JB (2009), Fitting spending functions.
<em>Statistics in Medicine</em>; 29:321-327.</p>
<p>Jennison C and Turnbull BW (2000), <em>Group Sequential Methods with
Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.</p>
<p>Lan, KKG and DeMets, DL (1983), Discrete sequential boundaries for clinical
trials. <em>Biometrika</em>; 70:659-663.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="../articles/SpendingFunctionOverview.html">vignette("SpendingFunctionOverview")</a></code>, <code><a href="gsDesign.html">gsDesign</a></code>,
<code><a href="../articles/gsDesignPackageOverview.html">vignette("gsDesignPackageOverview")</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># use 'best' exponential approximation for k=6 to O'Brien-Fleming design</span></span></span>
<span class="r-in"><span><span class="co"># (see manual for details)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gsDesign.html">gsDesign</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  k <span class="op">=</span> <span class="fl">6</span>, sfu <span class="op">=</span> <span class="va">sfExponential</span>, sfupar <span class="op">=</span> <span class="fl">0.7849295</span>,</span></span>
<span class="r-in"><span>  test.type <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4.998123 3.598098 2.933292 2.530838 2.253723 2.047082</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show actual O'Brien-Fleming bound</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gsDesign.html">gsDesign</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">6</span>, sfu <span class="op">=</span> <span class="st">"OF"</span>, test.type <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5.028296 3.555542 2.903088 2.514148 2.248722 2.052793</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show Lan-DeMets approximation</span></span></span>
<span class="r-in"><span><span class="co"># (not as close as sfExponential approximation)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gsDesign.html">gsDesign</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">6</span>, sfu <span class="op">=</span> <span class="va">sfLDOF</span>, test.type <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5.366558 3.710340 2.969736 2.538677 2.252190 2.044790</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot exponential spending function across a range of values of interest</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span> <span class="op">/</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExponential</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="fl">0.8</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"Proportion of final sample size"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"Cumulative Type I error spending"</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"Exponential Spending Function Example"</span>, type <span class="op">=</span> <span class="st">"l"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExponential</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExponential</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExponential</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">sfExponential</span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">t</span>, <span class="fl">0.15</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span>, lty <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.0</span>, <span class="fl">.3</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">.025</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">1</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span></span>
<span class="r-in"><span>  legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"nu = 0.8"</span>, <span class="st">"nu = 0.5"</span>, <span class="st">"nu = 0.3"</span>, <span class="st">"nu = 0.2"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"nu = 0.15"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">.59</span>, y <span class="op">=</span> <span class="fl">.95</span> <span class="op">*</span> <span class="fl">.025</span>, labels <span class="op">=</span> <span class="st">"&lt;--approximates O'Brien-Fleming"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="sfExponential-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

