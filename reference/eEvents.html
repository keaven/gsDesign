<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="eEvents() is used to calculate the expected number of events for a
population with a time-to-event endpoint.  It is based on calculations
demonstrated in Lachin and Foulkes (1986) and is fundamental in computations
for the sample size method they propose. Piecewise exponential survival and
dropout rates are supported as well as piecewise uniform enrollment. A
stratified population is allowed. Output is the expected number of events
observed given a trial duration and the above rate parameters.
eEvents() produces an object of class eEvents with the number
of subjects and events for a set of pre-specified trial parameters, such as
accrual duration and follow-up period. The underlying power calculation is
based on Lachin and Foulkes (1986) method for proportional hazards assuming
a fixed underlying hazard ratio between 2 treatment groups. The method has
been extended here to enable designs to test non-inferiority. Piecewise
constant enrollment and failure rates are assumed and a stratified
population is allowed. See also nSurvival for other Lachin and
Foulkes (1986) methods assuming a constant hazard difference or exponential
enrollment rate.
print.eEvents() formats the output for an object of class
eEvents and returns the input value."><title>Expected number of events for a time-to-event study — eEvents • gsDesign</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expected number of events for a time-to-event study — eEvents"><meta property="og:description" content="eEvents() is used to calculate the expected number of events for a
population with a time-to-event endpoint.  It is based on calculations
demonstrated in Lachin and Foulkes (1986) and is fundamental in computations
for the sample size method they propose. Piecewise exponential survival and
dropout rates are supported as well as piecewise uniform enrollment. A
stratified population is allowed. Output is the expected number of events
observed given a trial duration and the above rate parameters.
eEvents() produces an object of class eEvents with the number
of subjects and events for a set of pre-specified trial parameters, such as
accrual duration and follow-up period. The underlying power calculation is
based on Lachin and Foulkes (1986) method for proportional hazards assuming
a fixed underlying hazard ratio between 2 treatment groups. The method has
been extended here to enable designs to test non-inferiority. Piecewise
constant enrollment and failure rates are assumed and a stratified
population is allowed. See also nSurvival for other Lachin and
Foulkes (1986) methods assuming a constant hazard difference or exponential
enrollment rate.
print.eEvents() formats the output for an object of class
eEvents and returns the input value."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Expected number of events for a time-to-event study</h1>
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/HEAD/R/gsSurv.R" class="external-link"><code>R/gsSurv.R</code></a></small>
      <div class="d-none name"><code>eEvents.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>eEvents()</code> is used to calculate the expected number of events for a
population with a time-to-event endpoint.  It is based on calculations
demonstrated in Lachin and Foulkes (1986) and is fundamental in computations
for the sample size method they propose. Piecewise exponential survival and
dropout rates are supported as well as piecewise uniform enrollment. A
stratified population is allowed. Output is the expected number of events
observed given a trial duration and the above rate parameters.</p>
<p><code>eEvents()</code> produces an object of class <code>eEvents</code> with the number
of subjects and events for a set of pre-specified trial parameters, such as
accrual duration and follow-up period. The underlying power calculation is
based on Lachin and Foulkes (1986) method for proportional hazards assuming
a fixed underlying hazard ratio between 2 treatment groups. The method has
been extended here to enable designs to test non-inferiority. Piecewise
constant enrollment and failure rates are assumed and a stratified
population is allowed. See also <code><a href="nSurvival.html">nSurvival</a></code> for other Lachin and
Foulkes (1986) methods assuming a constant hazard difference or exponential
enrollment rate.</p>
<p><code>print.eEvents()</code> formats the output for an object of class
<code>eEvents</code> and returns the input value.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">eEvents</span><span class="op">(</span>
  lambda <span class="op">=</span> <span class="fl">1</span>,
  eta <span class="op">=</span> <span class="fl">0</span>,
  gamma <span class="op">=</span> <span class="fl">1</span>,
  R <span class="op">=</span> <span class="fl">1</span>,
  S <span class="op">=</span> <span class="cn">NULL</span>,
  T <span class="op">=</span> <span class="fl">2</span>,
  Tfinal <span class="op">=</span> <span class="cn">NULL</span>,
  minfup <span class="op">=</span> <span class="fl">0</span>,
  digits <span class="op">=</span> <span class="fl">4</span>
<span class="op">)</span>

<span class="co"># S3 method for eEvents</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">4</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>lambda</dt>
<dd><p>scalar, vector or matrix of event hazard rates; rows represent
time periods while columns represent strata; a vector implies a single
stratum.</p></dd>
<dt>eta</dt>
<dd><p>scalar, vector or matrix of dropout hazard rates; rows represent
time periods while columns represent strata; if entered as a scalar, rate is
constant across strata and time periods; if entered as a vector, rates are
constant across strata.</p></dd>
<dt>gamma</dt>
<dd><p>a scalar, vector or matrix of rates of entry by time period
(rows) and strata (columns); if entered as a scalar, rate is constant
across strata and time periods; if entered as a vector, rates are constant
across strata.</p></dd>
<dt>R</dt>
<dd><p>a scalar or vector of durations of time periods for recruitment
rates specified in rows of <code>gamma</code>. Length is the same as number of
rows in <code>gamma</code>. Note that the final enrollment period is extended as
long as needed.</p></dd>
<dt>S</dt>
<dd><p>a scalar or vector of durations of piecewise constant event rates
specified in rows of <code>lambda</code>, <code>eta</code> and <code>etaE</code>; this is NULL
if there is a single event rate per stratum (exponential failure) or length
of the number of rows in <code>lambda</code> minus 1, otherwise.</p></dd>
<dt>T</dt>
<dd><p>time of analysis; if <code>Tfinal=NULL</code>, this is also the study
duration.</p></dd>
<dt>Tfinal</dt>
<dd><p>Study duration; if <code>NULL</code>, this will be replaced with
<code>T</code> on output.</p></dd>
<dt>minfup</dt>
<dd><p>time from end of planned enrollment (<code>sum(R)</code> from output
value of <code>R</code>) until <code>Tfinal</code>.</p></dd>
<dt>digits</dt>
<dd><p>which controls number of digits for printing.</p></dd>
<dt>x</dt>
<dd><p>an object of class <code>eEvents</code> returned from <code>eEvents()</code>.</p></dd>
<dt>...</dt>
<dd><p>Other arguments that may be passed to the generic print function.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>eEvents()</code> and <code>print.eEvents()</code> return an object of
class <code>eEvents</code> which contains the following items:</p>
<dl><dt>lambda</dt>
<dd><p>as
input; converted to a matrix on output.</p></dd>
<dt>eta</dt>
<dd><p>as input; converted to a
matrix on output.</p></dd>
<dt>gamma</dt>
<dd><p>as input.</p></dd>
<dt>R</dt>
<dd><p>as input.</p></dd>
<dt>S</dt>
<dd><p>as
input.</p></dd>
<dt>T</dt>
<dd><p>as input.</p></dd>
<dt>Tfinal</dt>
<dd><p>planned duration of study.</p></dd>
<dt>minfup</dt>
<dd><p>as input.</p></dd>
<dt>d</dt>
<dd><p>expected number of events.</p></dd>
<dt>n</dt>
<dd><p>expected sample size.</p></dd>
<dt>digits</dt>
<dd><p>as input.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Lachin JM and Foulkes MA (1986), Evaluation of Sample Size and
Power for Analyses of Survival with Allowance for Nonuniform Patient Entry,
Losses to Follow-Up, Noncompliance, and Stratification. <em>Biometrics</em>,
42, 507-519.</p>
<p>Bernstein D and Lagakos S (1978), Sample size and power determination for
stratified clinical trials. <em>Journal of Statistical Computation and
Simulation</em>, 8:65-73.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="gsDesign-package-overview.html">gsDesign package overview</a>, <a href="plot.gsDesign.html">plot.gsDesign</a>, 
<code><a href="gsDesign.html">gsDesign</a></code>, <code><a href="gsBoundSummary.html">gsHR</a></code>,
<code><a href="nSurvival.html">nSurvival</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Keaven Anderson <a href="mailto:keaven_anderson@merck.com">keaven_anderson@merck.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co"># 3 enrollment periods, 3 piecewise exponential failure rates</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu">eEvents</span><span class="op">(</span></span>
<span class="r-in">  lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.02</span>, <span class="fl">.01</span><span class="op">)</span>, eta <span class="op">=</span> <span class="fl">.01</span>, gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span class="r-in">  R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, S <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, T <span class="op">=</span> <span class="fl">20</span></span>
<span class="r-in"><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ lambda: num [1:3, 1] 0.05 0.02 0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr [1:3] "0-1" "1-2" "2-20"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr "Stratum 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ eta   : num [1:3, 1] 0.01 0.01 0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr [1:3] "0-1" "1-2" "2-20"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr "Stratum 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ gamma : num [1:3, 1] 5 10 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr [1:3] "0-2" "2-3" "3-5"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr "Stratum 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ R     : num [1:3] 2 1 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ S     : num [1:2] 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ T     : num 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Tfinal: num 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ minfup: num 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d     : num 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ n     : num 60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ digits: num 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "class")= chr "eEvents"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># control group for example from Bernstein and Lagakos (1978)</span></span>
<span class="r-in"><span class="va">lamC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">.8</span>, <span class="fl">.5</span><span class="op">)</span></span>
<span class="r-in"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu">eEvents</span><span class="op">(</span></span>
<span class="r-in">  lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">lamC</span>, <span class="va">lamC</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">3</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>, eta <span class="op">=</span> <span class="fl">0</span>,</span>
<span class="r-in">  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">.5</span>, ncol <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>, R <span class="op">=</span> <span class="fl">2</span>, T <span class="op">=</span> <span class="fl">4</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

