<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Futility and harm bounds for overall survival monitoring • gsDesign</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Futility and harm bounds for overall survival monitoring">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.11.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Futility and harm bounds for overall survival monitoring</h1>
                        <h4 data-toc-skip class="author">Keaven
Anderson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/master/vignettes/HarmBound.Rmd" class="external-link"><code>vignettes/HarmBound.Rmd</code></a></small>
      <div class="d-none name"><code>HarmBound.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>When clinical trials include overall survival (OS) as a secondary or
exploratory endpoint, regulators may recommend not only monitoring for
early evidence of efficacy and futility, but also for potential
<em>harm</em> — that is, evidence that the experimental treatment may be
<em>worsening</em> survival relative to control. This article
demonstrates how the <strong>gsDesign</strong> package supports group
sequential designs with three boundaries: an <strong>efficacy</strong>
(upper) bound, a <strong>futility</strong> (lower) bound, and a
<strong>harm</strong> bound, using <code>test.type = 7</code> (binding)
and <code>test.type = 8</code> (non-binding).</p>
<div class="section level3">
<h3 id="regulatory-context-fda-guidance-on-os-monitoring-in-oncology">Regulatory context: FDA guidance on OS monitoring in oncology<a class="anchor" aria-label="anchor" href="#regulatory-context-fda-guidance-on-os-monitoring-in-oncology"></a>
</h3>
<p>The FDA draft guidance <em>Assessment of Overall Survival Evidence in
Support of Accelerated Approval of Oncology Therapeutics</em> <span class="citation">(U.S. Food and Drug Administration 2024)</span>
describes expectations for monitoring OS in the context of trials that
may receive accelerated approval based on surrogate endpoints. The
guidance states that sponsors should specify pre-planned boundaries for
interim OS monitoring, including criteria for stopping a trial early if
there is evidence of a <em>detrimental effect on OS</em>. Key points
include:</p>
<ul>
<li>Sponsors should include a <strong>pre-specified statistical analysis
plan</strong> for interim OS analyses, including the timing and number
of interim looks.</li>
<li>At a minimum, the guidance expects monitoring for <strong>OS
harm</strong> (i.e., a detrimental trend in overall survival) using
pre-specified boundaries.</li>
<li>Separate from the harm boundary, the sponsor should establish a
<strong>futility boundary</strong> to stop the trial if the experimental
treatment is unlikely to demonstrate an OS benefit.</li>
<li>The statistical plan should describe the spending functions used for
each boundary and how the overall Type I error and Type II error are
controlled.</li>
</ul>
<p>This motivates the design framework with <code>test.type = 7</code>
(binding futility and harm bounds) and <code>test.type = 8</code>
(non-binding futility and harm bounds), where three boundaries are
simultaneously specified using spending functions.</p>
<p>The harm bound implemented in gsDesign is a new method that is easy
to use — a principled, straightforward extension of the widely used
group sequential spending function framework. While we believe this
approach is understandable, useful, and flexible, other methods for
monitoring potential harm may also be considered. However, there are
limitations with this approach. The example presented here has higher
mortality risk than many cases. With lower mortality risk, modifications
of this approach or other approaches may be preferable.</p>
</div>
<div class="section level3">
<h3 id="design-framework-overview">Design framework overview<a class="anchor" aria-label="anchor" href="#design-framework-overview"></a>
</h3>
<p>In a standard two-sided asymmetric group sequential design
(<code>test.type = 3</code> or <code>4</code>), there are two
boundaries:</p>
<ul>
<li>
<strong>Efficacy (upper) bound</strong>: Reject <span class="math inline">\(H_0\)</span> if the test statistic exceeds this
boundary (evidence of treatment benefit).</li>
<li>
<strong>Futility (lower) bound</strong>: Stop for futility if the
test statistic falls below this boundary (insufficient evidence of
treatment benefit).</li>
</ul>
<p>The harm bound extension (<code>test.type = 7</code> or
<code>8</code>) adds a third boundary:</p>
<ul>
<li>
<strong>Harm bound</strong>: Signal that the experimental treatment
may be harming patients (evidence of a <em>detrimental</em>
effect).</li>
</ul>
<p>The harm bound lies below the futility bound. At each analysis, there
are four possible outcomes:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Cross the efficacy bound</strong> (above): Stop for
efficacy.</li>
<li>
<strong>Between the efficacy and futility bounds</strong>: Continue
the trial.</li>
<li>
<strong>Cross the futility bound but not the harm bound</strong>
(between futility and harm): Stop for futility.</li>
<li>
<strong>Cross the harm bound</strong> (below): Stop for harm.</li>
</ol>
<p>The harm bound is intended so that if a small observed p-value
<em>favoring control</em> is observed, the harm bound will be crossed.
That is, the harm bound flags evidence that the experimental treatment
may be <em>worsening</em> survival — a negative treatment effect on the
log hazard ratio scale.</p>
</div>
</div>
<div class="section level2">
<h2 id="design-with-non-binding-bounds-test-type-8">Design with non-binding bounds (<code>test.type = 8</code>)<a class="anchor" aria-label="anchor" href="#design-with-non-binding-bounds-test-type-8"></a>
</h2>
<p>We demonstrate a survival design using <code><a href="../reference/gsSurvCalendar.html">gsSurvCalendar()</a></code>
with <code>test.type = 8</code> (non-binding futility and harm bounds).
The scenario is based on a 1:1 randomized trial monitoring overall
survival with:</p>
<ul>
<li>
<strong>Median control survival</strong>: 3 years (36 months), i.e.,
<span class="math inline">\(\lambda_C = \log(2)/36\)</span>.</li>
<li>
<strong>Target hazard ratio</strong>: HR = 0.75 (25% reduction in
hazard).</li>
<li>
<strong>Power</strong>: 90% (<span class="math inline">\(\beta =
0.1\)</span>).</li>
<li>
<strong>One-sided <span class="math inline">\(\alpha\)</span></strong>: 0.0125 (e.g., the OS
component of a trial with multiplicity adjustment).</li>
<li>
<strong>Enrollment</strong>: Uniform enrollment over 18 months.</li>
<li>
<strong>Study duration</strong>: 5 years (60 months) with planned
analyses at years 1, 2, 3, 4, and 5 from start of enrollment.</li>
</ul>
<p>The <code>astar</code> parameter controls the total spending for the
harm bound under <span class="math inline">\(H_0\)</span>. We set
<code>astar = 0.1</code>, meaning the total probability of crossing the
harm bound under <span class="math inline">\(H_0\)</span> is 10%.</p>
<div class="section level3">
<h3 id="spending-function-specification">Spending function specification<a class="anchor" aria-label="anchor" href="#spending-function-specification"></a>
</h3>
<p>We specify:</p>
<ul>
<li>
<strong>Efficacy bound</strong>: Lan-DeMets O’Brien-Fleming
(<code>sfLDOF</code>) spending function (conservative, spending little
<span class="math inline">\(\alpha\)</span> at early analyses).</li>
<li>
<strong>Futility bound</strong>: Hwang-Shih-DeCani (HSD) spending
function with <span class="math inline">\(\gamma = -2\)</span> (moderate
<span class="math inline">\(\beta\)</span>-spending under <span class="math inline">\(H_1\)</span>).</li>
<li>
<strong>Harm bound</strong>: Lan-DeMets Pocock
(<code>sfLDPocock</code>) spending function (spending under <span class="math inline">\(H_0\)</span> for detecting harm).</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gsSurvCalendar.html">gsSurvCalendar</a></span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.0125</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  astar <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  calendarTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">sfLDOF</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">sfHSD</span>, sflpar <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span>  sfharm <span class="op">=</span> <span class="va">sfLDPocock</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">36</span>,</span>
<span>  hr <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  minfup <span class="op">=</span> <span class="fl">42</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method provides a concise description of
the design:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strwrap.html" class="external-link">strwrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">x8</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">65</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Asymmetric two-sided group sequential design with non-binding</span></span>
<span><span class="co">#&gt; futility and harm bounds, 5 analyses, time-to-event outcome with</span></span>
<span><span class="co">#&gt; sample size 1148 and 657 events required, 90 percent power, 1.25</span></span>
<span><span class="co">#&gt; percent (1-sided) Type I error to detect a hazard ratio of 0.75.</span></span>
<span><span class="co">#&gt; Enrollment and total study durations are assumed to be 18 and 60</span></span>
<span><span class="co">#&gt; months, respectively. Efficacy bounds derived using a Lan-DeMets</span></span>
<span><span class="co">#&gt; O'Brien-Fleming approximation spending function (no parameters).</span></span>
<span><span class="co">#&gt; Futility bounds derived using a Hwang-Shih-DeCani spending</span></span>
<span><span class="co">#&gt; function with gamma = -2. Harm bounds derived using a Lan-DeMets</span></span>
<span><span class="co">#&gt; Pocock approximation spending function.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="detailed-boundary-table">Detailed boundary table<a class="anchor" aria-label="anchor" href="#detailed-boundary-table"></a>
</h3>
<p>The <code><a href="../reference/gsBoundSummary.html">gsBoundSummary()</a></code> function produces a tabular summary
with columns for each boundary. By default, <code>B-value</code>,
<code>Spending</code>, <code>CP</code>, <code>CP H1</code>, and
<code>PP</code> are excluded. We note that for the first interim
analysis, the efficacy bound is so extreme it is effectively impossible
to cross. However, the harm and futility bounds are more moderate,
allowing for early stopping if there is evidence of harm or futility.
The futility bound is an indicator of why bounds are often non-binding —
the futility bound is not intended to be a strict stopping rule, but
rather a signal that the trial may be unlikely to succeed if it
continues. Crossing the harm bound is a stronger indication that the
treatment may be harmful, and the trial should be at least paused with a
recommendation to review the safety and other endpoint data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">x8</span><span class="op">)</span></span>
<span><span class="co">#&gt; Method: LachinFoulkes </span></span>
<span><span class="co">#&gt;     Analysis               Value    Harm Futility Efficacy</span></span>
<span><span class="co">#&gt;    IA 1: 11%                   Z -2.1121  -1.4408   7.4336</span></span>
<span><span class="co">#&gt;       N: 766         p (1-sided)  0.9827   0.9252   0.0000</span></span>
<span><span class="co">#&gt;   Events: 73        ~HR at bound  1.6434   1.4034   0.1740</span></span>
<span><span class="co">#&gt;    Month: 12    P(Cross) if HR=1  0.0173   0.0748   0.0000</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0039   0.0000</span></span>
<span><span class="co">#&gt;    IA 2: 38%                   Z -1.7667   0.1212   3.8622</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9614   0.4518   0.0001</span></span>
<span><span class="co">#&gt;  Events: 253        ~HR at bound  1.2491   0.9849   0.6149</span></span>
<span><span class="co">#&gt;    Month: 24    P(Cross) if HR=1  0.0507   0.5554   0.0001</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0181   0.0574</span></span>
<span><span class="co">#&gt;    IA 3: 63%                   Z -1.7256   1.0566   2.9347</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9578   0.1454   0.0017</span></span>
<span><span class="co">#&gt;  Events: 416        ~HR at bound  1.1846   0.9015   0.7497</span></span>
<span><span class="co">#&gt;    Month: 36    P(Cross) if HR=1  0.0736   0.8641   0.0017</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0398   0.4990</span></span>
<span><span class="co">#&gt;    IA 4: 83%                   Z -1.7170   1.7357   2.5278</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9570   0.0413   0.0057</span></span>
<span><span class="co">#&gt;  Events: 548        ~HR at bound  1.1580   0.8622   0.8057</span></span>
<span><span class="co">#&gt;    Month: 48    P(Cross) if HR=1  0.0890   0.9631   0.0062</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0675   0.7996</span></span>
<span><span class="co">#&gt;        Final                   Z -1.7149   2.3072   2.3072</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9568   0.0105   0.0105</span></span>
<span><span class="co">#&gt;  Events: 657        ~HR at bound  1.1433   0.8352   0.8352</span></span>
<span><span class="co">#&gt;    Month: 60    P(Cross) if HR=1  0.1000   0.9888   0.0112</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.1000   0.9000</span></span></code></pre></div>
<p>Conditional power (CP, CP H1) and predictive power (PP) can also be
included in the summary. Below we show the full table with all
statistics, including conditional and predictive power at each
boundary:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">x8</span>, exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Method: LachinFoulkes </span></span>
<span><span class="co">#&gt;     Analysis               Value    Harm Futility Efficacy</span></span>
<span><span class="co">#&gt;    IA 1: 11%                   Z -2.1121  -1.4408   7.4336</span></span>
<span><span class="co">#&gt;       N: 766         p (1-sided)  0.9827   0.9252   0.0000</span></span>
<span><span class="co">#&gt;   Events: 73        ~HR at bound  1.6434   1.4034   0.1740</span></span>
<span><span class="co">#&gt;    Month: 12            Spending  0.0173   0.0039   0.0000</span></span>
<span><span class="co">#&gt;                          B-value -0.7011  -0.4782   2.4674</span></span>
<span><span class="co">#&gt;                               CP  0.0000   0.0000   1.0000</span></span>
<span><span class="co">#&gt;                            CP H1  0.4619   0.5942   1.0000</span></span>
<span><span class="co">#&gt;                               PP  0.0011   0.0097   1.0000</span></span>
<span><span class="co">#&gt;                 P(Cross) if HR=1  0.0173   0.0748   0.0000</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0039   0.0000</span></span>
<span><span class="co">#&gt;    IA 2: 38%                   Z -1.7667   0.1212   3.8622</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9614   0.4518   0.0001</span></span>
<span><span class="co">#&gt;  Events: 253        ~HR at bound  1.2491   0.9849   0.6149</span></span>
<span><span class="co">#&gt;    Month: 24            Spending  0.0334   0.0143   0.0001</span></span>
<span><span class="co">#&gt;                          B-value -1.0954   0.0751   2.3947</span></span>
<span><span class="co">#&gt;                               CP  0.0000   0.0024   1.0000</span></span>
<span><span class="co">#&gt;                            CP H1  0.0097   0.4033   0.9994</span></span>
<span><span class="co">#&gt;                               PP  0.0000   0.0358   0.9994</span></span>
<span><span class="co">#&gt;                 P(Cross) if HR=1  0.0507   0.5554   0.0001</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0181   0.0574</span></span>
<span><span class="co">#&gt;    IA 3: 63%                   Z -1.7256   1.0566   2.9347</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9578   0.1454   0.0017</span></span>
<span><span class="co">#&gt;  Events: 416        ~HR at bound  1.1846   0.9015   0.7497</span></span>
<span><span class="co">#&gt;    Month: 36            Spending  0.0229   0.0217   0.0016</span></span>
<span><span class="co">#&gt;                          B-value -1.3725   0.8404   2.3343</span></span>
<span><span class="co">#&gt;                               CP  0.0000   0.0396   0.9928</span></span>
<span><span class="co">#&gt;                            CP H1  0.0000   0.3449   0.9928</span></span>
<span><span class="co">#&gt;                               PP  0.0000   0.0776   0.9759</span></span>
<span><span class="co">#&gt;                 P(Cross) if HR=1  0.0736   0.8641   0.0017</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0398   0.4990</span></span>
<span><span class="co">#&gt;    IA 4: 83%                   Z -1.7170   1.7357   2.5278</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9570   0.0413   0.0057</span></span>
<span><span class="co">#&gt;  Events: 548        ~HR at bound  1.1580   0.8622   0.8057</span></span>
<span><span class="co">#&gt;    Month: 48            Spending  0.0154   0.0277   0.0046</span></span>
<span><span class="co">#&gt;                          B-value -1.5689   1.5860   2.3098</span></span>
<span><span class="co">#&gt;                               CP  0.0000   0.1578   0.8708</span></span>
<span><span class="co">#&gt;                            CP H1  0.0000   0.3906   0.9337</span></span>
<span><span class="co">#&gt;                               PP  0.0000   0.1793   0.8485</span></span>
<span><span class="co">#&gt;                 P(Cross) if HR=1  0.0890   0.9631   0.0062</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.0675   0.7996</span></span>
<span><span class="co">#&gt;        Final                   Z -1.7149   2.3072   2.3072</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)  0.9568   0.0105   0.0105</span></span>
<span><span class="co">#&gt;  Events: 657        ~HR at bound  1.1433   0.8352   0.8352</span></span>
<span><span class="co">#&gt;    Month: 60            Spending  0.0110   0.0325   0.0062</span></span>
<span><span class="co">#&gt;                          B-value -1.7149   2.3072   2.3072</span></span>
<span><span class="co">#&gt;                 P(Cross) if HR=1  0.1000   0.9888   0.0112</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0004   0.1000   0.9000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interpreting-the-boundaries">Interpreting the boundaries<a class="anchor" aria-label="anchor" href="#interpreting-the-boundaries"></a>
</h3>
<p>The design has five analyses at calendar times of 12, 24, 36, 48, and
60 months. At each analysis, the test statistic (Z-value) is compared
against three boundaries:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Analysis <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">x8</span><span class="op">$</span><span class="va">k</span>,</span>
<span>  Month <span class="op">=</span> <span class="va">x8</span><span class="op">$</span><span class="cn">T</span>,</span>
<span>  Events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">n.I</span><span class="op">)</span>,</span>
<span>  Harm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">harm</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  Futility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  Efficacy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">bounds</span>, caption <span class="op">=</span> <span class="st">"Z-value boundaries at each analysis"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Z-value boundaries at each analysis</caption>
<thead><tr class="header">
<th align="right">Analysis</th>
<th align="right">Month</th>
<th align="right">Events</th>
<th align="right">Harm</th>
<th align="right">Futility</th>
<th align="right">Efficacy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">12</td>
<td align="right">73</td>
<td align="right">-2.11</td>
<td align="right">-1.44</td>
<td align="right">7.43</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">24</td>
<td align="right">253</td>
<td align="right">-1.77</td>
<td align="right">0.12</td>
<td align="right">3.86</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">36</td>
<td align="right">416</td>
<td align="right">-1.73</td>
<td align="right">1.06</td>
<td align="right">2.93</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">48</td>
<td align="right">548</td>
<td align="right">-1.72</td>
<td align="right">1.74</td>
<td align="right">2.53</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">60</td>
<td align="right">657</td>
<td align="right">-1.71</td>
<td align="right">2.31</td>
<td align="right">2.31</td>
</tr>
</tbody>
</table>
<p><strong>Decision rules at each analysis:</strong></p>
<ul>
<li>If <span class="math inline">\(Z &gt;\)</span> efficacy bound: Stop
for efficacy (reject <span class="math inline">\(H_0\)</span>).</li>
<li>If futility bound <span class="math inline">\(&lt; Z \leq\)</span>
efficacy bound: Continue the trial.</li>
<li>If harm bound <span class="math inline">\(&lt; Z \leq\)</span>
futility bound: Stop for futility.</li>
<li>If <span class="math inline">\(Z \leq\)</span> harm bound: Stop for
harm.</li>
</ul>
<p>Note that the harm bound is always at or below the futility bound. At
early analyses, the harm and futility bounds may coincide when the harm
spending function has not yet allocated sufficient spending to
differentiate them.</p>
</div>
<div class="section level3">
<h3 id="boundary-crossing-probabilities">Boundary crossing probabilities<a class="anchor" aria-label="anchor" href="#boundary-crossing-probabilities"></a>
</h3>
<p>We examine the operating characteristics under two scenarios: no
treatment effect (HR = 1, i.e., under <span class="math inline">\(H_0\)</span>) and the design alternative (HR =
0.75).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">probs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Under H0 (HR=1)"</span>, <span class="va">x8</span><span class="op">$</span><span class="va">k</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Under H1 (HR=0.75)"</span>, <span class="va">x8</span><span class="op">$</span><span class="va">k</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Analysis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">x8</span><span class="op">$</span><span class="va">k</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  Month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="cn">T</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  `P(Efficacy)` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  `P(Futility)` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  `P(Harm)` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">harm</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">harm</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">probs</span>, digits <span class="op">=</span> <span class="fl">4</span>, caption <span class="op">=</span> <span class="st">"Cumulative boundary crossing probabilities"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Cumulative boundary crossing probabilities</caption>
<colgroup>
<col width="28%">
<col width="13%">
<col width="9%">
<col width="18%">
<col width="18%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">Scenario</th>
<th align="right">Analysis</th>
<th align="right">Month</th>
<th align="right">P(Efficacy)</th>
<th align="right">P(Futility)</th>
<th align="right">P(Harm)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Under H0 (HR=1)</td>
<td align="right">1</td>
<td align="right">12</td>
<td align="right">0.0000</td>
<td align="right">0.0748</td>
<td align="right">0.0173</td>
</tr>
<tr class="even">
<td align="left">Under H0 (HR=1)</td>
<td align="right">2</td>
<td align="right">24</td>
<td align="right">0.0001</td>
<td align="right">0.5554</td>
<td align="right">0.0507</td>
</tr>
<tr class="odd">
<td align="left">Under H0 (HR=1)</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">0.0017</td>
<td align="right">0.8641</td>
<td align="right">0.0736</td>
</tr>
<tr class="even">
<td align="left">Under H0 (HR=1)</td>
<td align="right">4</td>
<td align="right">48</td>
<td align="right">0.0062</td>
<td align="right">0.9631</td>
<td align="right">0.0890</td>
</tr>
<tr class="odd">
<td align="left">Under H0 (HR=1)</td>
<td align="right">5</td>
<td align="right">60</td>
<td align="right">0.0112</td>
<td align="right">0.9888</td>
<td align="right">0.1000</td>
</tr>
<tr class="even">
<td align="left">Under H1 (HR=0.75)</td>
<td align="right">1</td>
<td align="right">12</td>
<td align="right">0.0000</td>
<td align="right">0.0039</td>
<td align="right">0.0004</td>
</tr>
<tr class="odd">
<td align="left">Under H1 (HR=0.75)</td>
<td align="right">2</td>
<td align="right">24</td>
<td align="right">0.0574</td>
<td align="right">0.0181</td>
<td align="right">0.0004</td>
</tr>
<tr class="even">
<td align="left">Under H1 (HR=0.75)</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">0.4990</td>
<td align="right">0.0398</td>
<td align="right">0.0004</td>
</tr>
<tr class="odd">
<td align="left">Under H1 (HR=0.75)</td>
<td align="right">4</td>
<td align="right">48</td>
<td align="right">0.7996</td>
<td align="right">0.0675</td>
<td align="right">0.0004</td>
</tr>
<tr class="even">
<td align="left">Under H1 (HR=0.75)</td>
<td align="right">5</td>
<td align="right">60</td>
<td align="right">0.9000</td>
<td align="right">0.1000</td>
<td align="right">0.0004</td>
</tr>
</tbody>
</table>
<p>Under <span class="math inline">\(H_0\)</span>, the cumulative
probability of crossing the harm bound across all analyses is
approximately 0.1, reflecting the spending allocated to the harm
boundary. Under <span class="math inline">\(H_1\)</span> (HR = 0.75),
crossing the harm bound is very unlikely (4^{-4}), since the treatment
is beneficial.</p>
</div>
<div class="section level3">
<h3 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h3>
<p>All standard <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> types are supported for
<code>test.type = 7</code> and <code>8</code> designs, with a third line
(or set of lines) shown for the harm bound.</p>
<div class="section level4">
<h4 id="z-value-boundaries">Z-value boundaries<a class="anchor" aria-label="anchor" href="#z-value-boundaries"></a>
</h4>
<p>The default plot shows Z-value boundaries at each analysis. Three
boundaries are displayed: efficacy (upper), futility (lower), and harm
(below futility).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x8</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="HarmBound_files/figure-html/unnamed-chunk-9-1.svg" class="r-plt" alt="Z-value boundaries for non-binding harm bound design" width="80%"><p class="caption">
Z-value boundaries for non-binding harm bound design
</p>
</div>
</div>
<div class="section level4">
<h4 id="boundary-crossing-probabilities-1">Boundary crossing probabilities<a class="anchor" aria-label="anchor" href="#boundary-crossing-probabilities-1"></a>
</h4>
<p>The power plot (<code>plottype = 2</code>) shows cumulative boundary
crossing probabilities as a function of the treatment effect. Three sets
of lines appear: upper bound (cumulative efficacy crossing probability),
1-Futility bound, and 1-Harm bound. The harm lines are above the
futility lines because the probability of crossing the harm bound is
less than or equal to the probability of crossing the futility bound. We
note that when the underlying treatment effect favors control, the high
probability of crossing the harm bound indicates that the harm bound is
sensitive and serves its intended purpose</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x8</span>, plottype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="HarmBound_files/figure-html/unnamed-chunk-10-1.svg" class="r-plt" alt="Boundary crossing probabilities for non-binding harm bound design" width="80%"><p class="caption">
Boundary crossing probabilities for non-binding harm bound design
</p>
</div>
</div>
<div class="section level4">
<h4 id="approximate-treatment-effect-at-boundaries">Approximate treatment effect at boundaries<a class="anchor" aria-label="anchor" href="#approximate-treatment-effect-at-boundaries"></a>
</h4>
<p>The effect size plot (<code>plottype = 3</code>) shows the
approximate treatment effect at each boundary. For survival designs,
this is expressed as the approximate hazard ratio at the boundary.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x8</span>, plottype <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="HarmBound_files/figure-html/unnamed-chunk-11-1.svg" class="r-plt" alt="Approximate treatment effect at boundaries" width="80%"><p class="caption">
Approximate treatment effect at boundaries
</p>
</div>
</div>
<div class="section level4">
<h4 id="conditional-power-at-boundaries">Conditional power at boundaries<a class="anchor" aria-label="anchor" href="#conditional-power-at-boundaries"></a>
</h4>
<p>Conditional power (<code>plottype = 4</code>) at each interim
analysis is shown for all three boundaries. This is generally not a very
useful plot.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x8</span>, plottype <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="HarmBound_files/figure-html/unnamed-chunk-12-1.svg" class="r-plt" alt="Conditional power at boundaries" width="80%"><p class="caption">
Conditional power at boundaries
</p>
</div>
</div>
<div class="section level4">
<h4 id="spending-function-plot">Spending function plot<a class="anchor" aria-label="anchor" href="#spending-function-plot"></a>
</h4>
<p>The spending function plot (<code>plottype = 5</code>) shows the
three spending functions: <span class="math inline">\(\alpha\)</span>
(efficacy), <span class="math inline">\(\beta\)</span> (futility), and
harm.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x8</span>, plottype <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="HarmBound_files/figure-html/unnamed-chunk-13-1.svg" class="r-plt" alt="Spending functions for non-binding harm bound design" width="80%"><p class="caption">
Spending functions for non-binding harm bound design
</p>
</div>
</div>
<div class="section level4">
<h4 id="b-values-at-boundaries">B-values at boundaries<a class="anchor" aria-label="anchor" href="#b-values-at-boundaries"></a>
</h4>
<p>B-values (<code>plottype = 7</code>) are Z-values scaled by <span class="math inline">\(\sqrt{t}\)</span> where <span class="math inline">\(t\)</span> is the information fraction. As
discussed by <span class="citation">Proschan, Lan, and Wittes
(2006)</span>, the expected value of B-values increases linearly with
the information fraction under the assumption of a constant treatment
effect (proportional hazards). This linear relationship makes B-values
useful for visual assessment of treatment effect trends across interim
analyses: departures from linearity may suggest non-proportional hazards
or other changes in treatment effect over time. Three boundary lines are
shown: efficacy, futility, and harm.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x8</span>, plottype <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="HarmBound_files/figure-html/unnamed-chunk-14-1.svg" class="r-plt" alt="B-values at boundaries" width="80%"><p class="caption">
B-values at boundaries
</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="design-with-binding-bounds-test-type-7">Design with binding bounds (<code>test.type = 7</code>)<a class="anchor" aria-label="anchor" href="#design-with-binding-bounds-test-type-7"></a>
</h2>
<p>For <code>test.type = 7</code>, both the futility and harm bounds are
<strong>binding</strong> — meaning the computation of the efficacy bound
assumes the trial <em>will</em> stop if either bound is crossed. This
yields a slightly less conservative efficacy bound (easier to cross),
but at the cost of inflated Type I error if the stopping rule is not
strictly followed.</p>
<p>We first create a binding design with <span class="math inline">\(\alpha = 0.0125\)</span> to compare with the
non-binding design above:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gsSurvCalendar.html">gsSurvCalendar</a></span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.0125</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  astar <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  calendarTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">sfLDOF</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">sfHSD</span>, sflpar <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span>  sfharm <span class="op">=</span> <span class="va">sfLDPocock</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">36</span>,</span>
<span>  hr <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  minfup <span class="op">=</span> <span class="fl">42</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="comparing-binding-and-non-binding">Comparing binding and non-binding<a class="anchor" aria-label="anchor" href="#comparing-binding-and-non-binding"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Bound <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Efficacy"</span>, <span class="st">"Futility"</span>, <span class="st">"Harm"</span><span class="op">)</span>,</span>
<span>  `Binding (type 7)` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x7</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x7</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x7</span><span class="op">$</span><span class="va">harm</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  `Non-binding (type 8)` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x8</span><span class="op">$</span><span class="va">harm</span><span class="op">$</span><span class="va">bound</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">comparison</span>, caption <span class="op">=</span> <span class="st">"Comparison of binding vs. non-binding Z-value boundaries"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Comparison of binding vs. non-binding Z-value
boundaries</caption>
<colgroup>
<col width="10%">
<col width="44%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th align="left">Bound</th>
<th align="left">Binding (type 7)</th>
<th align="left">Non-binding (type 8)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Efficacy</td>
<td align="left">7.434, 3.862, 2.934, 2.523, 2.248</td>
<td align="left">7.434, 3.862, 2.935, 2.528, 2.307</td>
</tr>
<tr class="even">
<td align="left">Futility</td>
<td align="left">-1.458, 0.09, 1.016, 1.689, 2.248</td>
<td align="left">-1.441, 0.121, 1.057, 1.736, 2.307</td>
</tr>
<tr class="odd">
<td align="left">Harm</td>
<td align="left">-2.112, -1.767, -1.726, -1.717, -1.715</td>
<td align="left">-2.112, -1.767, -1.726, -1.717, -1.715</td>
</tr>
</tbody>
</table>
<p>Note that the efficacy bounds for <code>test.type = 7</code>
(binding) are slightly lower (easier to cross) than for
<code>test.type = 8</code> (non-binding). The maximum number of events
for <code>test.type = 7</code> (639) is also slightly smaller than for
<code>test.type = 8</code> (657), reflecting the assumption that the
trial will stop at the lower bounds.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">x7</span><span class="op">)</span></span>
<span><span class="co">#&gt; Method: LachinFoulkes </span></span>
<span><span class="co">#&gt;     Analysis               Value    Harm Futility Efficacy</span></span>
<span><span class="co">#&gt;    IA 1: 11%                   Z -2.1121  -1.4578   7.4336</span></span>
<span><span class="co">#&gt;       N: 746         p (1-sided)  0.9827   0.9275   0.0000</span></span>
<span><span class="co">#&gt;   Events: 71        ~HR at bound  1.6550   1.4158   0.1698</span></span>
<span><span class="co">#&gt;    Month: 12    P(Cross) if HR=1  0.0173   0.0725   0.0000</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0005   0.0039   0.0000</span></span>
<span><span class="co">#&gt;    IA 2: 38%                   Z -1.7667   0.0895   3.8622</span></span>
<span><span class="co">#&gt;      N: 1118         p (1-sided)  0.9614   0.4643   0.0001</span></span>
<span><span class="co">#&gt;  Events: 246        ~HR at bound  1.2531   0.9886   0.6107</span></span>
<span><span class="co">#&gt;    Month: 24    P(Cross) if HR=1  0.0507   0.5430   0.0001</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0005   0.0181   0.0539</span></span>
<span><span class="co">#&gt;    IA 3: 63%                   Z -1.7256   1.0159   2.9344</span></span>
<span><span class="co">#&gt;      N: 1118         p (1-sided)  0.9578   0.1548   0.0017</span></span>
<span><span class="co">#&gt;  Events: 404        ~HR at bound  1.1874   0.9038   0.7467</span></span>
<span><span class="co">#&gt;    Month: 36    P(Cross) if HR=1  0.0736   0.8551   0.0017</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0005   0.0398   0.4829</span></span>
<span><span class="co">#&gt;    IA 4: 83%                   Z -1.7170   1.6890   2.5229</span></span>
<span><span class="co">#&gt;      N: 1118         p (1-sided)  0.9570   0.0456   0.0058</span></span>
<span><span class="co">#&gt;  Events: 533        ~HR at bound  1.1604   0.8639   0.8037</span></span>
<span><span class="co">#&gt;    Month: 48    P(Cross) if HR=1  0.0890   0.9592   0.0063</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0005   0.0675   0.7881</span></span>
<span><span class="co">#&gt;        Final                   Z -1.7149   2.2480   2.2480</span></span>
<span><span class="co">#&gt;      N: 1118         p (1-sided)  0.9568   0.0123   0.0123</span></span>
<span><span class="co">#&gt;  Events: 639        ~HR at bound  1.1454   0.8370   0.8370</span></span>
<span><span class="co">#&gt;    Month: 60    P(Cross) if HR=1  0.1000   0.9875   0.0125</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75  0.0005   0.1000   0.9000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="efficacy-bounds-at-alternate-alpha-levels">Efficacy bounds at alternate <span class="math inline">\(\alpha\)</span> levels<a class="anchor" aria-label="anchor" href="#efficacy-bounds-at-alternate-alpha-levels"></a>
</h3>
<p>The <code><a href="../reference/gsBoundSummary.html">gsBoundSummary()</a></code> function accepts an
<code>alpha</code> argument to display efficacy bounds at one or more
alternate <span class="math inline">\(\alpha\)</span> levels alongside
the original design. Here we show the non-binding design
(<code>x8</code>) with efficacy bounds for both <span class="math inline">\(\alpha = 0.0125\)</span> (the design level) and
<span class="math inline">\(\alpha = 0.025\)</span>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">x8</span>, alpha <span class="op">=</span> <span class="fl">0.025</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis               Value α=0.0125 α=0.025 Futility    Harm</span></span>
<span><span class="co">#&gt;    IA 1: 11%                   Z   7.4336  6.6513  -1.4408 -2.1121</span></span>
<span><span class="co">#&gt;       N: 766         p (1-sided)   0.0000  0.0000   0.9252  0.9827</span></span>
<span><span class="co">#&gt;   Events: 73        ~HR at bound   0.1740  0.2092   1.4034  1.6434</span></span>
<span><span class="co">#&gt;    Month: 12    P(Cross) if HR=1   0.0000  0.0000   0.0748  0.0173</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75   0.0000  0.0000   0.0039  0.0004</span></span>
<span><span class="co">#&gt;    IA 2: 38%                   Z   3.8622  3.4312   0.1212 -1.7667</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)   0.0001  0.0003   0.4518  0.9614</span></span>
<span><span class="co">#&gt;  Events: 253        ~HR at bound   0.6149  0.6492   0.9849  1.2491</span></span>
<span><span class="co">#&gt;    Month: 24    P(Cross) if HR=1   0.0001  0.0003   0.5554  0.0507</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75   0.0574  0.1259   0.0181  0.0004</span></span>
<span><span class="co">#&gt;    IA 3: 63%                   Z   2.9347  2.5948   1.0566 -1.7256</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)   0.0017  0.0047   0.1454  0.9578</span></span>
<span><span class="co">#&gt;  Events: 416        ~HR at bound   0.7497  0.7751   0.9015  1.1846</span></span>
<span><span class="co">#&gt;    Month: 36    P(Cross) if HR=1   0.0017  0.0048   0.8641  0.0736</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75   0.4990  0.6323   0.0398  0.0004</span></span>
<span><span class="co">#&gt;    IA 4: 83%                   Z   2.5278  2.2359   1.7357 -1.7170</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)   0.0057  0.0127   0.0413  0.9570</span></span>
<span><span class="co">#&gt;  Events: 548        ~HR at bound   0.8057  0.8261   0.8622  1.1580</span></span>
<span><span class="co">#&gt;    Month: 48    P(Cross) if HR=1   0.0062  0.0138   0.9631  0.0890</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75   0.7996  0.8684   0.0675  0.0004</span></span>
<span><span class="co">#&gt;        Final                   Z   2.3072  2.0432   2.3072 -1.7149</span></span>
<span><span class="co">#&gt;      N: 1148         p (1-sided)   0.0105  0.0205   0.0105  0.9568</span></span>
<span><span class="co">#&gt;  Events: 657        ~HR at bound   0.8352  0.8526   0.8352  1.1433</span></span>
<span><span class="co">#&gt;    Month: 60    P(Cross) if HR=1   0.0112  0.0201   0.9888  0.1000</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.75   0.9000  0.9218   0.1000  0.0004</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="practical-considerations">Practical considerations<a class="anchor" aria-label="anchor" href="#practical-considerations"></a>
</h2>
<div class="section level3">
<h3 id="choice-of-spending-functions">Choice of spending functions<a class="anchor" aria-label="anchor" href="#choice-of-spending-functions"></a>
</h3>
<p>The choice of spending functions for the three boundaries should
reflect regulatory and scientific considerations:</p>
<ul>
<li>
<strong>Efficacy</strong>: A conservative spending function such as
Lan-DeMets O’Brien-Fleming (<code>sfLDOF</code>) is typical, spending
very little <span class="math inline">\(\alpha\)</span> at early interim
analyses when limited information is available.</li>
<li>
<strong>Futility</strong>: Moderate spending (e.g., HSD with <span class="math inline">\(\gamma = -2\)</span>) allows early stopping for
futility when the treatment effect is clearly absent.</li>
<li>
<strong>Harm</strong>: The Lan-DeMets Pocock
(<code>sfLDPocock</code>) spending function provides more aggressive
spending at early analyses, which is appropriate for harm monitoring
since detecting a detrimental effect early is critical for patient
safety.</li>
</ul>
</div>
<div class="section level3">
<h3 id="interpreting-the-harm-bound">Interpreting the harm bound<a class="anchor" aria-label="anchor" href="#interpreting-the-harm-bound"></a>
</h3>
<p>The harm bound is intended so that if a small observed p-value
<em>favoring control</em> is observed, the harm bound will be crossed.
In terms of the test statistic, a negative Z-value indicates that the
hazard rate is higher in the experimental arm than the control arm —
i.e., the experimental treatment appears to be worsening survival. When
the Z-value falls below the harm bound, this constitutes a statistical
signal that the treatment may be harmful, and the trial should be
stopped with a recommendation to review the safety data.</p>
<p>The harm spending is computed under <span class="math inline">\(H_0\)</span> (no treatment effect), reflecting the
probability of observing an apparent harmful effect <em>by chance</em>
when there is actually no true effect. This controls the probability of
a false harm signal.</p>
</div>
<div class="section level3">
<h3 id="harm-bound-capping">Harm bound capping<a class="anchor" aria-label="anchor" href="#harm-bound-capping"></a>
</h3>
<p>In the implementation, the harm bound is automatically
<strong>capped</strong> so it never exceeds the futility bound. This
ensures the ordering: harm bound <span class="math inline">\(\leq\)</span> futility bound <span class="math inline">\(\leq\)</span> efficacy bound at every
analysis.</p>
</div>
<div class="section level3">
<h3 id="when-to-use-test-type-7-vs--test-type-8">When to use <code>test.type = 7</code>
vs. <code>test.type = 8</code><a class="anchor" aria-label="anchor" href="#when-to-use-test-type-7-vs--test-type-8"></a>
</h3>
<ul>
<li>
<strong><code>test.type = 8</code> (non-binding)</strong> is most
often preferred in practice. Regulators will generally expect
non-binding bounds, which preserve Type I error control regardless of
whether the stopping rules are strictly followed. Since Data Monitoring
Committees (DMCs) typically retain discretion to continue or stop a
trial based on the totality of the evidence, the non-binding approach
ensures that the statistical validity of the efficacy analysis is
maintained even if a futility or harm boundary is crossed but the trial
continues.</li>
<li>
<strong><code>test.type = 7</code> (binding)</strong> is appropriate
when there is a firm commitment to stop the trial upon crossing any
boundary. This provides a small efficiency gain (slightly easier
efficacy bounds and fewer required events) but requires strict protocol
adherence. If the trial does not stop after crossing a binding boundary,
Type I error may be inflated.</li>
</ul>
<p>In most regulatory settings, <code>test.type = 8</code> is the safer
and more common choice.</p>
</div>
<div class="section level3">
<h3 id="why-a-separate-binding-harm-non-binding-futility-option-is-unnecessary">Why a separate “binding harm / non-binding futility” option is
unnecessary<a class="anchor" aria-label="anchor" href="#why-a-separate-binding-harm-non-binding-futility-option-is-unnecessary"></a>
</h3>
<p>One might consider a design where the futility bound is non-binding
but the harm bound is binding. In practice, such a distinction has no
computational effect. The harm bound is computed <em>after</em> the
efficacy and futility bounds are set and does not feed back into those
computations. When the futility bound is non-binding (as in
<code>test.type = 8</code>), the efficacy bound is computed ignoring all
lower-bound stopping. Since the harm bound lies below the futility
bound, making the harm bound “binding” while the futility bound remains
non-binding would not change the efficacy boundary, the required number
of events, the final Z-values, or the p-values — the results are
identical.</p>
<p>The only difference would be in <em>interpretation</em>: whether
crossing the harm bound is treated as a firm commitment to stop or as
advisory information for the DMC. This interpretive distinction does not
require a separate <code>test.type</code>; it can be addressed in the
protocol language and the DMC charter. The <code>test.type = 8</code>
framework already provides full flexibility for the DMC to treat the
harm bound as either advisory or mandatory.</p>
</div>
<div class="section level3">
<h3 id="adjusting-the-boundaries">Adjusting the boundaries<a class="anchor" aria-label="anchor" href="#adjusting-the-boundaries"></a>
</h3>
<p>The boundaries are adjustable through several design parameters:</p>
<ul>
<li>
<strong>Alternate <code>astar</code></strong>: Controls the Type I
error allocated to excess OS harm detection.</li>
<li>
<strong>Alternate spending functions</strong>: Different spending
functions for efficacy, futility, and harm boundaries change the
aggressiveness of each boundary across analyses.</li>
<li>
<strong>Alternate timing of analyses</strong>: Changing the calendar
times of interim analyses shifts the information available at each
look.</li>
</ul>
<p>Regardless of the statistical design, bounds must be clinically,
ethically, and statistically sound. As previously noted, this approach
is one option to address the regulatory expectation for OS harm
monitoring, but other approaches may also be considered.</p>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-PLWBook" class="csl-entry">
Proschan, Michael A., K. K. Gordon Lan, and Janet Turk Wittes. 2006.
<em>Statistical Monitoring of Clinical Trials: A Unified Approach</em>.
New York, NY: Springer.
</div>
<div id="ref-FDAOS2024" class="csl-entry">
U.S. Food and Drug Administration. 2024. <span>“Assessment of Overall
Survival Evidence in Support of Accelerated Approval of Oncology
Therapeutics: Draft Guidance for Industry.”</span> <a href="https://www.fda.gov/media/188274/download" class="external-link uri">https://www.fda.gov/media/188274/download</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
