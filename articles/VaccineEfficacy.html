<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Vaccine efficacy trial design • gsDesign</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vaccine efficacy trial design">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.6.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Vaccine efficacy trial design</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesign/blob/v3.6.8/vignettes/VaccineEfficacy.Rmd" class="external-link"><code>vignettes/VaccineEfficacy.Rmd</code></a></small>
      <div class="d-none name"><code>VaccineEfficacy.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://keaven.github.io/gsDesign/">gsDesign</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article explores a method of approximating a design using the
exact binomial method of <span class="citation">Chan and Bohidar
(1998)</span> by a time-to-event design using the method of <span class="citation">Lachin and Foulkes (1986)</span>. This allows use of
spending functions to derive boundaries for the exact method. The
time-to-event design can not only be used to set boundaries for the
<span class="citation">Chan and Bohidar (1998)</span> method, but to
allow specification of enrollment duration and study duration to
determine enrollment rates and sample size required. This vignette also
illustrates the concept of super-superiority often used in prevention
studies. Finally, since this procedure is new as of November, 2023 we
suggest checks and potential revisions to spending function choices to
optimize design boundaries.</p>
</div>
<div class="section level2">
<h2 id="parameterization">Parameterization<a class="anchor" aria-label="anchor" href="#parameterization"></a>
</h2>
<p>We begin with the assumption that we will a require a large sample
size due to an endpoint with a small incidence rate. This could apply to
a vaccine study or other prevention study with a relatively small number
of events expected.</p>
<div class="section level3">
<h3 id="exact-binomial-approach">Exact binomial approach<a class="anchor" aria-label="anchor" href="#exact-binomial-approach"></a>
</h3>
<p>Paralleling the notation of <span class="citation">Chan and Bohidar
(1998)</span>, we assume <span class="math inline">\(N_C, P_C\)</span>
to be binomial sample size and probability of an event for each
participant assigned to control; for the experimental treatment group,
these are labeled <span class="math inline">\(N_E, P_E\)</span>. Vaccine
efficacy is defined as</p>
<p><span class="math display">\[\pi = 1 - P_E/P_C.\]</span></p>
<p>The parameter <span class="math inline">\(\pi\)</span> is often
labeled as VE for vaccine efficacy. Taking into account the
randomization ratio <span class="math inline">\(r\)</span> (experimental
/ control) the approximate probability that any given event is in the
experimental group is</p>
<p><span class="math display">\[
\begin{aligned}
p &amp;= rP_E/(rP_E+ P_C)\\
  &amp;= r/(r + P_C/P_E)\\
  &amp;= r/(r + (1-\pi)^{-1}).
\end{aligned}
\]</span></p>
<p>As noted, this approximation is dependent on a large sample size and
small probability of events. The above can be inverted to obtain</p>
<p><span class="math display">\[\pi = 1 - \frac{1}{r(1/p-1)}.
\]</span></p>
<p>For our example of interest, we begin with an alternate hypothesis
vaccine efficacy <span class="math inline">\(\pi_1 = 0.7\)</span> and
experimental:control randomization ratio <span class="math inline">\(r=3\)</span>. This converts to an alternate
hypothesis (approximate) probability that any event is in the
experimental group of</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pi1</span> <span class="op">&lt;-</span> <span class="fl">.7</span></span>
<span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">ratio</span> <span class="op">/</span> <span class="op">(</span><span class="va">ratio</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">pi1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p1</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.4736842</span></span></code></pre>
<p>We use the inversion formula to revert this to <span class="math inline">\(\pi_1 = 0.7\)</span></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="va">ratio</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="va">p1</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.7</span></span></code></pre>
<p>Letting the null hypothesis vaccine efficacy be <span class="math inline">\(\pi_0 = 0.3\)</span>, our exact binomial null
hypothesis probability that an event is in the experimental group is</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pi0</span> <span class="op">&lt;-</span> <span class="fl">.3</span></span>
<span><span class="va">p0</span> <span class="op">&lt;-</span> <span class="va">ratio</span> <span class="op">/</span> <span class="op">(</span><span class="va">ratio</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">pi0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p0</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.6774194</span></span></code></pre>
<p>We also translate several vaccine efficacy values to proportion of
events in the experimental group:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.6</span>, <span class="fl">.65</span>, <span class="fl">.7</span>, <span class="fl">.75</span>, <span class="fl">.8</span><span class="op">)</span></span>
<span><span class="va">prob_experimental</span> <span class="op">&lt;-</span> <span class="va">ratio</span> <span class="op">/</span> <span class="op">(</span><span class="va">ratio</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">ve</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>VE <span class="op">=</span> <span class="va">ve</span>, <span class="st">"P(Experimental)"</span> <span class="op">=</span> <span class="va">prob_experimental</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>data_row.padding <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/px.html" class="external-link">px</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">2</span>, decimals <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div id="mwlefoodfi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mwlefoodfi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mwlefoodfi thead, #mwlefoodfi tbody, #mwlefoodfi tfoot, #mwlefoodfi tr, #mwlefoodfi td, #mwlefoodfi th {
  border-style: none;
}

#mwlefoodfi p {
  margin: 0;
  padding: 0;
}

#mwlefoodfi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mwlefoodfi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mwlefoodfi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mwlefoodfi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mwlefoodfi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mwlefoodfi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mwlefoodfi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mwlefoodfi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mwlefoodfi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mwlefoodfi .gt_spanner_row {
  border-bottom-style: hidden;
}

#mwlefoodfi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mwlefoodfi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mwlefoodfi .gt_from_md > :first-child {
  margin-top: 0;
}

#mwlefoodfi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mwlefoodfi .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mwlefoodfi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mwlefoodfi .gt_row_group_first td {
  border-top-width: 2px;
}

#mwlefoodfi .gt_row_group_first th {
  border-top-width: 2px;
}

#mwlefoodfi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mwlefoodfi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mwlefoodfi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_left {
  text-align: left;
}

#mwlefoodfi .gt_center {
  text-align: center;
}

#mwlefoodfi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mwlefoodfi .gt_font_normal {
  font-weight: normal;
}

#mwlefoodfi .gt_font_bold {
  font-weight: bold;
}

#mwlefoodfi .gt_font_italic {
  font-style: italic;
}

#mwlefoodfi .gt_super {
  font-size: 65%;
}

#mwlefoodfi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mwlefoodfi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mwlefoodfi .gt_indent_1 {
  text-indent: 5px;
}

#mwlefoodfi .gt_indent_2 {
  text-indent: 10px;
}

#mwlefoodfi .gt_indent_3 {
  text-indent: 15px;
}

#mwlefoodfi .gt_indent_4 {
  text-indent: 20px;
}

#mwlefoodfi .gt_indent_5 {
  text-indent: 25px;
}

#mwlefoodfi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mwlefoodfi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="VE">VE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="P(Experimental)">P(Experimental)</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="VE" class="gt_row gt_right">0.50</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.600</td>
</tr>
<tr>
<td headers="VE" class="gt_row gt_right">0.60</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.545</td>
</tr>
<tr>
<td headers="VE" class="gt_row gt_right">0.65</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.512</td>
</tr>
<tr>
<td headers="VE" class="gt_row gt_right">0.70</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.474</td>
</tr>
<tr>
<td headers="VE" class="gt_row gt_right">0.75</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.429</td>
</tr>
<tr>
<td headers="VE" class="gt_row gt_right">0.80</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.375</td>
</tr>
</tbody>
</table>
</div>
<p>Chapter 12 of <span class="citation">Jennison and Turnbull
(2000)</span> walks through how to design and analyze such a study using
a fixed or group sequential design. The time-to-event approximation
provides an initial approximation to computing bounds; more importantly,
it provides sample size and study duration approximations that are not
given by the Jennison and Turnbull approach.</p>
</div>
</div>
<div class="section level2">
<h2 id="the-time-to-event-approach">The time-to-event approach<a class="anchor" aria-label="anchor" href="#the-time-to-event-approach"></a>
</h2>
<p>For a time-to-event formulation with exponential failure rates <span class="math inline">\(\lambda_C\)</span> for control and <span class="math inline">\(\lambda_E\)</span> for experimental group assigned
participants, we would define</p>
<p><span class="math display">\[\pi = 1 - \lambda_E /
\lambda_C\]</span></p>
<p>which is 1 minus the hazard ratio often used in time-to-event
studies. In the following we examine how closely the time-to-event
method using asymptotic distributional assumptions can approximate an
appropriate exact binomial design. We will also define a planned number
of events at each of <span class="math inline">\(K\)</span> planned
analyses by <span class="math inline">\(D_k, 1\le k\le K\)</span>.</p>
</div>
<div class="section level2">
<h2 id="generating-a-design">Generating a design<a class="anchor" aria-label="anchor" href="#generating-a-design"></a>
</h2>
<p>We begin by specifying parameters. The <code>alpha</code> and
<code>beta</code> parameters will not be met exactly due to the discrete
group sequential probability calculations performed. The current version
includes only designs that use non-binding futility bounds or no
futility bounds. The design is generated by first using asymptotic
theory for a time-to-event design with specified spending functions.
This design is then adapted to a design using the exact binomial method
of <span class="citation">Chan and Bohidar (1998)</span>. The
randomization ratio (experimental/control) was assumed to be 3:1 as in
the <span class="citation">Logunov et al. (2021)</span> trial.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Type I error</span></span>
<span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Type II error (1 - power)</span></span>
<span><span class="va">k</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="co"># number of analyses in group sequential design</span></span>
<span><span class="va">timing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.45</span>, <span class="fl">.7</span><span class="op">)</span> <span class="co"># Relative timing of interim analyses compared to final</span></span>
<span><span class="va">sfu</span> <span class="op">&lt;-</span> <span class="va">sfHSD</span> <span class="co"># Efficacy bound spending function (Hwang-Shih-DeCani)</span></span>
<span><span class="va">sfupar</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">3</span> <span class="co"># Parameter for efficacy spending function</span></span>
<span><span class="va">sfl</span> <span class="op">&lt;-</span> <span class="va">sfHSD</span> <span class="co"># Futility bound spending function (Hwang-Shih-DeCani)</span></span>
<span><span class="va">sflpar</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">3</span> <span class="co"># Futility bound spending function parameter</span></span>
<span><span class="va">timename</span> <span class="op">&lt;-</span> <span class="st">"Month"</span> <span class="co"># Time unit</span></span>
<span><span class="va">failRate</span> <span class="op">&lt;-</span> <span class="fl">.002</span> <span class="co"># Exponential failure rate</span></span>
<span><span class="va">dropoutRate</span> <span class="op">&lt;-</span> <span class="fl">.0001</span> <span class="co"># Exponential dropout rate</span></span>
<span><span class="va">enrollDuration</span> <span class="op">&lt;-</span> <span class="fl">8</span> <span class="co"># Enrollment duration</span></span>
<span><span class="va">trialDuration</span> <span class="op">&lt;-</span> <span class="fl">24</span> <span class="co"># Planned trial duration</span></span>
<span><span class="va">VE1</span> <span class="op">&lt;-</span> <span class="fl">.7</span> <span class="co"># Alternate hypothesis vaccine efficacy</span></span>
<span><span class="va">VE0</span> <span class="op">&lt;-</span> <span class="fl">.3</span> <span class="co"># Null hypothesis vaccine efficacy</span></span>
<span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="co"># Experimental/Control enrollment ratio</span></span>
<span><span class="va">test.type</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="co"># 1 for one-sided, 4 for non-binding futility</span></span></code></pre></div>
<div class="section level3">
<h3 id="the-time-to-event-design">The time-to-event design<a class="anchor" aria-label="anchor" href="#the-time-to-event-design"></a>
</h3>
<p>Now we generate the design. If resulting alpha and beta do not
satisfy requirements, adjust parameters above until a satisfactory
result is obtained.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Derive Group Sequential Design</span></span>
<span><span class="co"># This determines final sample size</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nSurv.html">gsSurv</a></span><span class="op">(</span></span>
<span>  k <span class="op">=</span> <span class="va">k</span>, test.type <span class="op">=</span> <span class="va">test.type</span>, alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">timing</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">sfu</span>, sfupar <span class="op">=</span> <span class="va">sfupar</span>, sfl <span class="op">=</span> <span class="va">sfl</span>, sflpar <span class="op">=</span> <span class="va">sflpar</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="va">failRate</span>, eta <span class="op">=</span> <span class="va">dropoutRate</span>,</span>
<span>  <span class="co"># Translate vaccine efficacy to HR</span></span>
<span>  hr <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">VE1</span>, hr0 <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">VE0</span>,</span>
<span>  R <span class="op">=</span> <span class="va">enrollDuration</span>, T <span class="op">=</span> <span class="va">trialDuration</span>,</span>
<span>  minfup <span class="op">=</span> <span class="va">trialDuration</span> <span class="op">-</span> <span class="va">enrollDuration</span>, ratio <span class="op">=</span> <span class="va">ratio</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now we convert this to a design with integer event counts at
analyses. This is achieved by rounding interim analysis event counts
from the above design and rounding up the final analysis event count.
This will result in a slight change in event fractions at interim
analyses as well as a slight change from the targeted 90% power. We now
explain the rationale behind the spending function choices. Recall that
the hazard ratio (HR) is 1 minus the VE. The <code>~HR at bound</code>
represents the approximate hazard ratio required to cross a bound. Thus,
small HR’s at the interim analyses along with small cumulative <span class="math inline">\(\alpha\)</span>-spending suggest crossing an
interim efficacy bound would provide a result strong enough to
potentially justify the new treatment. The hazard ratio of ~0.69 (VE ~
0.31) for the interim 1 futility bound mean that the efficacy trend
would be essentially no better than the null hypothesis if the futility
bound were crossed. The second analysis futility bound with approximate
VE of 0.5 would be worth discussion with a data monitoring committee as
well as other planners for the trial; a custom spending function could
be used to set both the first and second interim bounds to desired
levels.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/toInteger.html">toInteger</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">xx</span>,</span>
<span>  tdigits <span class="op">=</span> <span class="fl">1</span>, logdelta <span class="op">=</span> <span class="cn">TRUE</span>, deltaname <span class="op">=</span> <span class="st">"HR"</span>, Nname <span class="op">=</span> <span class="st">"Events"</span>,</span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B-value"</span>, <span class="st">"CP"</span>, <span class="st">"CP H1"</span>, <span class="st">"PP"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Initial group sequential approximation"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Integer event counts at analyses"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>data_row.padding <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/px.html" class="external-link">px</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="eexombwkke" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#eexombwkke table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#eexombwkke thead, #eexombwkke tbody, #eexombwkke tfoot, #eexombwkke tr, #eexombwkke td, #eexombwkke th {
  border-style: none;
}

#eexombwkke p {
  margin: 0;
  padding: 0;
}

#eexombwkke .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#eexombwkke .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#eexombwkke .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#eexombwkke .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#eexombwkke .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#eexombwkke .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#eexombwkke .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#eexombwkke .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#eexombwkke .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#eexombwkke .gt_spanner_row {
  border-bottom-style: hidden;
}

#eexombwkke .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#eexombwkke .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#eexombwkke .gt_from_md > :first-child {
  margin-top: 0;
}

#eexombwkke .gt_from_md > :last-child {
  margin-bottom: 0;
}

#eexombwkke .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#eexombwkke .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#eexombwkke .gt_row_group_first td {
  border-top-width: 2px;
}

#eexombwkke .gt_row_group_first th {
  border-top-width: 2px;
}

#eexombwkke .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#eexombwkke .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#eexombwkke .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#eexombwkke .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#eexombwkke .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_left {
  text-align: left;
}

#eexombwkke .gt_center {
  text-align: center;
}

#eexombwkke .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#eexombwkke .gt_font_normal {
  font-weight: normal;
}

#eexombwkke .gt_font_bold {
  font-weight: bold;
}

#eexombwkke .gt_font_italic {
  font-style: italic;
}

#eexombwkke .gt_super {
  font-size: 65%;
}

#eexombwkke .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#eexombwkke .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#eexombwkke .gt_indent_1 {
  text-indent: 5px;
}

#eexombwkke .gt_indent_2 {
  text-indent: 10px;
}

#eexombwkke .gt_indent_3 {
  text-indent: 15px;
}

#eexombwkke .gt_indent_4 {
  text-indent: 20px;
}

#eexombwkke .gt_indent_5 {
  text-indent: 25px;
}

#eexombwkke .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#eexombwkke div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="4" class="gt_heading gt_title gt_font_normal" style>Initial group sequential approximation</td>
    </tr>
<tr class="gt_heading">
<td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Integer event counts at analyses</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Analysis">Analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Value">Value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Efficacy">Efficacy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Futility">Futility</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="Analysis" class="gt_row gt_left">IA 1: 44%</td>
<td headers="Value" class="gt_row gt_left">Z</td>
<td headers="Efficacy" class="gt_row gt_right">2.6864</td>
<td headers="Futility" class="gt_row gt_right">0.0424</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Events: 3606</td>
<td headers="Value" class="gt_row gt_left">p (1-sided)</td>
<td headers="Efficacy" class="gt_row gt_right">0.0036</td>
<td headers="Futility" class="gt_row gt_right">0.4831</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Events: 30</td>
<td headers="Value" class="gt_row gt_left">~HR at bound</td>
<td headers="Efficacy" class="gt_row gt_right">0.2255</td>
<td headers="Futility" class="gt_row gt_right">0.6876</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Month: 12.8</td>
<td headers="Value" class="gt_row gt_left">Spending</td>
<td headers="Efficacy" class="gt_row gt_right">0.0036</td>
<td headers="Futility" class="gt_row gt_right">0.0144</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.7</td>
<td headers="Efficacy" class="gt_row gt_right">0.0036</td>
<td headers="Futility" class="gt_row gt_right">0.5169</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.3</td>
<td headers="Efficacy" class="gt_row gt_right">0.3231</td>
<td headers="Futility" class="gt_row gt_right">0.0144</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">IA 2: 69%</td>
<td headers="Value" class="gt_row gt_left">Z</td>
<td headers="Efficacy" class="gt_row gt_right">2.4494</td>
<td headers="Futility" class="gt_row gt_right">0.9143</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Events: 3606</td>
<td headers="Value" class="gt_row gt_left">p (1-sided)</td>
<td headers="Efficacy" class="gt_row gt_right">0.0072</td>
<td headers="Futility" class="gt_row gt_right">0.1803</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Events: 47</td>
<td headers="Value" class="gt_row gt_left">~HR at bound</td>
<td headers="Efficacy" class="gt_row gt_right">0.3067</td>
<td headers="Futility" class="gt_row gt_right">0.5144</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Month: 17.9</td>
<td headers="Value" class="gt_row gt_left">Spending</td>
<td headers="Efficacy" class="gt_row gt_right">0.0055</td>
<td headers="Futility" class="gt_row gt_right">0.0220</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.7</td>
<td headers="Efficacy" class="gt_row gt_right">0.0091</td>
<td headers="Futility" class="gt_row gt_right">0.8287</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.3</td>
<td headers="Efficacy" class="gt_row gt_right">0.6455</td>
<td headers="Futility" class="gt_row gt_right">0.0364</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Final</td>
<td headers="Value" class="gt_row gt_left">Z</td>
<td headers="Efficacy" class="gt_row gt_right">2.0296</td>
<td headers="Futility" class="gt_row gt_right">2.0296</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Events: 3606</td>
<td headers="Value" class="gt_row gt_left">p (1-sided)</td>
<td headers="Efficacy" class="gt_row gt_right">0.0212</td>
<td headers="Futility" class="gt_row gt_right">0.0212</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Events: 68</td>
<td headers="Value" class="gt_row gt_left">~HR at bound</td>
<td headers="Efficacy" class="gt_row gt_right">0.3965</td>
<td headers="Futility" class="gt_row gt_right">0.3965</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left">Month: 24.2</td>
<td headers="Value" class="gt_row gt_left">Spending</td>
<td headers="Efficacy" class="gt_row gt_right">0.0159</td>
<td headers="Futility" class="gt_row gt_right">0.0636</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.7</td>
<td headers="Efficacy" class="gt_row gt_right">0.0239</td>
<td headers="Futility" class="gt_row gt_right">0.9761</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.3</td>
<td headers="Efficacy" class="gt_row gt_right">0.9022</td>
<td headers="Futility" class="gt_row gt_right">0.0978</td>
</tr>
</tbody>
</table>
</div>
<p>A textual summary for the design is:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">xx</span>, timeunit <span class="op">=</span> <span class="st">"months"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Asymmetric two-sided group sequential design with non-binding
futility bound, 3 analyses, time-to-event outcome with sample size 3606
and 68 events required, 90 percent power, 2.5 percent (1-sided) Type I
error to detect a hazard ratio of 0.3 with a null hypothesis hazard
ratio of 0.7. Enrollment and total study durations are assumed to be 8
and 24.2 months, respectively. Efficacy bounds derived using a
Hwang-Shih-DeCani spending function with gamma = -3. Futility bounds
derived using a Hwang-Shih-DeCani spending function with gamma = -3.</p>
</div>
</div>
<div class="section level2">
<h2 id="converting-to-an-exact-binomial-design">Converting to an exact binomial design<a class="anchor" aria-label="anchor" href="#converting-to-an-exact-binomial-design"></a>
</h2>
<p>We now convert this to an exact binomial design. The bound counts are
described in this initial table displayed. <code>N</code> is the total
event count, <code>a</code> the maximum number of events in the
experimental group to cross the efficacy bound. For example, if 12 or
fewer of 30 events at interim 1 are in the experimental group the
efficacy bound has been crossed. The futility bound is in
<code>b</code>; at the first interim, if 21 or more of 30 total events
are in the experimental group then the futility bound would be crossed
and the alternate hypothesis could be rejected. The second and third
tables below give probabilities of crossing the upper (futility) and
lower (efficacy) bounds under the null (<code>theta</code> = 0.6774) and
alternate (<code>theta</code> = 0.4737) hypotheses, respectively; these
calculations are done under the exact binomial distribution
assumptions.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/toBinomialExact.html">toBinomialExact</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="combined-summary-table">Combined summary table<a class="anchor" aria-label="anchor" href="#combined-summary-table"></a>
</h3>
<p>We produce a summary table. Code for this is provided in the R
markdown for this vignette provided with the package. This combines
information from the time-to-event design for calendar timing of
analyses (Time) and expected sample size at each analysis (N) along with
bounds and operating characteristics for the design.</p>
<div id="ulbfdpbcyv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ulbfdpbcyv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ulbfdpbcyv thead, #ulbfdpbcyv tbody, #ulbfdpbcyv tfoot, #ulbfdpbcyv tr, #ulbfdpbcyv td, #ulbfdpbcyv th {
  border-style: none;
}

#ulbfdpbcyv p {
  margin: 0;
  padding: 0;
}

#ulbfdpbcyv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ulbfdpbcyv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ulbfdpbcyv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ulbfdpbcyv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ulbfdpbcyv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ulbfdpbcyv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ulbfdpbcyv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ulbfdpbcyv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ulbfdpbcyv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ulbfdpbcyv .gt_spanner_row {
  border-bottom-style: hidden;
}

#ulbfdpbcyv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ulbfdpbcyv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ulbfdpbcyv .gt_from_md > :first-child {
  margin-top: 0;
}

#ulbfdpbcyv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ulbfdpbcyv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ulbfdpbcyv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ulbfdpbcyv .gt_row_group_first td {
  border-top-width: 2px;
}

#ulbfdpbcyv .gt_row_group_first th {
  border-top-width: 2px;
}

#ulbfdpbcyv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ulbfdpbcyv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ulbfdpbcyv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ulbfdpbcyv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ulbfdpbcyv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_left {
  text-align: left;
}

#ulbfdpbcyv .gt_center {
  text-align: center;
}

#ulbfdpbcyv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ulbfdpbcyv .gt_font_normal {
  font-weight: normal;
}

#ulbfdpbcyv .gt_font_bold {
  font-weight: bold;
}

#ulbfdpbcyv .gt_font_italic {
  font-style: italic;
}

#ulbfdpbcyv .gt_super {
  font-size: 65%;
}

#ulbfdpbcyv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ulbfdpbcyv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ulbfdpbcyv .gt_indent_1 {
  text-indent: 5px;
}

#ulbfdpbcyv .gt_indent_2 {
  text-indent: 10px;
}

#ulbfdpbcyv .gt_indent_3 {
  text-indent: 15px;
}

#ulbfdpbcyv .gt_indent_4 {
  text-indent: 20px;
}

#ulbfdpbcyv .gt_indent_5 {
  text-indent: 25px;
}

#ulbfdpbcyv .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ulbfdpbcyv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="16" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Design Bounds and Operating Characteristics</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Analysis">Analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Time">Time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="N">N</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Cases">Cases</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="cases">
        <div class="gt_column_spanner">Experimental Cases at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="vebound">
        <div class="gt_column_spanner">Vaccine Efficacy at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="spend">
        <div class="gt_column_spanner">Error Spending<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="6" scope="colgroup" id="power">
        <div class="gt_column_spanner">Power by Vaccine Efficacy<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span>
</div>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Success">Success</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_efficacy">Efficacy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="alpha">alpha<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="beta">beta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a50%">50%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a60%">60%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a65%">65%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a70%">70%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a75%">75%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a80%">80%</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="Analysis" class="gt_row gt_right">1</td>
<td headers="Time" class="gt_row gt_right">12.9</td>
<td headers="N" class="gt_row gt_right">3602</td>
<td headers="Cases" class="gt_row gt_right">30</td>
<td headers="Success" class="gt_row gt_right">12</td>
<td headers="Futility" class="gt_row gt_right">21</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.78</td>
<td headers="ve_futility" class="gt_row gt_right">0.22</td>
<td headers="alpha" class="gt_row gt_right">0.0016</td>
<td headers="beta" class="gt_row gt_right">0.0103</td>
<td headers="50%" class="gt_row gt_right">0.02</td>
<td headers="60%" class="gt_row gt_right">0.08</td>
<td headers="65%" class="gt_row gt_right">0.15</td>
<td headers="70%" class="gt_row gt_right">0.27</td>
<td headers="75%" class="gt_row gt_right">0.45</td>
<td headers="80%" class="gt_row gt_right">0.69</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_right">2</td>
<td headers="Time" class="gt_row gt_right">17.9</td>
<td headers="N" class="gt_row gt_right">3602</td>
<td headers="Cases" class="gt_row gt_right">47</td>
<td headers="Success" class="gt_row gt_right">23</td>
<td headers="Futility" class="gt_row gt_right">30</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.68</td>
<td headers="ve_futility" class="gt_row gt_right">0.41</td>
<td headers="alpha" class="gt_row gt_right">0.0064</td>
<td headers="beta" class="gt_row gt_right">0.0223</td>
<td headers="50%" class="gt_row gt_right">0.09</td>
<td headers="60%" class="gt_row gt_right">0.27</td>
<td headers="65%" class="gt_row gt_right">0.44</td>
<td headers="70%" class="gt_row gt_right">0.65</td>
<td headers="75%" class="gt_row gt_right">0.84</td>
<td headers="80%" class="gt_row gt_right">0.96</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_right">3</td>
<td headers="Time" class="gt_row gt_right">24.0</td>
<td headers="N" class="gt_row gt_right">3602</td>
<td headers="Cases" class="gt_row gt_right">68</td>
<td headers="Success" class="gt_row gt_right">37</td>
<td headers="Futility" class="gt_row gt_right">38</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.60</td>
<td headers="ve_futility" class="gt_row gt_right">0.58</td>
<td headers="alpha" class="gt_row gt_right">0.0174</td>
<td headers="beta" class="gt_row gt_right">0.0994</td>
<td headers="50%" class="gt_row gt_right">0.21</td>
<td headers="60%" class="gt_row gt_right">0.54</td>
<td headers="65%" class="gt_row gt_right">0.74</td>
<td headers="70%" class="gt_row gt_right">0.90</td>
<td headers="75%" class="gt_row gt_right">0.98</td>
<td headers="80%" class="gt_row gt_right">1.00</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="16">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Experimental case counts to cross between success and futility counts do not stop trial</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="16">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Exact vaccine efficacy required to cross bound</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="16">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Cumulative spending at each analysis</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="16">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span> Cumulative power at each analysis by underlying vaccine efficacy</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="16">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span> alpha-spending for efficacy ignores non-binding futility bound</td>
    </tr>
</tfoot>
</table>
</div>
<p>The initial approximation of bounds for the exact binomial design was
generated from the time-to-event design as follows. First, we computed
nominal p-value 1-sided bounds under the null hypothesis for the
efficacy bounds using the normal approximation that the time-to-event
design used:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">efficacyNominalPValue</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="op">-</span><span class="va">xx</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span><span class="op">)</span></span>
<span><span class="va">efficacyNominalPValue</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.003610924 0.007155713 0.021200261</span></span></code></pre>
<p>Then we took the inverse binomial distribution for these p-values
assuming the targeted total number of cases to obtain:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">qbinom</a></span><span class="op">(</span>p <span class="op">=</span> <span class="va">efficacyNominalPValue</span>, size <span class="op">=</span> <span class="va">xx</span><span class="op">$</span><span class="va">n.I</span>, prob <span class="op">=</span> <span class="va">p0</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 12 23 37</span></span></code></pre>
<p>This is actually the same as the final bounds computed above:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xb</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 12 23 37</span></span></code></pre>
<p>This and the initial approximation for the futility bound are
returned from <code><a href="../reference/toBinomialExact.html">toBinomialExact()</a></code>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xb</span><span class="op">$</span><span class="va">init_approx</span><span class="op">$</span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 12 23 37</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xb</span><span class="op">$</span><span class="va">init_approx</span><span class="op">$</span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 20 29 38</span></span></code></pre>
<p>For the futility bound, only a slight adjustment was required for the
final bound:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xb</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 21 30 38</span></span></code></pre>
<p>The vaccine efficacy at bounds should be checked to see if the
evidence is convincing enough to be accepted as a clinically relevant
benefit in addition to statistical benefit (efficacy bounds) or a less
than relevant benefit for futility bounds.</p>
</div>
<div class="section level3">
<h3 id="checking-design-properties">Checking design properties<a class="anchor" aria-label="anchor" href="#checking-design-properties"></a>
</h3>
<p>Next, we look at <span class="math inline">\(\alpha\)</span>- and
<span class="math inline">\(\beta\)</span>-spending for the
time-to-event design to compare to the exact bound restricted by the
discrete possible counts at bounds. For both <span class="math inline">\(\alpha\)</span>- and <span class="math inline">\(\beta\)</span>-spending, the exact binomial design
has no more spending at each analysis than allowed by each spending
function. We also confirm that changing any of the exact bounds by 1
exceeds the targeting spending.</p>
<div class="section level4">
<h4 id="alpha-spending">
<span class="math inline">\(\alpha\)</span>-spending<a class="anchor" aria-label="anchor" href="#alpha-spending"></a>
</h4>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Exact design cumulative alpha-spending at efficacy bounds</span></span>
<span><span class="co"># (non-binding)</span></span>
<span><span class="va">nb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gsBinomialExact.html">gsBinomialExact</a></span><span class="op">(</span>k <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">k</span>, theta <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">theta</span>, n.I <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">n.I</span>, b<span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">n.I</span> <span class="op">+</span> <span class="fl">1</span>, a <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">nb</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Analysis  1 Analysis  2 Analysis  3 </span></span>
<span><span class="co">#&gt; 0.001619438 0.006447739 0.017397214</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Targeted alpha-spending</span></span>
<span><span class="va">xx</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="fu">sf</span><span class="op">(</span><span class="va">alpha</span>, t <span class="op">=</span> <span class="va">xx</span><span class="op">$</span><span class="va">timing</span>, <span class="va">xx</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.003610924 0.009107476 0.025000000</span></span></code></pre>
<p>Above we see the achieved <span class="math inline">\(\alpha\)</span>-spending ignoring the futility
bound is controlled at the targeted level at each analysis; because of
the exact bound, control is below the target. For this particular
example, we show below that increasing any efficacy bound by 1 not only
increases above the targeted cumulative spend compared to above at each
analysis (diagonal elements), but also exceeds the targeted total spend
of 0.025 at the final analysis (final column). The latter property will
not always hold. Choosing your spending function carefully (in this
case, using the spending function parameter) to ensure cumulative
spending for the exact design is close to the targeted <span class="math inline">\(\alpha\)</span> is worth careful examination. For
this case, choosing the Hwang-Shih-DeCani efficacy spending parameter as
<span class="math inline">\(\gamma=-4\)</span> instead of <span class="math inline">\(\gamma=-3\)</span> second property would not
hold.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check that increasing any bound goes above cumulative spend</span></span>
<span><span class="va">excess_alpha_spend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="va">nb</span><span class="op">$</span><span class="va">k</span>, ncol<span class="op">=</span><span class="va">nb</span><span class="op">$</span><span class="va">k</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">xb</span><span class="op">$</span><span class="va">k</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">a</span> <span class="op">&lt;-</span> <span class="va">xb</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span></span>
<span>  <span class="va">a</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="va">excess_alpha_spend</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="../reference/gsBinomialExact.html">gsBinomialExact</a></span><span class="op">(</span>k <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">k</span>, theta <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">theta</span>, n.I <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">n.I</span>, b<span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">n.I</span> <span class="op">+</span> <span class="fl">1</span>, a <span class="op">=</span> <span class="va">a</span><span class="op">)</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">excess_alpha_spend</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;             [,1]        [,2]       [,3]</span></span>
<span><span class="co">#&gt; [1,] 0.004979222 0.008826964 0.01933025</span></span>
<span><span class="co">#&gt; [2,] 0.001619438 0.013174419 0.02171228</span></span>
<span><span class="co">#&gt; [3,] 0.001619438 0.006447739 0.02856667</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="beta-spending">
<span class="math inline">\(\beta\)</span>-spending<a class="anchor" aria-label="anchor" href="#beta-spending"></a>
</h4>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cumulative beta-spending for exact design</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">xb</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Analysis  1 Analysis  2 Analysis  3 </span></span>
<span><span class="co">#&gt;  0.01033516  0.02225609  0.09941943</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Targeted beta-spending</span></span>
<span><span class="va">xx</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="fu">sf</span><span class="op">(</span><span class="va">beta</span>, t <span class="op">=</span> <span class="va">xx</span><span class="op">$</span><span class="va">timing</span>, <span class="va">xx</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">param</span><span class="op">)</span><span class="op">$</span><span class="va">spend</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.0144437 0.0364299 0.1000000</span></span></code></pre>
<p>Since the futility bound at the final analysis is only 1 plus the
efficacy bound, it cannot be lowered in the following. However, we see
that changing either interim futility bound by 1 would exceed targeted
interim spending (diagonal elements) and total Type II error spending
(third column). Again, the spending function had to be carefully chosen
to ensure the second of these properties; e.g., with the
O’Brien-Flemining-like spending function the second property did not
hold.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check that increasing any bound goes above cumulative spend</span></span>
<span><span class="va">excess_beta_spend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="va">nb</span><span class="op">$</span><span class="va">k</span> <span class="op">-</span> <span class="fl">1</span>, ncol<span class="op">=</span><span class="va">nb</span><span class="op">$</span><span class="va">k</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">xb</span><span class="op">$</span><span class="va">k</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">b</span> <span class="op">&lt;-</span> <span class="va">xb</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span>
<span>  <span class="va">b</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span></span>
<span>  <span class="va">excess_beta_spend</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="../reference/gsBinomialExact.html">gsBinomialExact</a></span><span class="op">(</span>k <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">k</span>, theta <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">theta</span>, n.I <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">n.I</span>, b <span class="op">=</span> <span class="va">b</span>, a <span class="op">=</span> <span class="va">xb</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span><span class="op">)</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">prob</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">excess_beta_spend</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;            [,1]       [,2]      [,3]</span></span>
<span><span class="co">#&gt; [1,] 0.02618462 0.03428681 0.1059802</span></span>
<span><span class="co">#&gt; [2,] 0.01033516 0.03746257 0.1034467</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="bound-update-at-time-of-analysis-for-example-2">Bound update at time of analysis for example 2<a class="anchor" aria-label="anchor" href="#bound-update-at-time-of-analysis-for-example-2"></a>
</h4>
<p>We now use the second interim analysis outcome from the SPUTNIK trial
to show how to update bounds from above when event counts differ from
planned. The first database was on November 18, 2020 and included 20
endpoints. The second database lock with 78 endpoint cases was one week
later on November 24, 2020. These are slightly different than the
targeted event counts above and bounds must be updated using the
spending functions for the trial based on the altered information
fraction compared to plan; see table below. At the time of analysis of
78 endpoint events, 16 were in the experimental group, comfortably
crossing the efficacy bound requiring 44 or fewer experimental events.
Given the rapid accrual of endpoints, the futility bound would likely
have been irrelevant for the first interim. Since Type I error assumed a
non-binding bound, the first analysis could be ignored; i.e., since it
was non-binding the futility bound could be ignored for decision-making
purposes without inflating Type I error. The VE = -0.33 at the futility
bound favored placebo. Since we have overrun the targeted event count at
the second analysis we exceed the targeted power and never reach the
allowed <span class="math inline">\(\beta\)</span>-spending for Type II
error. Note that for this table, the expected sample size and calendar
timing are no longer needed.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebUpdate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/toBinomialExact.html">toBinomialExact</a></span><span class="op">(</span><span class="va">xx</span>, observedEvents <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">78</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We hide the code to produce the table; this is available in package
vignette code.</p>
<div id="kgufivjubq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kgufivjubq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kgufivjubq thead, #kgufivjubq tbody, #kgufivjubq tfoot, #kgufivjubq tr, #kgufivjubq td, #kgufivjubq th {
  border-style: none;
}

#kgufivjubq p {
  margin: 0;
  padding: 0;
}

#kgufivjubq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kgufivjubq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kgufivjubq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kgufivjubq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kgufivjubq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kgufivjubq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kgufivjubq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kgufivjubq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kgufivjubq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kgufivjubq .gt_spanner_row {
  border-bottom-style: hidden;
}

#kgufivjubq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kgufivjubq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kgufivjubq .gt_from_md > :first-child {
  margin-top: 0;
}

#kgufivjubq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kgufivjubq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kgufivjubq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kgufivjubq .gt_row_group_first td {
  border-top-width: 2px;
}

#kgufivjubq .gt_row_group_first th {
  border-top-width: 2px;
}

#kgufivjubq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kgufivjubq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kgufivjubq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kgufivjubq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kgufivjubq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_left {
  text-align: left;
}

#kgufivjubq .gt_center {
  text-align: center;
}

#kgufivjubq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kgufivjubq .gt_font_normal {
  font-weight: normal;
}

#kgufivjubq .gt_font_bold {
  font-weight: bold;
}

#kgufivjubq .gt_font_italic {
  font-style: italic;
}

#kgufivjubq .gt_super {
  font-size: 65%;
}

#kgufivjubq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kgufivjubq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kgufivjubq .gt_indent_1 {
  text-indent: 5px;
}

#kgufivjubq .gt_indent_2 {
  text-indent: 10px;
}

#kgufivjubq .gt_indent_3 {
  text-indent: 15px;
}

#kgufivjubq .gt_indent_4 {
  text-indent: 20px;
}

#kgufivjubq .gt_indent_5 {
  text-indent: 25px;
}

#kgufivjubq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kgufivjubq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="11" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Updated Bounds for Actual Analyses from SPUTNIK trial</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Analysis">Analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Cases">Cases</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="cases">
        <div class="gt_column_spanner">Cases at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="vebound">
        <div class="gt_column_spanner">VE at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="spend">
        <div class="gt_column_spanner">Error Spending<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="power">
        <div class="gt_column_spanner">Power by VE<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span>
</div>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Success">Success</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_efficacy">Efficacy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="alpha">alpha<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="beta">beta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a65%">65%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a75%">75%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a85%">85%</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="Analysis" class="gt_row gt_right">1</td>
<td headers="Cases" class="gt_row gt_right">20</td>
<td headers="Success" class="gt_row gt_right">6</td>
<td headers="Futility" class="gt_row gt_right">16</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.86</td>
<td headers="ve_futility" class="gt_row gt_right">−0.33</td>
<td headers="alpha" class="gt_row gt_right">0.0006</td>
<td headers="beta" class="gt_row gt_right">0.0030</td>
<td headers="65%" class="gt_row gt_right">0.05</td>
<td headers="75%" class="gt_row gt_right">0.18</td>
<td headers="85%" class="gt_row gt_right">0.57</td>
</tr>
<tr>
<td headers="Analysis" class="gt_row gt_right">2</td>
<td headers="Cases" class="gt_row gt_right">78</td>
<td headers="Success" class="gt_row gt_right">44</td>
<td headers="Futility" class="gt_row gt_right">45</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.57</td>
<td headers="ve_futility" class="gt_row gt_right">0.55</td>
<td headers="alpha" class="gt_row gt_right">0.0239</td>
<td headers="beta" class="gt_row gt_right">0.0450</td>
<td headers="65%" class="gt_row gt_right">0.85</td>
<td headers="75%" class="gt_row gt_right">0.99</td>
<td headers="85%" class="gt_row gt_right">1.00</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="11">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Experimental case counts; counts between success and futility bounds do not stop trial</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="11">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Exact vaccine efficacy required to cross bound</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="11">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Cumulative spending at each analysis</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="11">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span> Cumulative power at each analysis by underlying vaccine efficacy</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="11">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span> Efficacy spending ignores non-binding futility bound</td>
    </tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>We have provided an extended example to show that a <span class="citation">Chan and Bohidar (1998)</span> exact binomial using
spending function bounds can be derived in a two-step process that
delivers sample size and bounds by 1) deriving a related time-to-event
design using asymptotic methods and then 2) converting to an exact
binomial design. Adjustments were made to target Type I and Type II
error probabilities in the asymptotic approximation to ensure the exact
binomial Type I and Type II error rates were achieved. The method seems
a reasonable and straightforward approach to develop a complete design
that accounts for the impact of enrollment, failure rates dropout rates,
and trial duration.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-ChanBohidar" class="csl-entry">
Chan, Ivan SF, and Norman R Bohidar. 1998. <span>“Exact Power and Sample
Size for Vaccine Efficacy Studies.”</span> <em>Communications in
Statistics-Theory and Methods</em> 27 (6): 1305–22.
</div>
<div id="ref-JTBook" class="csl-entry">
Jennison, Christopher, and Bruce W. Turnbull. 2000. <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton, FL:
Chapman; Hall/CRC.
</div>
<div id="ref-LachinFoulkes" class="csl-entry">
Lachin, John M., and Mary A. Foulkes. 1986. <span>“Evaluation of Sample
Size and Power for Analyses of Survival with Allowance for Nonuniform
Patient Entry, Losses to Follow-up, Noncompliance, and
Stratification.”</span> <em>Biometrics</em> 42: 507–19.
</div>
<div id="ref-SPUTNIK2021" class="csl-entry">
Logunov, Denis Y, Inna V Dolzhikova, Dmitry V Shcheblyakov, Amir I
Tukhvatulin, Olga V Zubkova, Alina S Dzharullaeva, Anna V Kovyrshina, et
al. 2021. <span>“Safety and Efficacy of an rAd26 and rAd5 Vector-Based
Heterologous Prime-Boost COVID-19 Vaccine: An Interim Analysis of a
Randomised Controlled Phase 3 Trial in Russia.”</span> <em>The
Lancet</em> 397 (10275): 671–81.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
